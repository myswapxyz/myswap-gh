{"version":3,"sources":["../node_modules/typescript/lib sync","components/BoxHeader.js","atoms.ts","services/amm.ts","services/static_data.ts","components/Approve.js","components/Balance.js","services/wallet.service.ts","services/ga.js","components/ConnectWallet.js","components/Swap.js","components/RemoveLiquidity.js","components/LiquidityPool.js","components/Positions.js","components/Provide.js","components/Charts.js","components/Main.js","components/PendingTransaction.js","components/PendingTransactions.js","components/Toast.js","components/Toasts.js","components/Info.js","components/Minter.js","App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","DEFAULT_SLIPPAGE","BoxHeader","props","slippage","setSlippage","useState","anchorEl","setAnchorEl","handleClose","name","setRecoil","swapSlippage","addLiquiditySlippage","withdrawLiquiditySlippage","console","log","Box","sx","flexGrow","AppBar","position","Toolbar","IconButton","size","edge","color","aria-label","onClick","event","currentTarget","mr","right","Typography","variant","component","Menu","boxShadow","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","PaperProps","style","width","open","Boolean","onClose","MenuItem","fontSize","fontWeight","Input","ml","mb","value","onChange","target","onKeyPress","key","inputProps","step","min","max","type","Grid","item","container","justifyContent","Button","textWeight","mt","walletAddressState","atom","default","poolsState","Map","tokensState","tokensUserDataState","pendingTxsState","Array","toastsState","transactionsStatusSelector","selectorFamily","get","componentName","pendingTx","filter","t","walletAmountsSelector","selector","r","forEach","tud","address","undefined","userBalance","token","decimals","set","lastTxDoneSelector","userApproved","tx","hash","status","done","includes","safeToSendTxSelector","n","length","swapSelector","stark","getSelectorFromName","addLiquiditySelector","withdrawLiquiditySelector","getLPBalanceSelector","amm_contract","amm_contract_decimal","BigNumber","toString","selector_get_total_number_of_pools","selector_get_pool","selector_get_total_shares","approveSelector","mintSelector","selector_name","selector_symbol","selector_balanceOf","selector_allowance","selector_decimals","WALLET_SUFFICIENT_BALANCE","numFormat","num","isPercent","res","shiftedBy","sd","ROUND_DOWN","toPrecision","lt","toFixed","tokenAllowanceForAMM","ret","getRecoil","isTokenApproved","amount","tokenAllowance","gte","float_to_decimal_int","checkAndUpdateComponentTransactions","transactionsStatus","componentTxs","setAddLiquidityInProgress","hasOwnProperty","some","s","getPoolPriceForTokenA","poolId","token_in","token_out","otherAmount","pool","ratio","token1","token2Amount","decimal_int_to_float","times","div","token1Amount","getWalletTokenAmount","activeAccount","walletAddress","isSufficientBalanceInWallet","tokenWalletAmount","isPositive","lte","addToastMsg","msg","dismiss","random","current","updatePoolsAndTokens","async","starknet","getStarknet","provider","callContract","contract_address","entry_point_selector","calldata","numPools","Number","result","pools","tokens","new_pools","new_tokens","i","currentPool","refresh","Date","now","SECS_TO_REFRESH_POOL_DATA","data","shares","hex_to_ascii","composeUInt256","token2","fee","cfmm","alsoUpdateTokens","symbol","icon","promises","p","then","push","p1","p2","Promise","allSettled","updateAllTokensDynamicData","_","updateTokenDynamicData","updatePoolDynamicData","isConnected","token_address","current_token","t_thresh","currentTud","newMap","ammBalance","balance","numberToCallParam","p3","addPendingTx","low","high","plus","pow","str1","hex","substr","str","String","fromCharCode","parseInt","human_readable_hash","getPoolIdFromTokens","t1","t2","sortTokens","calcOtherTokenAmount","token_leading","token_other","token_leading_amount_float","leading_token_number","token_leading_amount","token_leading_reserve","token_other_reserve","minus","calcOtherTokenRequiredAmountForLiquidity","token_a","token_b","token_a_float","token_a_amount","price","safeToSend","SERVER_URL","DEFAULT_APPROVE_AMOUNT","BigInt","Approve","useRecoilState","connectedAddress","tokenApproveInProgress","setTokenApproveInProgress","setComponentTxs","useEffect","tokenAmount","activePoolId","tokenInRange","handleApproveToken","approveAmount","tokenFrom","signer","invokeFunction","transaction_hash","approve","prevState","token_obj","LoadingButton","fullWidth","loading","loadingPosition","startIcon","Balance","showMaxButton","setMaxAmountHandler","walletAmount","enable","networkId","baseUrl","getExplorerUrlBase","GApage","page","ReactGA","pageview","GAbutton","label","cat","action","category","GAtrack","ConnectWallet","walletConnectionStatus","setWalletConnectionStatus","voyagerBaseUrl","setVoyagerBaseUrl","networkName","setNetworkName","changeListenerRegistered","setChangeListenerRegistered","setAddress","handleClick","showModal","connectWallet","secondary","handleWalletChange","accounts","handleEvent","on","addWalletChangeListener","disabled","className","handleConnectedClick","window","fill","MAX_SAFE_INTEGER","Swap","setActivePoolId","setToken1","setToken1Amount","setToken2","setToken2Amount","leadingToken","setLeadingToken","swapInProgress","setSwapInProgress","tuds","useInterval","handleTokenAmountChange","regex","test","menuItems","otherSelectedToken","direction","src","alt","height","calcToken2MinAmount","parseFloat","handleSwap","minAmountOut","swapAmount","swap","priceDirection","setPriceDirection","border","Card","spacing","xs","FormControl","InputLabel","Select","labelId","TextField","helperText","placeholder","autoComplete","error","alignItems","tmpToken","tmpAmount","isZero","currentPrice","minAmount","token1Symbol","token2Symbol","floatSlippage","transactionPrice","transactionPriceInv","priceImpact","backgroundColor","gt","displayPrice1","displayPrice2","CardActionArea","priceAndSlippage","minWidth","token1SufficientBalance","token2InsufficientPoolBalance","floatAmount","decimalAmount","isInsufficientBalanceInPool","instruction","swapButton","Item","styled","Paper","theme","typography","body2","padding","textAlign","palette","text","MuiInput","RemoveLiquidity","setOpen","percent","setPercent","removeLiquidityInProgress","setRemoveLiquidityInProgress","updateState","newPercent","setAmounts","Dialog","DialogContent","DialogContentText","Slider","defaultValue","valueLabelDisplay","marks","aria-labelledby","onBlur","CardHeader","title","disableTypography","Stack","token1Icon","token2Icon","DialogActions","sharesToWithdraw","minToken1Amount","minToken2Amount","pool_id","token_a_min_amount","token_b_min_amount","withdraw_liquidity","LiquidityPool","userPoolShare","userToken1Amount","user_share","userToken1AmountDecimal","userToken2Amount","userToken2AmountDecimal","CardContent","gutterBottom","CardActions","Positions","userPools","setUserPools","fetchBalance","getLPBalance","prev","m","allPools","Provide","addLiquidityInProgress","handleAddLiquidity","minAmount1Out","minAmount2Out","token_a_address","token_b_address","token_b_amount","add_liquidity","symbol1","symbol2","priceForToken1","priceForToken2","pool_share","lineHeight","priceAndShare","token2SufficientBalance","addLiquidityButton","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","Charts","labels","datasets","datasetIdKey","Main","selectedTab","setSelectedTab","Tabs","newValue","centered","Tab","PendingTransaction","transactionStatus","PendingTransactions","txs","getTransactionStatus","pendingTxs","find","tx_status","currTxs","tx_","Object","assign","getTransactionUpdate","pendingTransactions","Toast","React","reason","Snackbar","autoHideDuration","Alert","severity","Toasts","toasts","allActiveToasts","activeToasts","Info","options","responsive","plugins","legend","display","Minter","mintAmount","setMintAmount","mintedTokens","setMintedTokens","waitingToMint","setWaitingToMint","walletAmounts","lastTxDone","mintedState","0","1","2","mintNextToken","x","shift","ERC20_mint","handleMintAmountChange","entries","entry","minted","curr","mintedTokensList","waitingToMintList","App","initialize","fetch","json","fetchAmmInfo","numberOfPools","d","poolName","tokenAAddress","tokenAReserves","tokenBAddress","tokenBReserves","feePercentage","fetchPools","numberOfTokens","tokenAddress","tokenName","tokenSymbol","tokenIcon","tokenDecimals","fetchTokens","updatePoolsAndTokensStatic","RecoilNexus","exact","path","Container","maxWidth","ReactDOM","render","StrictMode","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.494e3ba9.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 138;","import React, { useState } from 'react'\nimport { setRecoil } from 'recoil-nexus'\nimport { swapSlippage, addLiquiditySlippage, withdrawLiquiditySlippage } from '../atoms'\nimport {\n    MenuItem,\n    Typography,\n    AppBar,\n    Box,\n    Toolbar,\n    IconButton,\n    Input,\n    Button,\n    Grid,\n    Menu\n} from '@mui/material'\nimport SettingsIcon from '@mui/icons-material/Settings'\n\nexport const DEFAULT_SLIPPAGE = '0.50'\n\nfunction BoxHeader(props) {\n    const [slippage, setSlippage] = useState(DEFAULT_SLIPPAGE)\n    const [anchorEl, setAnchorEl] = useState(null)\n\n    const handleSlippageChange = (event) => {\n        setSlippage(event.target.value)\n    }\n\n    const handleMenu = (event) => {\n        setAnchorEl(event.currentTarget)\n    }\n\n    const handleClose = () => {\n        if (props.name === 'Swap') setRecoil(swapSlippage, slippage)\n        if (props.name === 'Add Liquidity') setRecoil(addLiquiditySlippage, slippage)\n        if (props.name === 'Remove Liquidity')\n            setRecoil(withdrawLiquiditySlippage, slippage)\n\n        console.log('Slippage set to: ', slippage)\n        setAnchorEl(null)\n    }\n\n    return (\n        <Box sx={{ flexGrow: 1 }}>\n            <AppBar position='static'>\n                <Toolbar>\n                    <IconButton\n                        size='large'\n                        edge='start'\n                        color='inherit'\n                        aria-label='menu'\n                        onClick={handleMenu}\n                        sx={{ mr: 2, position: 'absolute', right: '0%' }}>\n                        <SettingsIcon></SettingsIcon>\n                    </IconButton>\n                    <Typography variant='h6' component='div' sx={{ flexGrow: 1 }}>\n                        {props.name}\n                    </Typography>\n                    <div>\n                        <Menu\n                            id='menuAppBar'\n                            sx={{ boxShadow: 1 }}\n                            anchorEl={anchorEl}\n                            anchorOrigin={{\n                                vertical: 'top',\n                                horizontal: 'right'\n                            }}\n                            keepMounted\n                            transformOrigin={{\n                                vertical: 'top',\n                                horizontal: 'right'\n                            }}\n                            PaperProps={{\n                                style: {\n                                    width: 250\n                                }\n                            }}\n                            open={Boolean(anchorEl)}\n                            onClose={handleClose}>\n                            <MenuItem sx={{ fontSize: 14, fontWeight: 'bold' }}>\n                                Transaction Settings\n                            </MenuItem>\n                            <MenuItem>\n                                Set Slippage\n                                <Input\n                                    sx={{ ml: 3, mb: 0 }}\n                                    value={slippage}\n                                    size='small'\n                                    onChange={handleSlippageChange}\n                                    onKeyPress={(event) => {\n                                        if (event.key === 'Enter') handleClose()\n                                    }}\n                                    inputProps={{\n                                        step: 0.01,\n                                        min: 0,\n                                        max: 100,\n                                        type: 'number',\n                                        'aria-labelledby': 'input-slider'\n                                    }}\n                                />\n                            </MenuItem>\n                            <Grid item container justifyContent='center'>\n                                <Button\n                                    variant='contained'\n                                    size='small'\n                                    sx={{ textWeight: 'bold', mt: 1 }}\n                                    onClick={handleClose}>\n                                    OK\n                                </Button>\n                            </Grid>\n                        </Menu>\n                    </div>\n                </Toolbar>\n            </AppBar>\n        </Box>\n    )\n}\n\nexport default BoxHeader\n","import { atom, selector, selectorFamily } from 'recoil'\nimport { DEFAULT_SLIPPAGE } from './components/BoxHeader'\n\n//const { persistAtom } = recoilPersist() // not currently used\n\nexport interface Pool {\n    id: number\n    name: string\n    token1: string\n    token1Amount: string // dynamic TODO: | undefined\n    token2: string\n    token2Amount: string // dynamic TODO: | undefined\n    refresh: number // when is the last time we refreshed this pool's data\n    fee: number\n    shares: string\n    cfmm: number\n}\n\n// static Token data\nexport interface Token {\n    name: string\n    symbol: string\n    address: string\n    decimals: number\n    id: number\n    icon: string // url\n}\n\n// dynamic Token data\nexport interface TokenUserData {\n    address: string\n    ammBalance: string | undefined\n    userBalance: string | undefined\n    userApproved: string | undefined\n    refresh: number // when is the last time we refreshed the user data for this token\n}\n\nexport interface Transaction {\n    hash: string\n    type: string\n    status: string\n    dismiss: boolean // TODO : remove\n    // TODO add acceptance time\n}\n\nexport interface ToastMsg {\n    msg: string\n    type: string\n    dismiss: boolean\n    hash: string // for uniqueness\n}\n\nexport const walletAddressState = atom({\n    key: 'walletAddressState',\n    default: ''\n})\n\nexport const isWalletConnectedState = atom({\n    key: 'isWalletConnectedState',\n    default: 0 // 0-not connected, 1=being connected, 2=connected\n})\n\nexport const poolsState = atom({\n    key: 'poolsState',\n    //    effects_UNSTABLE: [persistAtom],\n    default: new Map<number, Pool>()\n})\n\nexport const tokensState = atom({\n    key: 'tokensState',\n    //  effects_UNSTABLE: [persistAtom],\n    default: new Map<string, Token>()\n})\n\nexport const tokensUserDataState = atom({\n    key: 'tokensUserDataState',\n    default: new Map<string, TokenUserData>()\n})\n\nexport const pendingTxsState = atom({\n    key: 'pendingTxsState',\n    default: new Array<Transaction>()\n})\n\nexport const toastsState = atom({\n    key: 'toastsState',\n    default: new Array<ToastMsg>()\n})\n\nexport const swapSlippage = atom({\n    key: 'swapSlippage',\n    default: DEFAULT_SLIPPAGE\n})\n\nexport const addLiquiditySlippage = atom({\n    key: 'addLiquiditySlippage',\n    default: DEFAULT_SLIPPAGE\n})\n\nexport const withdrawLiquiditySlippage = atom({\n    key: 'withdrawLiquiditySlippage',\n    default: DEFAULT_SLIPPAGE\n})\n\n\n// Selectors\n\nexport const transactionsStatusSelector = selectorFamily ({\n    key: 'transactionsStatusSelector',\n    get: (componentName: string) => ({ get }): Array<Transaction> | undefined => {\n        let pendingTx = get(pendingTxsState)\n        if (pendingTx)\n            return pendingTx.filter(t => t.type === componentName)\n        return undefined\n    }\n})\n\nexport const walletAmountsSelector = selector({\n    key: 'walletAmountsSelector',\n    get: ({ get }): Map<string, string> => {\n        let r = new Map<string, string>()\n        get(tokensUserDataState).forEach((tud, address) => {\n            if (tud.userBalance !== undefined) {\n                let token = get(tokensState).get(address)\n                if (token && token.decimals) {\n                    r.set(address, tud.userBalance)\n                }\n            }\n        })\n        return r\n    }\n})\n\nexport const walletAllowanceSelector = selector({\n    key: 'walletAllowanceSelector',\n    get: ({ get }): Map<string, string> => {\n        let r = new Map<string, string>()\n        get(tokensUserDataState).forEach((tud, address) => {\n            if (tud.userApproved !== undefined) {\n                let token = get(tokensState).get(address)\n                if (token && token.decimals) {\n                    r.set(address, tud.userApproved)\n                }\n            }\n        })\n        return r\n    }\n})\n\nexport const pendingTxSelector = selector({\n    key: 'pendingTxSelector',\n    get: ({ get }): Map<string, string> => {\n        let r = new Map<string, string>()\n        get(pendingTxsState).forEach((tx) => {\n            r.set(tx.hash, tx.status)\n        })\n        return r\n    }\n})\n\nexport const lastTxDoneSelector = selector({\n    key: 'lastTxDoneSelector',\n    get: ({ get }): boolean => {\n        let done = true\n        get(pendingTxsState).forEach((tx) => {\n            done = false\n            if (tx.status === 'RECEIVED' || tx.status.includes('ACCEPTED')) done = true // Yaron: what about rejected\n        })\n        return done\n    }\n})\n\nexport const safeToSendTxSelector = selector({\n    key: 'safeToSendTxSelector',\n    get: ({ get }): boolean => {\n        const n = get(pendingTxsState).length\n        if (n === 0) return true\n\n        const tx = get(pendingTxsState)[n - 1]\n        if (tx.status.includes('REJECTED') || tx.status.includes('ACCEPTED')) return true //TODO: once Argent fix starknet.js, we need to add 'PENDING' as well\n\n        return false\n    }\n})\n","import { getRecoil, setRecoil } from 'recoil-nexus'\nimport { BigNumber } from 'bignumber.js'\nimport { stark } from 'starknet'\nimport { getStarknet } from '@argent/get-starknet'\n\nimport {\n    walletAddressState,\n    poolsState,\n    tokensState,\n    tokensUserDataState,\n    Pool,\n    Token,\n    TokenUserData,\n    pendingTxsState,\n    Transaction,\n    ToastMsg,\n    toastsState,\n    safeToSendTxSelector\n} from '../atoms'\n\n\n\n// amm\nconst swapSelector = stark.getSelectorFromName('swap')\nconst addLiquiditySelector = stark.getSelectorFromName('add_liquidity')\nconst withdrawLiquiditySelector = stark.getSelectorFromName('withdraw_liquidity')\nconst getLPBalanceSelector = stark.getSelectorFromName('get_lp_balance')\nconst amm_contract = '0x008fb0ec84a7025839faafbf9eeee6b6e9957d50bd418a334d00740fbb9f6170'\nconst amm_contract_decimal = BigNumber(amm_contract).toString(10)\n\nconst selector_get_total_number_of_pools = stark.getSelectorFromName(\n    'get_total_number_of_pools'\n)\nconst selector_get_pool = stark.getSelectorFromName('get_pool')\nconst selector_get_total_shares = stark.getSelectorFromName('get_total_shares')\n//const selector_get_pool_token_balance = stark.getSelectorFromName(\"get_pool_token_balance\")\n\n// ERC20\nconst approveSelector = stark.getSelectorFromName('approve')\nconst mintSelector = stark.getSelectorFromName('mint')\n\nconst selector_name = stark.getSelectorFromName('name')\nconst selector_symbol = stark.getSelectorFromName('symbol')\nconst selector_balanceOf = stark.getSelectorFromName('balanceOf')\nconst selector_allowance = stark.getSelectorFromName('allowance')\nconst selector_decimals = stark.getSelectorFromName('decimals')\n\nconst SECS_TO_REFRESH_POOL_DATA = 60\n\nexport const WALLET_SUFFICIENT_BALANCE = {\n    FALSE: 0,\n    TRUE: 1,\n    UNKNOWN: 2\n}\n\nconst is_dev = () : boolean => {\n    //return (process.env.NODE_ENV) === 'development'\n    return false\n}\n\n\nexport const numFormat = (num: string, isPercent = false): string => {\n    if (num === undefined || num === '' ) return ''\n\n    if (isPercent) {\n        let res = BigNumber(num).shiftedBy(2).sd(4, BigNumber.ROUND_DOWN).toPrecision(4)\n        if (BigNumber(res).lt(0.01)) return '<0.01'\n        return res\n    }\n\n    if (BigNumber(num).lt(1)) {\n        // BigNumber(0.012340000).sd(2).toString(10) --> '0.012'\n        let res = BigNumber(num).sd(6).toFixed(18, BigNumber.ROUND_DOWN)    // FIXME: need to align to token decimals (not 18).... 6 is a magic number...\n        // patch:\n        return BigNumber(res).toString(10)\n    }\n    return BigNumber(num).toFixed(2)\n}\n\n\nexport const tokenAllowanceForAMM = (token: string) => {\n    let ret = null\n    if (token) {\n        let tokensUserData = getRecoil(tokensUserDataState)\n        let tud = tokensUserData.get(token)\n        if (tud) {\n            ret = tud.userApproved\n            console.log('tokenAllowanceForAMM tud.userApproved = ', tud.userApproved)\n        }\n    }\n    return ret\n}\n\nexport const isTokenApproved = (token: string, amount: string): boolean => {\n    // Yaron: why do we need try-catch here? this is not an async function, how can it fail?\n    try {\n        let tokenAllowance = tokenAllowanceForAMM(token)    // should return a string\n        if (\n            tokenAllowance &&\n            BigNumber(tokenAllowance).gte(BigNumber(float_to_decimal_int(token, amount)))\n        ) {\n            return true\n        }\n    } catch (e) {}\n    return false\n}\n\n\nexport const checkAndUpdateComponentTransactions = (\n    transactionsStatus: Array<Transaction>,\n    componentTxs: Record<string, string>,\n    setAddLiquidityInProgress: (b: boolean) => any\n) => {\n    if (transactionsStatus) {\n        transactionsStatus.forEach((tx) => {\n            console.log('checkAndUpdateComponentTransactions: ', tx.status, tx.hash)\n\n            // check if transaction was already handled\n            if (componentTxs.hasOwnProperty(tx.hash)) {\n                if (\n                    ['REJECTED', 'PENDING', 'ACCEPTED'].some((s) => tx.status.includes(s))\n                ) {\n                    setAddLiquidityInProgress(false)\n                    delete componentTxs[tx.hash]\n                }\n            }\n        })\n    }\n}\n\n\nexport const getPoolPriceForTokenA = (poolId: number, token_in: string, token_out: string, otherAmount='1'): string => {\n    let pools = getRecoil(poolsState)\n    let pool = pools.get(poolId)\n    let ratio = BigNumber(1.0)\n\n    if (pool) {\n\n        if (pool.token1 === token_in) {\n            console.log('here',pool.token2Amount)\n            ratio = BigNumber(decimal_int_to_float(token_out, pool.token2Amount)).times(BigNumber(otherAmount)).div(\n                BigNumber(decimal_int_to_float(token_in, pool.token1Amount))\n            )\n        } else {\n            ratio = BigNumber(decimal_int_to_float(token_out, pool.token1Amount)).times(BigNumber(otherAmount)).div(\n                BigNumber(decimal_int_to_float(token_in, pool.token2Amount))\n            )\n        }\n    }\n    console.log('Ratio', ratio.toString(10))\n    return ratio.toString(10)\n}\n\n\nexport const getWalletTokenAmount = (token: string) : string => {\n    if (is_dev()) console.log('amm: getWalletTokemAmount, token=',token)\n\n    let activeAccount: string = walletAddress()\n    let tokensUserData = getRecoil(tokensUserDataState)\n    let tud = tokensUserData.get(token)     // expecting that tud values will be strings\n\n    if (!activeAccount || !token || !tud || tud.userBalance === undefined) return ''\n\n    return decimal_int_to_float(token, tud.userBalance)\n}\n\n\nexport const isSufficientBalanceInWallet = (token: string, amount: string) => {\n\n    if (is_dev()) console.log('amm: isSufficientBalanceInWallet, token=',token,' amount=',amount)\n\n\n    let activeAccount: string = walletAddress()\n    let tokensUserData = getRecoil(tokensUserDataState)\n    let tud = tokensUserData.get(token)\n\n    if (!activeAccount) return WALLET_SUFFICIENT_BALANCE.UNKNOWN\n    if (!token) return WALLET_SUFFICIENT_BALANCE.UNKNOWN\n    if (!amount) return WALLET_SUFFICIENT_BALANCE.TRUE\n    if (!tud) return WALLET_SUFFICIENT_BALANCE.UNKNOWN\n    if (tud.userBalance === undefined) return WALLET_SUFFICIENT_BALANCE.UNKNOWN\n\n    // The actual check:\n    let tokenWalletAmount = decimal_int_to_float(token, tud.userBalance)\n\n    if (\n        BigNumber(amount).isPositive() &&\n        BigNumber(amount).lte(BigNumber(tokenWalletAmount))\n    )\n        return WALLET_SUFFICIENT_BALANCE.TRUE\n\n    return WALLET_SUFFICIENT_BALANCE.FALSE\n}\n\nexport const isInsufficientBalanceInPool = (\n    poolId: number,\n    token: string,\n    floatAmount: string\n) : boolean => {\n\n    if (is_dev()) console.log('amm: isInsufficientBalanceInPool, pool=',poolId,' token=',token,' amount=',floatAmount)\n\n    if (!token || poolId <= 0) return false\n\n    let pools = getRecoil(poolsState)\n    let pool: Pool | undefined = pools.get(poolId)\n    if (!pool) throw Error('missing pool ' + poolId)\n\n    let decimalAmount = float_to_decimal_int(token, floatAmount)\n\n    if (pool.token1 === token) {\n        return BigNumber(decimalAmount).gt(BigNumber(pool.token1Amount))\n    } else {\n        return BigNumber(decimalAmount).gt(BigNumber(pool.token2Amount))\n    }\n}\n\nexport const addToastMsg = (msg: string, type: string) => {\n    let t: ToastMsg = { msg: msg, type: type, dismiss: false, hash: BigNumber.random(10).times(1e10).toString(16) }\n    setRecoil(toastsState, (current: Array<ToastMsg>) => {\n        return [...current, t]\n    })\n}\n\nconst walletAddress = () => {\n    return getRecoil(walletAddressState)\n}\n\nexport const updatePoolsAndTokens = async (alsoUpdateTokens: boolean): Promise<any> => {\n    console.log('updatePoolsAndTokens')\n    if (is_dev()) addToastMsg('updatePoolsAndTokens, tokens='+alsoUpdateTokens, 'info')\n\n    const starknet = getStarknet()\n\n    let r = await starknet.provider.callContract({\n        contract_address: amm_contract,\n        entry_point_selector: selector_get_total_number_of_pools,\n        calldata: []\n    })\n\n    let numPools = Number(r.result[0])\n    let pools = getRecoil(poolsState)\n    let tokens = getRecoil(tokensState)\n    let new_pools = new Map<number, Pool>()\n    let new_tokens = new Map(tokens)\n\n    for (let i = 1; i <= numPools; i++) {\n        let currentPool = pools.get(i)\n        if (\n            currentPool &&\n            currentPool.refresh > Date.now() - SECS_TO_REFRESH_POOL_DATA * 1000\n        ) {\n            new_pools.set(i, currentPool)\n            continue // don't refresh\n        }\n\n        let data = await starknet.provider.callContract({\n            contract_address: amm_contract,\n            entry_point_selector: selector_get_pool,\n            calldata: [i.toString()]\n        })\n\n        let shares = await starknet.provider.callContract({\n            contract_address: amm_contract,\n            entry_point_selector: selector_get_total_shares,\n            calldata: [i.toString()]\n        })\n\n        console.log(data)\n        let pool: Pool = {\n            id: i,\n            name: hex_to_ascii(data.result[0]),\n            token1: data.result[1],\n            token1Amount: composeUInt256(data.result[2], data.result[3]),\n            token2: data.result[4],\n            token2Amount: composeUInt256(data.result[5], data.result[6]),\n            fee: Number(data.result[7]) / 1e5,\n            cfmm: Number(data.result[8]),\n            shares: composeUInt256(shares.result[0], shares.result[1]),\n            refresh: Date.now()\n        }\n        new_pools.set(i, pool)\n\n        if (alsoUpdateTokens) {\n            if (!new_tokens.get(pool.token1)) {\n                let n = new_tokens.size\n                console.log('new token1 n=', n)\n                let t: Token = {\n                    address: pool.token1,\n                    id: n,\n                    name: '',\n                    symbol: '',\n                    icon: '',\n                    decimals: 0\n                }\n                new_tokens.set(pool.token1, t)\n            }\n            if (!new_tokens.get(pool.token2)) {\n                let n = new_tokens.size\n                console.log('new token2 n=', n)\n                let t: Token = {\n                    address: pool.token2,\n                    id: n,\n                    name: '',\n                    symbol: '',\n                    icon: '',\n                    decimals: 0\n                }\n                new_tokens.set(pool.token2, t)\n            }\n        }\n    }\n\n    // fetch token names and precision\n    if (alsoUpdateTokens) {\n        let promises: Array<Promise<any>> = []\n        new_tokens.forEach((value: Token, address: string) => {\n            let p = starknet.provider\n                .callContract({\n                    contract_address: address,\n                    entry_point_selector: selector_name,\n                    calldata: []\n                })\n                .then((data: any) => {\n                    const name = hex_to_ascii(data.result[0])\n                    console.log('name=', name)\n                    value.name = name\n                })\n            promises.push(p)\n            let p1 = starknet.provider\n                .callContract({\n                    contract_address: address,\n                    entry_point_selector: selector_symbol,\n                    calldata: []\n                })\n                .then((data: any) => {\n                    const name = hex_to_ascii(data.result[0])\n                    console.log('symbol=', name)\n                    value.symbol = name\n                })\n            promises.push(p1)\n\n            let p2 = starknet.provider\n                .callContract({\n                    contract_address: address,\n                    entry_point_selector: selector_decimals,\n                    calldata: []\n                })\n                .then((data: any) => {\n                    const decimals = Number(data.result[0])\n                    value.decimals = decimals\n                })\n            promises.push(p2)\n        })\n        await Promise.allSettled(promises)\n\n        // update tokens in recoil (before pools!)\n        setRecoil(tokensState, new_tokens)\n        console.log('tokens=', new_tokens)\n    }\n\n    // update pools in recoil\n    setRecoil(poolsState, new_pools)\n}\n\nexport const updateAllTokensDynamicData = async (): Promise<any> => {\n    let tokens = getRecoil(tokensState)\n    tokens.forEach((_, token) => {\n        console.log('updateAllTokensDynamicData: token=', token)\n        updateTokenDynamicData(token)\n    })\n}\n\nexport const updatePoolDynamicData = async (poolId: number): Promise<any> => {\n    console.log('updatePoolDynamicData')\nif (is_dev()) addToastMsg('updatePoolDynamicData, pool='+poolId, 'info')\n\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n\n    let pools = getRecoil(poolsState)\n    let tokens = getRecoil(tokensState)\n\n    const starknet = getStarknet()\n\n    // checks that enable succeeded\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    let pool: Pool | undefined = pools.get(poolId)\n    if (!pool) throw Error('unknown pool ' + poolId)\n\n    let token1: Token | undefined = tokens.get(pool.token1)\n    let token2: Token | undefined = tokens.get(pool.token2)\n    if (!token1) throw Error('missing token ' + pool.token1)\n    if (!token2) throw Error('missing token ' + pool.token2)\n\n    // so far everything must have been stored in recoil\n    // now we update dynamic data: per token in pool\n    updateTokenDynamicData(pool.token1)\n    updateTokenDynamicData(pool.token2)\n}\n\nexport const updateTokenDynamicData = async (token_address: string): Promise<any> => {\n    if (!token_address) return null\n    if (is_dev()) addToastMsg('updateTokenDynamicData, token='+token_address, 'info')\n\n    const starknet = getStarknet()\n    let promises: Array<Promise<any>> = []\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n\n    let tokensDynamic = getRecoil(tokensUserDataState)\n    let current_token = tokensDynamic.get(token_address)\n    if (current_token) {\n        const t_thresh = Date.now() - SECS_TO_REFRESH_POOL_DATA * 1000\n        if (current_token.refresh > t_thresh) {\n            return null\n        }\n    } else {\n        // new token - first store an empty shell in Recoil, then the async requests will update it\n        setRecoil(tokensUserDataState, (currentTud: Map<string, TokenUserData>) => {\n            let newMap = new Map(currentTud)\n            if (!newMap.get(token_address)) {\n                let tud: TokenUserData = {\n                    address: token_address,\n                    refresh: Date.now(),\n                    ammBalance: undefined,\n                    userBalance: undefined,\n                    userApproved: undefined\n                }\n                newMap.set(token_address, tud)\n            }\n            return newMap\n        })\n    }\n\n    let p1 = starknet.provider\n        .callContract({\n            contract_address: token_address,\n            entry_point_selector: selector_balanceOf,\n            calldata: [amm_contract_decimal]\n        })\n        .then((data: any) => {\n            const balance = composeUInt256(data.result[0], data.result[1])\n            // update balance directly in recoil\n            setRecoil(tokensUserDataState, (currentTud: Map<string, TokenUserData>) => {\n                let newMap = new Map(currentTud)\n                let tud = newMap.get(token_address)\n                if (tud) {\n                    tud.ammBalance = balance\n                    newMap.set(tud.address, tud)\n                }\n                return newMap\n            })\n\n        })\n    promises.push(p1)\n\n    let p2 = starknet.provider\n        .callContract({\n            contract_address: token_address,\n            entry_point_selector: selector_balanceOf,\n            calldata: [numberToCallParam(activeAccount)]\n        })\n        .then((data: any) => {\n            // update balance directly in recoil\n            const balance = composeUInt256(data.result[0], data.result[1])\n            setRecoil(tokensUserDataState, (currentTud: Map<string, TokenUserData>) => {\n                let newMap = new Map(currentTud)\n                let tud = newMap.get(token_address)\n                if (tud) {\n                    tud.userBalance = balance\n                    newMap.set(tud.address, tud)\n                }\n                return newMap\n            })\n        })\n    promises.push(p2)\n\n    let p3 = starknet.provider\n        .callContract({\n            contract_address: token_address,\n            entry_point_selector: selector_allowance,\n            calldata: [numberToCallParam(activeAccount), numberToCallParam(amm_contract)]\n        })\n        .then((data: any) => {\n            const balance = composeUInt256(data.result[0], data.result[1])\n            setRecoil(tokensUserDataState, (currentTud: Map<string, TokenUserData>) => {\n                let newMap = new Map(currentTud)\n                let tud = newMap.get(token_address)\n                if (tud) {\n                    tud.userApproved = balance\n                    newMap.set(tud.address, tud)\n                }\n                return newMap\n            })\n        })\n    promises.push(p3)\n\n    await Promise.allSettled(promises)\n}\n\nfunction addPendingTx(hash: string, type: string) {\n    // fixme: use 'type' as enum and not freestyle strings\n    let tx: Transaction = {\n        hash: hash,\n        type: type,\n        status: 'new',\n        dismiss: false\n    }\n    setRecoil(pendingTxsState, (current: Array<Transaction>) => {\n        return [...current, tx]\n    })\n}\n\nexport const approve = async (tokenFrom: string, amount: string): Promise<any> => {\n    console.log('approve')\n\n    const starknet = getStarknet()\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    if (!safeToSend()) return null\n\n    let tx = await starknet.signer.invokeFunction(\n        tokenFrom, // to (ERC-20 contract)\n        approveSelector, // selector (approve)\n        [numberToCallParam(amm_contract), numberToCallParam(amount), numberToCallParam(0)]\n    )\n\n    addPendingTx(tx.transaction_hash, 'approve')\n\n    return tx\n}\n\nexport const getAllowance = async (tokenFrom: string): Promise<any> => {\n    console.log('getAllowance')\n    const starknet = getStarknet()\n\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n\n    // checks that enable succeeded\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    return ERC20_allowance(tokenFrom, activeAccount, amm_contract)\n}\n\nexport const ERC20_balanceOf = async (token: string, account: string): Promise<any> => {\n    const starknet = getStarknet()\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    let data = await starknet.provider.callContract({\n        contract_address: token,\n        entry_point_selector: selector_balanceOf,\n        calldata: [numberToCallParam(account)]\n    })\n\n    const balance = composeUInt256(data.result[0], data.result[1])\n\n    return balance\n}\n\nexport const ERC20_allowance = async (\n    token: string,\n    owner: string,\n    spender: string\n): Promise<any> => {\n    const starknet = getStarknet()\n\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    let data = await starknet.provider.callContract({\n        contract_address: token,\n        entry_point_selector: selector_allowance,\n        calldata: [numberToCallParam(owner), numberToCallParam(spender)]\n    })\n\n    const balance = composeUInt256(data.result[0], data.result[1])\n    return balance\n}\n\nexport const ERC20_mint = async (token: string, amount: string): Promise<any> => {\n    const starknet = getStarknet()\n\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    if (!safeToSend()) return null\n\n    let tx = await starknet.signer.invokeFunction(\n        token, // to (ERC-20 contract)\n        mintSelector, // selector (mint)\n        [\n            numberToCallParam(activeAccount),\n            numberToCallParam(amount),\n            numberToCallParam(0)\n        ]\n    )\n\n    addPendingTx(tx.transaction_hash, 'mint')\n\n    return tx\n}\n\nexport const swap = async (\n    poolId: number,\n    tokenFrom: string,\n    swapAmount: string,\n    minAmountOut: string\n): Promise<any> => {\n    console.log('swap')\n\n    const starknet = getStarknet()\n\n    let activeAccount: string = walletAddress()\n\n    if (!activeAccount) {\n        return null\n    }\n\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    if (!safeToSend()) return null\n\n    let tx = await starknet.signer.invokeFunction(\n        amm_contract, // to\n        swapSelector, // selector (swap)\n        [\n            numberToCallParam(poolId),\n            numberToCallParam(tokenFrom),\n            numberToCallParam(swapAmount),\n            numberToCallParam(0),\n            numberToCallParam(minAmountOut),\n            numberToCallParam(0)\n        ]\n    )\n\n    addPendingTx(tx.transaction_hash, 'swap')\n    return tx\n}\n\nexport const getLPBalance = async (pool_id: number, address: string): Promise<any> => {\n    const starknet = getStarknet()\n\n    if (!address) {\n        return null\n    }\n    if (starknet.isConnected === false) throw Error('starknet wallet not connected')\n\n    let data = await starknet.provider.callContract({\n        contract_address: amm_contract,\n        entry_point_selector: getLPBalanceSelector,\n        calldata: [numberToCallParam(pool_id), numberToCallParam(address)]\n    })\n\n    const balance = composeUInt256(data.result[0], data.result[1])\n\n    return balance\n}\n\nexport const composeUInt256 = (low: string, high: string): string => {\n    return BigNumber(low).plus(BigNumber(high).times(BigNumber(2).pow(128))).toString(10)\n}\n\n// fixme: probably redundant, consider remove\nconst numberToCallParam = (n: number | string): string => {\n    return BigNumber(n).toString(10)\n    //not good: return number.toBN(n).toString()\n}\n\n// fixme substr is deprecated\nfunction hex_to_ascii(str1: string): string {\n    var hex = str1.substr(2).toString()\n    var str = ''\n    for (var n = 0; n < hex.length; n += 2) {\n        str += String.fromCharCode(parseInt(hex.substr(n, 2), 16))\n    }\n    return str\n}\n\nexport function human_readable_hash(hash: string): string {\n    if (hash.length <= 8) return hash\n    return hash.substr(0, 5) + '...' + hash.substr(-3)\n}\n\nexport const waitForTransaction = async (hash: string) => {\n    await getStarknet().provider.waitForTx(hash)\n}\n\nexport const getTransactionUpdate = async (hash: string): Promise<string | null> => {\n    let t = await getStarknet().provider.getTransactionStatus(hash)\n\n    // check if transaction status has changed and update Recoil\n    let pendingTxs = getRecoil(pendingTxsState)\n    if (\n        pendingTxs &&\n        pendingTxs.find((tx) => tx.hash === hash && tx.status !== t.tx_status)\n    ) {\n        console.log('getTransactionUpdate: ', t.tx_status, hash)\n        setRecoil(pendingTxsState, (currTxs: Array<Transaction>) => {\n            let r = new Array<Transaction>()\n            currTxs.forEach((tx) => {\n                console.log('Inside forEach: ', tx.hash, tx.status)\n                if (tx.hash === hash) {\n                    // dup and change\n                    let tx_: Transaction = Object.assign({}, tx)\n                    tx_.status = t.tx_status\n                    if (\n                        //tx_.status === 'PENDING' ||                        \n                        tx_.status === 'ACCEPTED_ON_L2' ||\n                        tx_.status === 'ACCEPTED_ON_L1' \n                    )\n                        tx_.dismiss = true\n                    \n                    // we can delete the transaction here if on L1...\n\n                    r.push(tx_)\n                } else {\n                    r.push(tx)\n                }\n            })\n            return r\n        })\n        return t.tx_status\n    }\n    return null\n}\n\nfunction sortTokens(token1: string, token2: string): string[] {\n    return BigNumber(token1) < BigNumber(token2) ? [token1, token2] : [token2, token1]\n}\n\nexport const getPoolIdFromTokens = (token1: string, token2: string): number => {\n    // check that we know these tokens\n    let pools = getRecoil(poolsState)\n    let tokens = getRecoil(tokensState)\n    if (!tokens.get(token1) || !tokens.get(token2)) throw Error('Unknown tokens')\n\n    let [t1, t2] = sortTokens(token1, token2)\n    for (let id = 1; id <= pools.size; id++) {\n        let pool: Pool | undefined = pools.get(id)\n        if (!pool) throw Error('missing pool ' + id)\n        if (pool.token1 === t1 && pool.token2 === t2) return id\n    }\n    return 0\n}\n\nexport function float_to_decimal_int(token_address: string, amount: string): string {\n    let tokens = getRecoil(tokensState)\n    let token: Token | undefined = tokens.get(token_address)\n    if (token === undefined) {\n        // throw Error('undefined pool')\n        addToastMsg(\n            'float_to_decimal_int: Undefined pool for token ' +\n                token_address +\n                ', tokens size=' +\n                tokens.size +\n                ' amount=' +\n                amount,\n            'warning'\n        )\n        return '0'\n    }\n\n    return BigNumber(amount).shiftedBy(token.decimals).toFixed(0, BigNumber.ROUND_DOWN)\n}\n\nexport function decimal_int_to_float(token_address: string, amount: string): string {\n    let tokens = getRecoil(tokensState)\n    let token: Token | undefined = tokens.get(token_address)\n    if (token === undefined) {\n        //throw Error('undefined pool')\n        addToastMsg(\n            'decimal_int_to_float: Undefined pool for token ' +\n                token_address +\n                ', tokens size=' +\n                tokens.size +\n                ' amount=' +\n                amount,\n            'warning'\n        )\n        return '0'\n    }\n\n    return BigNumber(amount).shiftedBy(-token.decimals).toString(10)    // should have exactly 'decimals' floating point\n}\n\nexport const calcOtherTokenAmount = (\n    token_leading: string,\n    token_other: string,\n    token_leading_amount_float: string,\n    leading_token_number: number // either 1, or 2\n): string | undefined => {\n\n    let poolId = getPoolIdFromTokens(token_leading, token_other)\n    if (\n        poolId === 0 ||\n        token_leading_amount_float === undefined ||\n        token_leading_amount_float === null\n    )\n        return undefined\n\n    if (token_leading_amount_float === '')\n        return ''\n\n    let token_leading_amount = float_to_decimal_int(\n        token_leading,\n        token_leading_amount_float\n    )\n\n    let pools = getRecoil(poolsState)\n    let pool: Pool | undefined = pools.get(poolId)\n\n    if (pool === undefined) {\n        addToastMsg('Undefined pool id=' + poolId, 'warning')\n        return undefined\n    }\n\n    // check reserves\n    let token_leading_reserve = '0'\n    let token_other_reserve = '0'\n\n    if (pool.token1 === token_leading) {\n        token_leading_reserve = pool.token1Amount\n        token_other_reserve = pool.token2Amount\n    } else {\n        token_leading_reserve = pool.token2Amount\n        token_other_reserve = pool.token1Amount\n    }\n\n    if (BigNumber(token_leading_reserve).lte(0) || BigNumber(token_other_reserve).lte(0))\n        throw Error('token reserve cannot be 0')\n\n    if (leading_token_number === 1) {\n        let token_out_expected_amount =\n            BigNumber(token_other_reserve).times(BigNumber(token_leading_amount))\n            .div(\n                BigNumber(token_leading_reserve).plus(BigNumber(token_leading_amount))\n                )\n            .toFixed(0, BigNumber.ROUND_DOWN)\n\n        return decimal_int_to_float(token_other, token_out_expected_amount)\n    } else {\n        // leading token is 2, calc what should be the output in order to get\n        let token_in_calculated_amount =\n        BigNumber(token_other_reserve).times(BigNumber(token_leading_amount))\n        .div(\n            BigNumber(token_leading_reserve).minus(BigNumber(token_leading_amount))\n            )\n        .toFixed(0, BigNumber.ROUND_DOWN)\n\n        return decimal_int_to_float(token_other, token_in_calculated_amount)\n    }\n}\n\nexport const calcOtherTokenRequiredAmountForLiquidity = (\n    token_a: string,\n    token_b: string,\n    token_a_float: string\n): string | undefined => {\n    let poolId = getPoolIdFromTokens(token_a, token_b)\n    if (\n        poolId === 0 ||\n        token_a_float === undefined ||\n        token_a_float === null\n    )\n        return undefined\n\n    if (token_a_float === '') return ''\n\n    let token_a_amount = float_to_decimal_int(token_a, token_a_float)\n\n    let pools = getRecoil(poolsState)\n    let pool: Pool | undefined = pools.get(poolId)\n\n    if (pool === undefined) {\n        // throw Error('undefined pool')\n        addToastMsg('Undefined pool id=' + poolId, 'warning')\n        return undefined\n    }\n\n    let price = getPoolPriceForTokenA(poolId, token_a, token_b, token_a_amount)\n\n    console.log('Other Token Add Liquidity: ', price, token_a_amount)\n    //let token_b_amount = BigNumber(price).times(BigNumber(token_a_amount)).toFixed(0, BigNumber.ROUND_DOWN)\n    //return decimal_int_to_float(token_b, token_b_amount)\n\n\n    return decimal_int_to_float(token_b, price)\n}\n\nexport const add_liquidity = async (\n    token_a_address: string,\n    token_a_amount: string,\n    token_a_min_amount: string,\n    token_b_address: string,\n    token_b_amount: string,\n    token_b_min_amount: string\n) => {\n    console.log('AMM_add_liquidity: ', token_a_min_amount, numberToCallParam(token_a_min_amount))\n\n    const starknet = getStarknet()\n    let activeAccount: string = walletAddress()\n\n    if (starknet.isConnected === false || !activeAccount) {\n        // Need to convert to a toast\n        return null\n    }\n\n    if (!safeToSend()) return null\n\n    let tx = await starknet.signer.invokeFunction(\n        amm_contract, // to\n        addLiquiditySelector, // 'add_liquidity' selector\n        [\n            numberToCallParam(token_a_address),\n            numberToCallParam(token_a_amount),\n            numberToCallParam(0),\n            numberToCallParam(token_a_min_amount),\n            numberToCallParam(0),\n            numberToCallParam(token_b_address),\n            numberToCallParam(token_b_amount),\n            numberToCallParam(0),\n            numberToCallParam(token_b_min_amount),\n            numberToCallParam(0)\n        ]\n    )\n\n\n    return tx\n}\n\nexport const withdraw_liquidity = async (\n    pool_id: number,\n    shares: string,\n    token_a_min_amount: string,\n    token_b_min_amount: string\n) => {\n    console.log('withdraw_liquidity')\n\n    const starknet = getStarknet()\n    let activeAccount: string = walletAddress()\n\n    if (starknet.isConnected === false || !activeAccount) {\n        // Need to convert to a toast\n        return null\n    }\n\n    console.log(\n        'Calling Starknet: withdraw_liquidity with ',\n        pool_id,\n        shares,\n        token_a_min_amount,\n        token_b_min_amount\n    )\n\n    if (!safeToSend()) return null\n\n    let tx = await starknet.signer.invokeFunction(\n        amm_contract, // to\n        withdrawLiquiditySelector, // 'add_liquidity' selector\n        [\n            numberToCallParam(pool_id),\n            numberToCallParam(shares),\n            numberToCallParam(0),\n            numberToCallParam(token_a_min_amount),\n            numberToCallParam(0),\n            numberToCallParam(token_b_min_amount),\n            numberToCallParam(0)\n        ]\n    )\n\n    addPendingTx(tx.transaction_hash, 'withdraw_liquidity')\n\n    return tx\n}\n\nconst safeToSend = () : boolean => {\n    if (getRecoil(safeToSendTxSelector)) return true\n\n    addToastMsg('Previous Transaction still being processed by your wallet, try again later','error')\n    return false\n}","import { setRecoil } from 'recoil-nexus'\nimport { Pool, poolsState, Token, tokensState } from '../atoms'\nimport { composeUInt256 } from './amm'\n\n// Fixme: decide which server to go with\n//const SERVER_URL = \"http://localhost:7000\"\n//const SERVER_URL = \"https://mottyl.github.io/static_data/data/amm.json\"\nconst SERVER_URL = 'https://my-json-server.typicode.com/mottyl/static_data'\n\nexport const updatePoolsAndTokensStatic = async () => {\n    // Fetch AMM Info\n    const fetchAmmInfo = async () => {\n        const res = await fetch(`${SERVER_URL}/amminfo`)\n        const data = await res.json()\n        console.log('AMM info data:', data)\n    }\n\n    // Fetch Pools\n    const fetchPools = async () => {\n        const res = await fetch(`${SERVER_URL}/pools`)\n        const data = await res.json()\n        let new_pools = new Map<number, Pool>()\n        for (let i = 1; i <= data.numberOfPools; i++) {\n            let d = data[i]\n            let pool: Pool = {\n                id: i,\n                name: d.poolName,\n                token1: d.tokenAAddress,\n                token1Amount: composeUInt256(d.tokenAReserves[0], d.tokenAReserves[1]),\n                token2: d.tokenBAddress,\n                token2Amount: composeUInt256(d.tokenBReserves[0], d.tokenBReserves[1]),\n                fee: Number(d.feePercentage) / 1e5,\n                cfmm: Number(d.cfmm),\n                shares: composeUInt256(d.shares[0], d.shares[1]),\n                refresh: Date.now()\n            }\n            console.log('Pool = ', pool)\n            new_pools.set(i, pool)\n        }\n        // Save to Recoil\n        setRecoil(poolsState, new_pools)\n    }\n\n    // Fetch Tokens\n    const fetchTokens = async () => {\n        const res = await fetch(`${SERVER_URL}/tokens`)\n        const data = await res.json()\n\n        let new_tokens = new Map<string, Token>()\n        for (let i = 0; i < data.numberOfTokens; i++) {\n            let d = data[i]\n            let token: Token = {\n                address: d.tokenAddress,\n                id: i,\n                name: d.tokenName,\n                symbol: d.tokenSymbol,\n                icon: d.tokenIcon,\n                decimals: d.tokenDecimals\n            }\n            new_tokens.set(d.tokenAddress, token)\n            console.log('Token = ', token)\n        }\n        setRecoil(tokensState, new_tokens)\n    }\n\n    fetchAmmInfo()\n    fetchPools()\n    fetchTokens()\n}\n","import React, { useState, useEffect } from 'react'\nimport LoadingButton from '@mui/lab/LoadingButton'\nimport PendingActionsIcon from '@mui/icons-material/PendingActions'\nimport {\n    approve,\n    isTokenApproved,\n    tokenAllowanceForAMM,\n    float_to_decimal_int,\n    addToastMsg,\n    checkAndUpdateComponentTransactions\n} from '../services/amm'\nimport { tokensState, walletAddressState, transactionsStatusSelector } from '../atoms'\nimport { useRecoilState } from 'recoil'\n\nconst DEFAULT_APPROVE_AMOUNT = BigInt(2 ** 127 - 1).toString()\n\nfunction Approve(props) {\n    const [tokens] = useRecoilState(tokensState)\n    const [connectedAddress] = useRecoilState(walletAddressState)\n    const [tokenApproveInProgress, setTokenApproveInProgress] = useState(false)\n    const [transactionsStatus] = useRecoilState(transactionsStatusSelector('approve'))\n    const [componentTxs, setComponentTxs] = useState({})\n\n    useEffect(() => {\n        checkAndUpdateComponentTransactions(\n            transactionsStatus,\n            componentTxs,\n            setTokenApproveInProgress\n        )\n    }, [transactionsStatus, componentTxs])\n\n    let token = props.token\n    let tokenAmount = props.tokenAmount\n    let activePoolId = props.activePoolId\n    let tokenInRange = props.tokenInRange\n\n    const handleApproveToken = async () => {\n        setTokenApproveInProgress(true)\n        let approveAmount = DEFAULT_APPROVE_AMOUNT\n            ? DEFAULT_APPROVE_AMOUNT\n            : float_to_decimal_int(token, tokenAmount)\n        try {\n            let tx = await approve(token, approveAmount)\n\n            if (!tx) throw Error('Cannot perform transaction')\n\n            setComponentTxs((prevState) => ({\n                ...prevState,\n                [tx.transaction_hash]: 'new'\n            }))\n        } catch (e) {\n            addToastMsg('Approve user abort', 'error')\n            setTokenApproveInProgress(false)\n        }\n    }\n\n    if (\n        connectedAddress &&\n        token &&\n        tokenAmount > 0 &&\n        activePoolId > 0 &&\n        tokenInRange &&\n        !isTokenApproved(token, tokenAmount)\n    ) {\n        let token_obj = tokens.get(token)\n        if (token_obj) {\n            return (\n                <LoadingButton\n                    color='inherit'\n                    variant='outlined'\n                    fullWidth={true}\n                    loading={\n                        tokenApproveInProgress ||\n                        tokenAllowanceForAMM(token) === null ||\n                        tokenAllowanceForAMM(token) === undefined\n                            ? true\n                            : false\n                    }\n                    loadingPosition='start'\n                    startIcon={<PendingActionsIcon />}\n                    onClick={handleApproveToken}>\n                    {tokenAllowanceForAMM(token) === null ||\n                    tokenAllowanceForAMM(token) === undefined\n                        ? 'CHECKING ' + token_obj.symbol + ' ALLOWANCE'\n                        : 'APPROVE ' + token_obj.symbol}\n                </LoadingButton>\n            )\n        }\n    }\n\n    return <div></div>\n}\n\nexport default Approve\n","import React from 'react'\n\nimport { Grid, Button, Typography } from '@mui/material'\n\nimport { numFormat } from '../services/amm'\n\nfunction Balance(props) {\n    let token = props.token\n    let showMaxButton = props.showMaxButton\n    let setMaxAmountHandler = props.setMaxAmountHandler\n    let walletAmount = props.amount\n\n    if (walletAmount === undefined || walletAmount === '') return <div></div>\n\n    return (\n        <div>\n            <Grid container>\n                <Typography fontSize={13} sx={{ ml: 2, mt: 0.5 }}>\n                    {/* {displayBalance()} */}\n                    {'Balance: ' + numFormat(walletAmount)}\n                </Typography>\n                {showMaxButton && (\n                    <Button\n                        size='small'\n                        sx={{ ml: -1.5, mt: -0.2 }}\n                        onClick={() => setMaxAmountHandler(token, walletAmount)}>\n                        max\n                    </Button>\n                )}\n            </Grid>\n        </div>\n    )\n}\n\nexport default Balance\n","import { getStarknet } from '@argent/get-starknet'\n\nimport { erc20TokenAddressByNetwork } from './token.service'\n\nexport const isWalletConnected = (): boolean => !!getStarknet()?.isConnected\n\nexport const connectWallet = async () => await getStarknet({ showModal: true }).enable()\n\nexport const walletAddress = async (): Promise<string | undefined> => {\n    try {\n        const [address] = await getStarknet().enable()\n        return address\n    } catch {}\n}\n\nexport const networkId = (): keyof typeof erc20TokenAddressByNetwork => {\n    try {\n        const baseUrl = getStarknet().provider.baseUrl\n        if (baseUrl.includes('alpha-mainnet.starknet.io')) {\n            return 'mainnet-alpha'\n        } else {\n            return 'goerli-alpha'\n        }\n    } catch {\n        return 'goerli-alpha'\n    }\n}\n\nexport const getExplorerUrlBase = (): string => {\n    if (networkId() === 'mainnet-alpha') {\n        return 'https://voyager.online'\n    } else {\n        return 'https://goerli.voyager.online'\n    }\n}\n\nexport const networkUrl = (): string | undefined => {\n    try {\n        return getStarknet().provider.baseUrl\n    } catch {}\n}\n\nexport const waitForTransaction = async (hash: string) =>\n    await getStarknet().provider.waitForTx(hash)\n\nexport const addWalletChangeListener = async (\n    handleEvent: (accounts: string[]) => void\n) => {\n    getStarknet().on('accountsChanged', handleEvent)\n}\n","import ReactGA from 'react-ga'\n\nexport const GAinit = () => {\n    // Google Analytics Set Up\n    const gaTrackingId = 'UA-215866683-1'\n    ReactGA.initialize(gaTrackingId)\n}\n\nexport const GApage = (page) => {\n    ReactGA.pageview(page)\n}\n\nexport const GAtrack = (cat, action, label) => {\n    ReactGA.event({\n        category: cat,\n        action: action,\n        label: label\n    })\n}\n\nexport const GAbutton = (label) => {\n    GAtrack('button', 'click', label)\n}\n","import React, { useState, useEffect } from 'react'\n\nimport { walletAddressState, poolsState } from '../atoms'\n\nimport {\n    updateAllTokensDynamicData,\n    human_readable_hash,\n    addToastMsg\n} from '../services/amm'\nimport {\n    addWalletChangeListener,\n    connectWallet,\n    getExplorerUrlBase,\n    networkId,\n    walletAddress\n} from '../services/wallet.service'\n\nimport { GAbutton } from '../services/ga.js'\n\nimport { Button } from '@mui/material'\nimport CircleIcon from '@mui/icons-material/Circle'\nimport AccountBalanceWalletIcon from '@mui/icons-material/AccountBalanceWallet'\n\nimport { useRecoilState } from 'recoil'\n\nfunction ConnectWallet(props) {\n    const [walletConnectionStatus, setWalletConnectionStatus] = useState(0)\n    const [voyagerBaseUrl, setVoyagerBaseUrl] = useState('')\n    const [networkName, setNetworkName] = useState('')\n    const [changeListenerRegistered, setChangeListenerRegistered] = useState(false)\n    const [address, setAddress] = useRecoilState(walletAddressState)\n    const [pools] = useRecoilState(poolsState)\n\n    const handleClick = async () => {\n        GAbutton('connect_wallet')\n\n        setWalletConnectionStatus(1)\n        try {\n            await connectWallet()\n        } catch {\n            // this means no argent wallet is available\n            addToastMsg('Wallet not found', 'error')\n            setWalletConnectionStatus(0)\n            return\n        }\n        setAddress(await walletAddress())\n        setWalletConnectionStatus(2)\n\n        addToastMsg('Wallet connected', 'success')\n    }\n\n    useEffect(() => {\n        if (props.secondary) return\n\n        const handleWalletChange = async (accounts) => {\n            if (props.secondary) return\n            console.log('handleWalletChange: ', accounts)\n            setAddress(await walletAddress())\n            setVoyagerBaseUrl(getExplorerUrlBase())\n            setNetworkName(networkId())\n\n            updateAllTokensDynamicData()\n            addToastMsg('Wallet network/account change', 'success')\n        }\n\n        console.log('address has changed, ', address)\n        if (address) {\n            setWalletConnectionStatus(2)\n            updateAllTokensDynamicData()\n            setVoyagerBaseUrl(getExplorerUrlBase())\n            setNetworkName(networkId())\n            if (!props.secondary && !changeListenerRegistered) {\n                addWalletChangeListener(handleWalletChange)\n                setChangeListenerRegistered(true) // do this only once, otherwise for every change a new listener will be registered\n            }\n        }\n    }, [address, props.secondary, changeListenerRegistered, setAddress])\n\n    useEffect(() => {\n        if (props.secondary) return\n        // Yaron: why do we need this? it doesn't do anything...\n        // console.log('pools have changed', pools)\n    }, [pools, props.secondary])\n\n    // Handle wallet connect button inside the screen (aka secondary)\n    if (props.secondary) {\n        // If already connected no need to display button\n        if (address !== '' || walletConnectionStatus === 2) {\n            return <div></div>\n        }\n\n        // Secondary connect button - short-circuit all hooks\n        if (walletConnectionStatus === 1) {\n            return (\n                <div>\n                    <Button color='inherit' fullWidth={true} variant='outlined' disabled>\n                        Connecting...\n                    </Button>\n                </div>\n            )\n        }\n\n        // Display button\n        return (\n            <div>\n                <Button\n                    className='connect-wallet'\n                    color='inherit'\n                    fullWidth={true}\n                    variant='contained'\n                    onClick={handleClick}>\n                    <AccountBalanceWalletIcon fontSize='medium' sx={{ mr: 1 }} />\n                    CONNECT WALLET\n                </Button>\n            </div>\n        )\n    }\n\n    const handleConnectedClick = async () => {\n        console.log('opening wallet')\n        window.open(voyagerBaseUrl + '/contract/' + address, '_blank')\n    }\n\n    if (walletConnectionStatus === 2) {\n        console.log('Wallet is connected!', address)\n        return (\n            <div>\n                <Button color='inherit' variant='outlined' onClick={handleConnectedClick}>\n                    <CircleIcon\n                        sx={{ mr: 1 }}\n                        style={{ fill: 'lightgreen', fontSize: 10 }}\n                    />{' '}\n                    {networkName} {human_readable_hash(address)}{' '}\n                </Button>\n            </div>\n        )\n    } else if (walletConnectionStatus === 1) {\n        console.log('Wallet is being connected!', address)\n        return (\n            <div>\n                <Button color='inherit' variant='outlined' disabled>\n                    Connecting...\n                </Button>\n            </div>\n        )\n    } else {\n        return (\n            <div>\n                <Button color='inherit' variant='outlined' onClick={handleClick}>\n                    Connect Wallet\n                </Button>\n            </div>\n        )\n    }\n}\n\nexport default ConnectWallet\n","import React, { useState, useEffect } from 'react'\nimport { useRecoilState } from 'recoil'\nimport { getRecoil } from 'recoil-nexus'\nimport { BigNumber } from 'bignumber.js'\n\nimport {\n    FormControl,\n    InputLabel,\n    Select,\n    MenuItem,\n    TextField,\n    Grid,\n    Box,\n    Card,\n    CardActionArea,\n    Typography,\n    Button,\n    IconButton\n} from '@mui/material'\nimport LoadingButton from '@mui/lab/LoadingButton'\nimport SwapHorizIcon from '@mui/icons-material/SwapHoriz'\nimport SwapVertSharpIcon from '@mui/icons-material/SwapVertSharp'\nimport AccountBalanceWalletIcon from '@mui/icons-material/AccountBalanceWallet'\n\nimport {\n    tokensState,\n    swapSlippage,\n    walletAddressState,\n    transactionsStatusSelector,\n    tokensUserDataState,\n    poolsState\n} from '../atoms'\n\nimport {\n    getWalletTokenAmount,\n    updateTokenDynamicData,\n    updatePoolDynamicData,\n    swap,\n    numFormat,\n    addToastMsg,\n    isTokenApproved,\n    getPoolPriceForTokenA,\n    getPoolIdFromTokens,\n    calcOtherTokenAmount,\n    float_to_decimal_int,\n    isSufficientBalanceInWallet,\n    isInsufficientBalanceInPool,\n    checkAndUpdateComponentTransactions,\n    WALLET_SUFFICIENT_BALANCE\n} from '../services/amm'\n\nimport { useInterval } from 'usehooks-ts'\n\nimport Approve from './Approve.js'\nimport Balance from './Balance.js'\nimport BoxHeader from './BoxHeader.js'\nimport ConnectWallet from './ConnectWallet.js'\n\nimport { GApage, GAbutton } from '../services/ga.js'\n\nexport const DEFAULT_APPROVE_AMOUNT = Number.MAX_SAFE_INTEGER // Need to change it to: (2**127 - 1) -- given that 'toBN' supports...\n\nfunction Swap() {\n    const [activePoolId, setActivePoolId] = useState(0)\n    const [token1, setToken1] = useState('')\n    const [token1Amount, setToken1Amount] = useState('')\n    const [token2, setToken2] = useState('')\n    const [token2Amount, setToken2Amount] = useState('')\n    const [leadingToken, setLeadingToken] = useState(0) // 0 is no token, 1/2 is the last updated token\n    const [swapInProgress, setSwapInProgress] = useState(false)\n    const [tokens] = useRecoilState(tokensState)\n    const [tuds] = useRecoilState(tokensUserDataState)\n    const [pools] = useRecoilState(poolsState)\n\n    const [connectedAddress] = useRecoilState(walletAddressState)\n    const [transactionsStatus] = useRecoilState(transactionsStatusSelector('swap'))\n    const [componentTxs, setComponentTxs] = useState({})\n\n    useEffect(() => {\n        GApage('swap')\n    }, [])\n\n    useEffect(() => {\n        checkAndUpdateComponentTransactions(\n            transactionsStatus,\n            componentTxs,\n            setSwapInProgress\n        )\n    }, [transactionsStatus, componentTxs])\n\n    useEffect(() => {}, [tuds, pools])\n\n    const updateTokensIntervalCallback = async () => {\n        // Allow periodic update only if both tokens are selected\n        if (activePoolId > 0) {\n            updatePoolDynamicData(activePoolId)\n        } else {\n            if (token1) updateTokenDynamicData(token1)\n            if (token2) updateTokenDynamicData(token2)\n        }\n    }\n\n    // Timer to update active pool and tokens user data (allowance, amount)\n    useInterval(updateTokensIntervalCallback, 15000)\n\n    const handleToken1Select = (event) => {\n        let token_address = event.target.value\n        setToken1(token_address)\n        updateTokenDynamicData(token_address)\n\n        GAbutton('swap-token1')\n    }\n\n    const handleToken2Select = (event) => {\n        let token_address = event.target.value\n        setToken2(token_address)\n        updateTokenDynamicData(token_address)\n\n        GAbutton('swap-token2')\n    }\n\n    const handleTokenAmountChange = (token, amount) => {\n        // fixme: consider limit decimals input according to token decimals\n        const regex = /^(([0-9]+[.]?[0-9]*)|([.][0-9]+))$/\n\n        if (token === token1 && (amount === '' || regex.test(amount))) {\n            setToken1Amount(amount)\n            setLeadingToken(1)\n        }\n        if (token === token2 && (amount === '' || regex.test(amount))) {\n            setToken2Amount(amount)\n            setLeadingToken(2)\n        }\n    }\n\n    useEffect(() => {\n        if (token1 && token2) {\n            let poolId = getPoolIdFromTokens(token1, token2)\n            setActivePoolId(poolId)\n\n            // follow the leader\n            if (leadingToken <= 1) {\n                // cannot be 0, but just for safety\n                if (poolId > 0) {\n                    // calc token2 amount\n                    let amount = calcOtherTokenAmount(token1, token2, token1Amount, 1)\n                    console.log('calcOtherTokenAmount: (token1 leading) ', amount)\n                    if (amount !== undefined && amount !== token2Amount) {\n                        setToken2Amount(amount)\n                    }\n                } else {\n                    setToken2Amount(0)\n                }\n            } else {\n                if (poolId > 0) {\n                    // calc token2 amount\n                    let amount = calcOtherTokenAmount(token2, token1, token2Amount, 2)\n                    console.log('calcOtherTokenAmount: (token2 leading) ', amount)\n                    if (amount !== undefined && amount < 0) amount = 0\n                    else if (amount !== undefined && amount !== token1Amount) {\n                        setToken1Amount(amount)\n                    }\n                } else {\n                    setToken1Amount(0)\n                }\n            }\n        } else {\n            // follow the leader\n            if (leadingToken <= 1) {\n                // cannot be 0, but just for safety\n                setToken2Amount('')\n            } else {\n                setToken1Amount('')\n            }\n        }\n    }, [token1, token2, token1Amount, token2Amount, leadingToken])\n\n    const menuItems = (otherSelectedToken) => {\n        let r = []\n        tokens.forEach((value, address) => {\n            if (otherSelectedToken !== address) {\n                r.push(\n                    <MenuItem key={address} value={address}>\n                        <Grid container direction='row'>\n                            <Grid sx={{ mr: 1, mb: -1 }}>\n                                <img src={value.icon} alt='' width='24' height='24' />\n                            </Grid>\n                            <Grid>\n                                <Typography>{value.symbol || value.address}</Typography>\n                            </Grid>\n                        </Grid>\n                    </MenuItem>\n                )\n            }\n        })\n        return r\n    }\n\n    const calcToken2MinAmount = () => {\n        let slippage = parseFloat(getRecoil(swapSlippage)) / 100\n        return BigNumber(token2Amount).times(BigNumber(1).minus(BigNumber(slippage)))\n    }\n\n    const handleSwap = async () => {\n        setSwapInProgress(true)\n        let minAmountOut = calcToken2MinAmount()\n        try {\n            let tx = await swap(\n                activePoolId,\n                token1,\n                float_to_decimal_int(token1, token1Amount),\n                float_to_decimal_int(token2, minAmountOut)\n            )\n\n            if (!tx) throw Error('Cannot perform transaction')\n\n            setComponentTxs((prevState) => ({\n                ...prevState,\n                [tx.transaction_hash]: 'new'\n            }))\n        } catch (e) {\n            addToastMsg('Swap Request: User Aborted', 'error')\n            setSwapInProgress(false)\n        }\n    }\n\n    const swapButton = () => {\n        GAbutton('swap')\n\n        let token1SufficientBalance = isSufficientBalanceInWallet(token1, token1Amount)\n        let token2InsufficientPoolBalance = isInsufficientBalanceInPool(\n            activePoolId,\n            token2,\n            token2Amount\n        )\n\n        if (\n            token2 &&\n            token1Amount > 0 &&\n            activePoolId !== 0 &&\n            token1SufficientBalance === WALLET_SUFFICIENT_BALANCE.TRUE &&\n            !token2InsufficientPoolBalance\n        ) {\n            // Display SWAP button\n            return (\n                <LoadingButton\n                    color='primary'\n                    variant='contained'\n                    fullWidth={true}\n                    disabled={\n                        (connectedAddress && isTokenApproved(token1, token1Amount)) ||\n                        swapInProgress\n                            ? false\n                            : true\n                    }\n                    loading={swapInProgress}\n                    loadingPosition='start'\n                    startIcon={<SwapHorizIcon />}\n                    onClick={handleSwap}>\n                    {swapInProgress ? 'SWAPPING' : 'SWAP'}\n                </LoadingButton>\n            )\n        }\n\n        if (\n            connectedAddress &&\n            token1Amount > 0 &&\n            token1SufficientBalance !== WALLET_SUFFICIENT_BALANCE.TRUE &&\n            !token2InsufficientPoolBalance\n        ) {\n            // Amount either exceeds wallet balance, or wallet balance is unknown yet\n            return (\n                <LoadingButton\n                    color='primary'\n                    variant='contained'\n                    fullWidth={true}\n                    disabled={true}\n                    loading={\n                        token1SufficientBalance === WALLET_SUFFICIENT_BALANCE.UNKNOWN\n                    }\n                    loadingPosition='start'\n                    startIcon={<AccountBalanceWalletIcon />}>\n                    {token1SufficientBalance === WALLET_SUFFICIENT_BALANCE.FALSE\n                        ? 'AMOUNT EXCEEDS WALLET BALANCE'\n                        : 'CHECKING WALLET BALANCE'}\n                </LoadingButton>\n            )\n        }\n\n        if (token1 && token2 && activePoolId === 0) {\n            // No pool for token pair selected\n            return (\n                <Button\n                    color='primary'\n                    variant='contained'\n                    fullWidth={true}\n                    disabled={true}>\n                    NOT A VALID Pool\n                </Button>\n            )\n        }\n\n        if (\n            token1 &&\n            token2 &&\n            activePoolId &&\n            token2Amount &&\n            token2InsufficientPoolBalance\n        ) {\n            return (\n                <Button\n                    color='primary'\n                    variant='contained'\n                    fullWidth={true}\n                    disabled={true}>\n                    INSUFFICIENT LIQUIDITY IN POOL\n                </Button>\n            )\n        }\n\n        if (connectedAddress) {\n            // Wallet is connected\n            let instruction = ''\n            if (!token1 && !token2) instruction = 'SELECT TOKENS'\n            if ((!token1 && token2) || (token1 && !token2)) instruction = 'SELECT TOKEN'\n            if (token1 && token2 && (!token1Amount || !token2Amount))\n                instruction = 'ENTER AMOUNT'\n\n            if (instruction !== '')\n                return (\n                    <Button\n                        color='secondary'\n                        variant='contained'\n                        fullWidth={true}\n                        disabled={true}>\n                        {instruction}\n                    </Button>\n                )\n        }\n\n        return <div></div>\n    }\n\n    const switchTokensAndAmounts = () => {\n        GAbutton('swap-switchtokens')\n\n        let tmpToken = token1\n        let tmpAmount = token1Amount\n        setToken1(token2)\n        setToken2(tmpToken)\n        setToken1Amount(token2Amount)\n        setToken2Amount(tmpAmount)\n        setLeadingToken(leadingToken === 1 ? 2 : 1)\n    }\n\n    const isToken1InputDisabled = () => {\n        return token1 === '' ? true : false\n    }\n    const isToken2InputDisabled = () => {\n        return token2 === '' ? true : false\n    }\n\n    const [priceDirection, setPriceDirection] = useState(0)\n    const [slippage] = useRecoilState(swapSlippage)\n\n    const priceAndSlippage = () => {\n        if (\n            token1 &&\n            token2 &&\n            token1Amount &&\n            !BigNumber(token1Amount).isZero() &&\n            token2Amount &&\n            !BigNumber(token2Amount).isZero()\n        ) {\n            // currentPrice = How much token2 for 1 token1\n            let currentPrice = getPoolPriceForTokenA(activePoolId, token1, token2)\n            console.log('CurrentPrice: ', currentPrice)\n            let minAmount = calcToken2MinAmount()\n            let token1Symbol = tokens.get(token1).symbol\n            let token2Symbol = tokens.get(token2).symbol\n            let floatSlippage = parseFloat(slippage)\n            // transactionPrice = How much token2 for 1 token1\n            let transactionPrice = BigNumber(token2Amount).div(BigNumber(token1Amount))\n            let transactionPriceInv = BigNumber(token1Amount).div(BigNumber(token2Amount))\n\n            let priceImpact = BigNumber(1).minus(\n                BigNumber(transactionPrice).div(BigNumber(currentPrice))\n            )\n\n            let backgroundColor = priceImpact.gt(0.05)\n                ? 'tomato'\n                : priceImpact.gt(0.03)\n                ? 'orange'\n                : 'inherit'\n\n            let displayPrice1 = (\n                <>\n                    1 {token1Symbol} = {numFormat(transactionPrice)} {token2Symbol}\n                </>\n            )\n            let displayPrice2 = (\n                <>\n                    1 {token2Symbol} = {numFormat(transactionPriceInv)} {token1Symbol}\n                </>\n            )\n            //console.log('Price: ', displayPrice1, displayPrice2, priceDirection, transactionPrice.toString(10))\n\n            return (\n                <Grid>\n                    <Card sx={{ mb: 0.5, mt: 2 }}>\n                        <CardActionArea\n                            onClick={() => setPriceDirection(!priceDirection)}>\n                            <Typography\n                                fontSize={13}\n                                fontWeight='medium'\n                                sx={{ ml: 1, mr: 1 }}>\n                                {priceDirection ? displayPrice2 : displayPrice1}\n                            </Typography>\n                        </CardActionArea>\n                    </Card>\n                    <Card style={{ backgroundColor: backgroundColor }} sx={{ mb: 2 }}>\n                        <Typography\n                            fontSize={13}\n                            fontWeight='medium'\n                            sx={{ ml: 1, mr: 1 }}>\n                            Minimum amount received (slippage={floatSlippage.toFixed(2)}\n                            %): {numFormat(minAmount)}\n                        </Typography>\n                        <Typography\n                            fontSize={13}\n                            fontWeight='medium'\n                            sx={{ ml: 1, mr: 1 }}>\n                            Price impact: {numFormat(priceImpact, true)}%\n                        </Typography>\n                    </Card>\n                </Grid>\n            )\n        }\n        return <div></div>\n    }\n\n    return (\n        <Box sx={{ p: 2, border: '0px solid', mt: 1, mb: 4, boxShadow: 2 }}>\n            <div>\n                <Grid container sx={{ mb: 2 }}>\n                    <BoxHeader name='Swap' />\n                </Grid>\n\n                <Card sx={{ p: 2, boxShadow: 2, mb: -4 }}>\n                    <Grid container spacing={2} sx={{}}>\n                        <Grid item xs={6}>\n                            <FormControl fullWidth>\n                                <InputLabel id='token1-label'>Token 1:</InputLabel>\n                                <Select\n                                    labelId='token1-label'\n                                    id='token1-select'\n                                    value={token1}\n                                    label='Token 1'\n                                    onChange={handleToken1Select}>\n                                    {menuItems(token2)}\n                                </Select>\n                            </FormControl>\n                            <Balance\n                                token={token1}\n                                amount={getWalletTokenAmount(token1)}\n                                showMaxButton={true}\n                                setMaxAmountHandler={handleTokenAmountChange}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <FormControl fullWidth>\n                                <TextField\n                                    helperText='Amount to swap'\n                                    id='token1-amount'\n                                    inputProps={{\n                                        variant: 'outlined',\n                                        placeholder: '0.00',\n                                        type: 'string',\n                                        autoComplete: 'off',\n                                        'aria-labelledby': 'input-amount'\n                                    }}\n                                    value={token1Amount ? token1Amount : ''}\n                                    onChange={(e) =>\n                                        handleTokenAmountChange(token1, e.target.value)\n                                    }\n                                    error={\n                                        isSufficientBalanceInWallet(\n                                            token1,\n                                            token1Amount\n                                        ) === WALLET_SUFFICIENT_BALANCE.FALSE\n                                            ? true\n                                            : false\n                                    }\n                                    disabled={isToken1InputDisabled()}\n                                />\n                            </FormControl>\n                        </Grid>\n                    </Grid>\n                </Card>\n                <Grid\n                    container\n                    direction='row'\n                    justifyContent='center'\n                    alignItems='center'>\n                    <IconButton\n                        size='large'\n                        disabled={!token1 && !token2}\n                        onClick={switchTokensAndAmounts}>\n                        <SwapVertSharpIcon style={{ fontSize: 40 }} />\n                    </IconButton>\n                </Grid>\n\n                <Card sx={{ p: 2, mt: -3, boxShadow: 2 }}>\n                    <Grid container spacing={2}>\n                        <Grid item xs={6}>\n                            <FormControl fullWidth>\n                                <InputLabel id='token2-label'>Token 2:</InputLabel>\n                                <Select\n                                    labelId='token2-label'\n                                    id='token2-select'\n                                    value={token2}\n                                    label='Token 2'\n                                    onChange={handleToken2Select}>\n                                    {menuItems(token1)}\n                                </Select>\n                            </FormControl>\n                            <Balance\n                                token={token2}\n                                amount={getWalletTokenAmount(token2)}\n                                showMaxButton={false}\n                            />\n                        </Grid>\n                        <Grid item xs={6}>\n                            <FormControl fullWidth>\n                                <TextField\n                                    helperText='Estimated amount received'\n                                    id='token2-amount'\n                                    inputProps={{\n                                        variant: 'outlined',\n                                        placeholder: '0.00',\n                                        type: 'string',\n                                        autoComplete: 'off',\n                                        'aria-labelledby': 'input-amount'\n                                    }}\n                                    value={token2Amount ? token2Amount : ''}\n                                    onChange={(e) =>\n                                        handleTokenAmountChange(token2, e.target.value)\n                                    }\n                                    disabled={isToken2InputDisabled()}\n                                />\n                            </FormControl>\n                        </Grid>\n                    </Grid>\n                </Card>\n\n                {priceAndSlippage()}\n\n                <Card sx={{ minWidth: 275, mb: 2, mt: 3, boxShadow: 2 }}>\n                    <ConnectWallet secondary='true' />\n                    <Approve\n                        token={token1}\n                        tokenAmount={token1Amount}\n                        activePoolId={activePoolId}\n                        tokenInRange={\n                            isSufficientBalanceInWallet(token1, token1Amount) ===\n                            WALLET_SUFFICIENT_BALANCE.TRUE\n                        }\n                    />\n                    {swapButton()}\n                </Card>\n            </div>\n        </Box>\n    )\n}\n\nexport default Swap\n","import React, { useState, useEffect } from 'react'\nimport { getRecoil } from 'recoil-nexus'\nimport { useRecoilState } from 'recoil'\nimport { BigNumber } from 'bignumber.js'\nimport BoxHeader from './BoxHeader.js'\nimport {\n    addToastMsg,\n    withdraw_liquidity,\n    numFormat,\n    float_to_decimal_int,\n    checkAndUpdateComponentTransactions\n} from '../services/amm'\nimport { withdrawLiquiditySlippage, transactionsStatusSelector } from '../atoms'\n\nimport {\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogContentText,\n    Card,\n    Box,\n    Grid,\n    CardHeader,\n    Button,\n    Typography,\n    Slider,\n    Stack,\n    Paper\n} from '@mui/material'\nimport MuiInput from '@mui/material/Input'\nimport LoadingButton from '@mui/lab/LoadingButton'\nimport ExitToAppRoundedIcon from '@mui/icons-material/ExitToAppRounded'\nimport { styled } from '@mui/material/styles'\n\nconst Item = styled(Paper)(({ theme }) => ({\n    ...theme.typography.body2,\n    padding: theme.spacing(0),\n    textAlign: 'left',\n    color: theme.palette.text.secondary\n}))\n\nconst Input = styled(MuiInput)`\n    width: 42px;\n`\n\nexport default function RemoveLiquidity(props) {\n    const [open, setOpen] = useState(false)\n    const [percent, setPercent] = useState(25)\n    const [token1Amount, setToken1Amount] = useState('') // fixme: what happens if token1amount / pool share changes during op\n    const [token2Amount, setToken2Amount] = useState('')\n    const [removeLiquidityInProgress, setRemoveLiquidityInProgress] = useState(0)\n    const [transactionsStatus] = useRecoilState(\n        transactionsStatusSelector('withdraw_liquidity')\n    )\n    const [componentTxs, setComponentTxs] = useState({})\n\n    useEffect(() => {\n        checkAndUpdateComponentTransactions(\n            transactionsStatus,\n            componentTxs,\n            setRemoveLiquidityInProgress\n        )\n    }, [transactionsStatus, componentTxs])\n\n    const marks = [\n        { value: 0, label: '0%' },\n        { value: 25, label: '25%' },\n        { value: 50, label: '50%' },\n        { value: 75, label: '75%' },\n        { value: 100, label: '100%' }\n    ]\n\n    useEffect(() => {\n        // if one of the tokens is '0' then set the other one to zero as well\n        if (BigNumber(token1Amount).isZero()) setToken2Amount('0')\n        if (BigNumber(token2Amount).isZero()) setToken1Amount('0')\n\n        // fixme: not sure why can't I call setAmounts\n        setToken1Amount(\n            numFormat(BigNumber(props.token1Amount).times(percent).shiftedBy(-2))\n        )\n        setToken2Amount(\n            numFormat(BigNumber(props.token2Amount).times(percent).shiftedBy(-2))\n        )\n\n        setRemoveLiquidityInProgress(0) // fixme: we don't know it is safe to send another transaction...\n    }, [\n        open,\n        token1Amount,\n        token2Amount,\n        percent,\n        props.token1Amount,\n        props.token2Amount\n    ])\n\n    const handleClose = () => {\n        setRemoveLiquidityInProgress(0) // fixme: we don't know it is safe to send anouther transaction on re-open\n        setOpen(false)\n    }\n\n    const handleClickOpen = () => {\n        setOpen(true)\n    }\n\n    const setAmounts = (percent) => {\n        setToken1Amount(\n            numFormat(BigNumber(props.token1Amount).times(percent).shiftedBy(-2))\n        )\n        setToken2Amount(\n            numFormat(BigNumber(props.token2Amount).times(percent).shiftedBy(-2))\n        )\n    }\n\n    const updateState = (newPercent) => {\n        setPercent(newPercent)\n        setAmounts(newPercent)\n        console.log(\n            'Remove Liquidity, updateState: ',\n            token1Amount,\n            token2Amount,\n            props.token1Amount,\n            props.token2Amount\n        )\n    }\n\n    const handleSliderChange = (event, newPercent) => {\n        updateState(newPercent)\n    }\n\n    const handleInputChange = (event) => {\n        let newPercent = event.target.value === '' ? '' : Number(event.target.value)\n        updateState(newPercent)\n        console.log('handle input change')\n    }\n\n    const handleBlur = () => {\n        if (percent < 0) {\n            setPercent(0)\n        } else if (percent > 100) {\n            setPercent(100)\n        }\n    }\n\n    const handleWithdraw = async () => {\n        console.log('Withdraw percent: ', percent)\n        let slippage = parseFloat(getRecoil(withdrawLiquiditySlippage)) / 100\n        let sharesToWithdraw = BigNumber(props.balance)\n            .times(BigNumber(percent))\n            .shiftedBy(-2)\n            .toFixed(2, BigNumber.ROUND_DOWN)\n        let minToken1Amount = BigNumber(token1Amount)\n            .times(BigNumber(1).minus(BigNumber(slippage).shiftedBy(-2)))\n            .toString(10, BigNumber.ROUND_DOWN)\n        let minToken2Amount = BigNumber(token2Amount)\n            .times(BigNumber(1).minus(BigNumber(slippage).shiftedBy(-2)))\n            .toString(10, BigNumber.ROUND_DOWN)\n\n        setRemoveLiquidityInProgress(1)\n\n        console.log(\n            'handleWithdraw: ',\n            sharesToWithdraw,\n            minToken1Amount,\n            minToken2Amount\n        )\n        try {\n            let tx = await withdraw_liquidity(\n                props.poolId,\n                sharesToWithdraw,\n                float_to_decimal_int(props.token1, minToken1Amount),\n                float_to_decimal_int(props.token2, minToken2Amount)\n            )\n\n            if (!tx) throw Error('Cannot perform transaction')\n\n            setComponentTxs((prevState) => ({\n                ...prevState,\n                [tx.transaction_hash]: 'new'\n            }))\n        } catch (e) {\n            addToastMsg('Remove Liquidity: User Aborted', 'error')\n            setRemoveLiquidityInProgress(0)\n        }\n        handleClose()\n    }\n\n    return (\n        <div>\n            <Button\n                variant='contained'\n                sx={{ textWeight: 'bold' }}\n                onClick={handleClickOpen}>\n                WITHDRAW\n            </Button>\n            <Dialog open={open} onClose={handleClose}>\n                <Box sx={{ p: 2, border: '0px solid', boxShadow: 2 }}>\n                    <Grid container sx={{ mb: 2 }}>\n                        <BoxHeader name='Remove Liquidity' />\n                    </Grid>\n                    <DialogContent>\n                        <Card sx={{ p: 2, border: '0px solid', boxShadow: 2, mb: 2 }}>\n                            <DialogContentText>\n                                Choose amount of liquidity shares to remove\n                            </DialogContentText>\n\n                            <Box sx={{ width: 500, mt: 3, ml: 2 }}>\n                                <Grid container spacing={2} alignItems='center'>\n                                    <Grid item xs sx={{ mt: 2, ml: 2, mr: 2 }}>\n                                        <Slider\n                                            aria-label='Custom marks'\n                                            defaultValue={25}\n                                            valueLabelDisplay='auto'\n                                            marks={marks}\n                                            value={\n                                                typeof percent === 'number' ? percent : 0\n                                            }\n                                            onChange={handleSliderChange}\n                                            aria-labelledby='input-slider'\n                                        />\n                                    </Grid>\n                                    <Grid item sx={{ ml: 2, mr: 4 }}>\n                                        <Input\n                                            value={percent}\n                                            size='small'\n                                            onChange={handleInputChange}\n                                            onBlur={handleBlur}\n                                            inputProps={{\n                                                step: 1,\n                                                min: 0,\n                                                max: 100,\n                                                type: 'number',\n                                                'aria-labelledby': 'input-slider'\n                                            }}\n                                        />\n                                    </Grid>\n                                </Grid>\n                            </Box>\n                        </Card>\n                        <Card sx={{ p: 2, border: '0px solid', boxShadow: 2, mb: 0 }}>\n                            <CardHeader\n                                title='Amount Received'\n                                disableTypography={true}\n                                sx={{ fontSize: 18, mt: 0 }}></CardHeader>\n                            <Grid\n                                item\n                                container\n                                alignItems='center'\n                                spacing={2}\n                                sx={{ width: 400, ml: 2 }}>\n                                <Grid item xs={6}>\n                                    <Stack\n                                        direction='row'\n                                        spacing={0}\n                                        alignItems='center'>\n                                        <Item\n                                            sx={{ boxShadow: 0, mr: 1 }}\n                                            style={{ backgroundColor: 'transparent' }}>\n                                            <img\n                                                src={props.token1Icon}\n                                                alt=''\n                                                width='32'\n                                                height='32'\n                                            />\n                                        </Item>\n                                        <Item sx={{ boxShadow: 0 }}>\n                                            <Typography sx={{ fontSize: 18 }}>\n                                                {props.token1Symbol}:\n                                            </Typography>\n                                        </Item>\n                                    </Stack>\n                                    <Stack\n                                        direction='row'\n                                        spacing={0}\n                                        alignItems='center'>\n                                        <Item\n                                            sx={{ boxShadow: 0, mr: 1 }}\n                                            style={{ backgroundColor: 'transparent' }}>\n                                            <img\n                                                src={props.token2Icon}\n                                                alt=''\n                                                width='32'\n                                                height='32'\n                                            />\n                                        </Item>\n                                        <Item sx={{ boxShadow: 0 }}>\n                                            <Typography sx={{ fontSize: 18 }}>\n                                                {props.token2Symbol}:\n                                            </Typography>\n                                        </Item>\n                                    </Stack>\n                                </Grid>\n                                <Grid item xs={6}>\n                                    <Stack>\n                                        <Item sx={{ boxShadow: 0 }}>\n                                            <Typography sx={{ fontSize: 18 }}>\n                                                {numFormat(token1Amount)}\n                                            </Typography>\n                                        </Item>\n                                        <Item sx={{ boxShadow: 0 }}>\n                                            <Typography sx={{ fontSize: 18 }}>\n                                                {numFormat(token2Amount)}\n                                            </Typography>\n                                        </Item>\n                                    </Stack>\n                                </Grid>\n                            </Grid>\n                        </Card>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button\n                            variant='contained'\n                            style={{ backgroundColor: 'gray' }}\n                            onClick={handleClose}>\n                            Cancel\n                        </Button>\n                        <LoadingButton\n                            color='primary'\n                            variant='contained'\n                            disabled={\n                                token1Amount === '0' ||\n                                token2Amount === '0' ||\n                                removeLiquidityInProgress\n                                    ? true\n                                    : false\n                            }\n                            loading={removeLiquidityInProgress === 1} // Fixme: need to know when to dismiss this - only after transaction PENDING\n                            loadingPosition='start'\n                            startIcon={<ExitToAppRoundedIcon />}\n                            onClick={handleWithdraw}>\n                            {removeLiquidityInProgress ? 'REMOVING' : 'REMOVE'}\n                        </LoadingButton>\n                    </DialogActions>\n                </Box>\n            </Dialog>\n        </div>\n    )\n}\n","import React from 'react'\nimport { useRecoilState } from 'recoil'\nimport { BigNumber } from 'bignumber.js'\nimport {\n    Card,\n    Grid,\n    CardActions,\n    CardContent,\n    Typography,\n    Stack,\n    Paper,\n    styled\n} from '@mui/material'\n\nimport { tokensState, poolsState } from '../atoms'\nimport { decimal_int_to_float, numFormat } from '../services/amm'\nimport RemoveLiquidity from './RemoveLiquidity'\n\nconst Item = styled(Paper)(({ theme }) => ({\n    ...theme.typography.body2,\n    padding: theme.spacing(0),\n    textAlign: 'left',\n    color: theme.palette.text.secondary\n}))\n\nfunction LiquidityPool(props) {\n    const [tokens] = useRecoilState(tokensState)\n    const [pools] = useRecoilState(poolsState)\n\n    let pool = pools.get(props.poolId)\n    if (!pool || !pool.shares) return <div></div>\n\n    const token1 = () => {\n        let pool = pools.get(props.poolId)\n        let token_address = pool.token1\n        let token = tokens.get(token_address)\n        return token\n    }\n\n    const token1Symbol = () => {\n        let token = token1(props.poolId)\n        return token.symbol\n    }\n\n    const token1Icon = () => {\n        let token = token1(props.poolId)\n        return token.icon\n    }\n\n    const userPoolShare = () => {\n        let pool = pools.get(props.poolId)\n        if (!pool.shares) return '0'\n        return BigNumber(props.balance).div(BigNumber(pool.shares))\n    }\n\n    const userToken1AmountDecimal = () => {\n        let pool = pools.get(props.poolId)\n        let user_share = userPoolShare()\n        return BigNumber(user_share).times(pool.token1Amount)\n    }\n\n    const userToken1Amount = () => {\n        return decimal_int_to_float(pool.token1, userToken1AmountDecimal())\n    }\n\n    const token2 = () => {\n        let pool = pools.get(props.poolId)\n        let token_address = pool.token2\n        let token = tokens.get(token_address)\n        return token\n    }\n\n    const token2Symbol = () => {\n        let token = token2(props.poolId)\n        return token.symbol\n    }\n\n    const token2Icon = () => {\n        let token = token2(props.poolId)\n        return token.icon\n    }\n\n    const userToken2AmountDecimal = () => {\n        let pool = pools.get(props.poolId)\n        let user_share = userPoolShare()\n        return BigNumber(user_share).times(pool.token2Amount)\n    }\n\n    const userToken2Amount = () => {\n        return decimal_int_to_float(pool.token1, userToken2AmountDecimal())\n    }\n\n    return (\n        <Card sx={{ p: 2, border: '0px solid', boxShadow: 2, mb: 5 }}>\n            <Typography sx={{ fontSize: 18, fontWeight: '500' }}>\n                Your Position\n            </Typography>\n            <CardContent>\n                <Grid item container direction='row' alignItems='center'>\n                    <Grid item xs={6}>\n                        <Stack direction='row' spacing={0} alignItems='center'>\n                            <Item\n                                sx={{ boxShadow: 0, mr: 0 }}\n                                style={{ backgroundColor: 'transparent' }}>\n                                <img src={token1Icon()} alt='' width='32' height='32' />\n                            </Item>\n                            <Item\n                                sx={{ boxShadow: 0, ml: -1, mr: 1 }}\n                                style={{ backgroundColor: 'transparent' }}>\n                                <img src={token2Icon()} alt='' width='32' height='32' />\n                            </Item>\n                            <Item sx={{ boxShadow: 0 }}>\n                                <Typography\n                                    sx={{ fontSize: 24, fontWeight: 'normal' }}\n                                    color='text.primary'\n                                    gutterBottom>\n                                    {token1Symbol()} / {token2Symbol()}:\n                                </Typography>\n                            </Item>\n                        </Stack>\n                        <Typography\n                            sx={{ fontSize: 16, fontWeight: 'normal' }}\n                            color='text.primary'>\n                            Your Pool Share:\n                        </Typography>\n                        <Typography\n                            sx={{ fontSize: 16, fontWeight: 'normal' }}\n                            color='text.primary'>\n                            Pooled {token1Symbol()}:\n                        </Typography>\n                        <Typography\n                            sx={{ fontSize: 16, fontWeight: 'normal' }}\n                            color='text.primary'>\n                            Pooled {token2Symbol()}:\n                        </Typography>\n                    </Grid>\n                    <Grid item xs={6} textAlign='right'>\n                        <Typography\n                            sx={{ fontSize: 24, fontWeight: 'normal' }}\n                            color='text.primary'\n                            gutterBottom>\n                            {props.balance}\n                        </Typography>\n                        <Typography\n                            sx={{ fontSize: 16, fontWeight: 'bold' }}\n                            color='text.primary'>\n                            {numFormat(userPoolShare(), true)}%\n                        </Typography>\n                        <Typography\n                            sx={{ fontSize: 16, fontWeight: 'bold' }}\n                            color='text.primary'>\n                            {numFormat(userToken1Amount())}\n                        </Typography>\n                        <Typography\n                            sx={{ fontSize: 16, fontWeight: 'bold' }}\n                            color='text.primary'>\n                            {numFormat(userToken2Amount())}\n                        </Typography>\n                    </Grid>\n                </Grid>\n            </CardContent>\n            <CardActions>\n                <Grid item container justifyContent='center'>\n                    <RemoveLiquidity\n                        poolId={props.poolId}\n                        balance={props.balance}\n                        token1Symbol={token1Symbol()}\n                        token2Symbol={token2Symbol()}\n                        token1Icon={token1Icon()}\n                        token2Icon={token2Icon()}\n                        token1={token1().address}\n                        token2={token2().address}\n                        token1Amount={userToken1Amount()}\n                        token2Amount={userToken2Amount()}\n                    />\n                </Grid>\n            </CardActions>\n        </Card>\n    )\n}\n\nexport default LiquidityPool\n","import React, { useState, useEffect } from 'react'\nimport { useRecoilState } from 'recoil'\nimport { BigNumber } from 'bignumber.js'\n\nimport LiquidityPool from './LiquidityPool'\nimport { poolsState, walletAddressState } from '../atoms'\nimport { getLPBalance, updatePoolDynamicData } from '../services/amm'\n\nfunction Positions() {\n    const [pools] = useRecoilState(poolsState)\n    const [connectedAddress] = useRecoilState(walletAddressState)\n    const [userPools, setUserPools] = useState(() => new Map())\n\n    useEffect(() => {\n        async function fetchBalance(poolId) {\n            const balance = await getLPBalance(poolId, connectedAddress)\n            if (balance) {\n                setUserPools((prev) => {\n                    let m = new Map(prev)\n                    m.set(poolId, balance)\n                    return m\n                })\n            }\n        }\n        if (connectedAddress) {\n            pools.forEach((pool) => {\n                fetchBalance(pool.id)\n            })\n        }\n    }, [connectedAddress, pools])\n\n    const allPools = () => {\n        let r = []\n        userPools.forEach((balance, poolId) => {\n            if (!BigNumber(balance).isZero()) {\n                r.push(<LiquidityPool key={poolId} poolId={poolId} balance={balance} />)\n                updatePoolDynamicData(poolId)\n            }\n        })\n        return r\n    }\n\n    return <div>{allPools()}</div>\n}\n\nexport default Positions\n","import React, { useState, useEffect } from 'react'\nimport { useRecoilState } from 'recoil'\nimport { getRecoil } from 'recoil-nexus'\nimport { BigNumber } from 'bignumber.js'\n\nimport {\n    tokensState,\n    poolsState,\n    tokensUserDataState,\n    walletAddressState,\n    addLiquiditySlippage,\n    transactionsStatusSelector\n} from '../atoms'\n\nimport {\n    add_liquidity,\n    updateTokenDynamicData,\n    updatePoolDynamicData,\n    getPoolIdFromTokens,\n    decimal_int_to_float,\n    float_to_decimal_int,\n    addToastMsg,\n    getPoolPriceForTokenA,\n    numFormat,\n    isTokenApproved,\n    calcOtherTokenRequiredAmountForLiquidity,\n    checkAndUpdateComponentTransactions,\n    isSufficientBalanceInWallet,\n    getWalletTokenAmount,\n    WALLET_SUFFICIENT_BALANCE\n} from '../services/amm'\n\nimport {\n    FormControl,\n    InputLabel,\n    Select,\n    MenuItem,\n    TextField,\n    Grid,\n    Button,\n    Box,\n    Card,\n    CardContent,\n    Typography\n} from '@mui/material'\nimport LoadingButton from '@mui/lab/LoadingButton'\nimport MonetizationOnIcon from '@mui/icons-material/MonetizationOn'\nimport AccountBalanceWalletIcon from '@mui/icons-material/AccountBalanceWallet'\n\nimport { useInterval } from 'usehooks-ts'\n\nimport { GApage, GAbutton } from '../services/ga.js'\n\nimport BoxHeader from './BoxHeader.js'\nimport Positions from './Positions.js'\nimport ConnectWallet from './ConnectWallet.js'\nimport Approve from './Approve.js'\nimport Balance from './Balance.js'\n\nfunction Provide() {\n    const [tokens] = useRecoilState(tokensState)\n    const [pools] = useRecoilState(poolsState)\n    const [token1, setToken1] = useState('')\n    const [token1Amount, setToken1Amount] = useState('')\n    const [token2, setToken2] = useState('')\n    const [token2Amount, setToken2Amount] = useState('')\n    const [activePoolId, setActivePoolId] = useState(0)\n    const [connectedAddress] = useRecoilState(walletAddressState)\n    const [addLiquidityInProgress, setAddLiquidityInProgress] = useState(false)\n    const [leadingToken, setLeadingToken] = useState(0) // 0 is no token, 1/2 is the last updated token\n    const [transactionsStatus] = useRecoilState(\n        transactionsStatusSelector('add_liquidity')\n    )\n    const [componentTxs, setComponentTxs] = useState({})\n    const [tuds] = useRecoilState(tokensUserDataState)\n\n    useEffect(() => {}, [tuds, pools])\n\n    useEffect(() => {\n        GApage('pools')\n    }, [])\n\n    useEffect(() => {\n        checkAndUpdateComponentTransactions(\n            transactionsStatus,\n            componentTxs,\n            setAddLiquidityInProgress\n        )\n    }, [transactionsStatus, componentTxs])\n\n    useEffect(() => {\n        if (token1 && token2) {\n            let poolId = getPoolIdFromTokens(token1, token2)\n            setActivePoolId(poolId)\n\n            // follow the leader\n            if (leadingToken <= 1) {\n                // cannot be 0, but just for safety\n                if (poolId > 0) {\n                    let amount = calcOtherTokenRequiredAmountForLiquidity(\n                        token1,\n                        token2,\n                        token1Amount\n                    )\n                    //console.log('Provide Liquidity amount: ', amount)\n                    if (amount !== undefined) setToken2Amount(amount) // can set amount with numFormat for nicer display: numFormat(amount)\n                } else {\n                    setToken2Amount(0)\n                }\n            } else {\n                if (poolId > 0) {\n                    let amount = calcOtherTokenRequiredAmountForLiquidity(\n                        token2,\n                        token1,\n                        token2Amount\n                    )\n                    if (amount !== undefined) setToken1Amount(amount) // can set amount with numFormat for nicer display\n                } else {\n                    setToken1Amount(0)\n                }\n            }\n        }\n    }, [token1, token2, token1Amount, token2Amount, leadingToken])\n\n    const updateTokensIntervalCallback = async () => {\n        // Allow periodic update only if both tokens are selected\n        if (activePoolId > 0) {\n            updatePoolDynamicData(activePoolId)\n        } else {\n            if (token1) updateTokenDynamicData(token1)\n            if (token2) updateTokenDynamicData(token2)\n        }\n    }\n\n    // timer to update token1 user data (allowance, amount)\n    // and selected pool data\n    useInterval(updateTokensIntervalCallback, 15000)\n\n    const handleToken1Select = (event) => {\n        let token_address = event.target.value\n        setToken1(token_address)\n        updateTokenDynamicData(token_address)\n\n        GAbutton('pool-token1')\n    }\n\n    const handleToken2Select = (event) => {\n        let token_address = event.target.value\n        setToken2(token_address)\n        updateTokenDynamicData(token_address)\n\n        GAbutton('pool-token2')\n    }\n\n    // Fixme: a perfect dup of the function in swap - consider extracting to util service module\n    const handleTokenAmountChange = (token, amount) => {\n        // fixme: consider limit decimals input according to token decimals\n        const regex = /^(([0-9]+[.]?[0-9]*)|([.][0-9]+))$/\n\n        if (token === token1 && (amount === '' || regex.test(amount))) {\n            setToken1Amount(amount)\n            setLeadingToken(1)\n        }\n        if (token === token2 && (amount === '' || regex.test(amount))) {\n            setToken2Amount(amount)\n            setLeadingToken(2)\n        }\n    }\n\n    const handleAddLiquidity = async () => {\n        setAddLiquidityInProgress(true)\n        let slippage = parseFloat(getRecoil(addLiquiditySlippage)) / 100\n        let minAmount1Out = BigNumber(token1Amount)\n            .times(BigNumber(1).minus(BigNumber(slippage)))\n            .toString(10)\n        let minAmount2Out = BigNumber(token2Amount)\n            .times(BigNumber(1).minus(BigNumber(slippage)))\n            .toString(10)\n        console.log('Add Liquidity slippage: ', slippage)\n        console.log(\n            'Add Liquidity minAmountOut: ',\n            minAmount1Out,\n            float_to_decimal_int(token1, minAmount1Out)\n        )\n\n        try {\n            let tx = await add_liquidity(\n                token1,\n                float_to_decimal_int(token1, token1Amount),\n                float_to_decimal_int(token1, minAmount1Out),\n                token2,\n                float_to_decimal_int(token2, token2Amount),\n                float_to_decimal_int(token2, minAmount2Out)\n            )\n\n            if (!tx) throw Error('Cannot perform transaction')\n\n            setComponentTxs((prevState) => ({\n                ...prevState,\n                [tx.transaction_hash]: 'new'\n            }))\n        } catch (e) {\n            addToastMsg('User abort', 'error')\n            setAddLiquidityInProgress(false)\n        }\n    }\n\n    const addLiquidityButton = () => {\n        GAbutton('add-liquidity')\n\n        let token1SufficientBalance = isSufficientBalanceInWallet(token1, token1Amount)\n        let token2SufficientBalance = isSufficientBalanceInWallet(token2, token2Amount)\n\n        if (\n            token1 &&\n            token2 &&\n            token1Amount > 0 &&\n            token2Amount > 0 &&\n            token1SufficientBalance === WALLET_SUFFICIENT_BALANCE.TRUE &&\n            token2SufficientBalance === WALLET_SUFFICIENT_BALANCE.TRUE &&\n            activePoolId !== 0\n        ) {\n            // PoolId is valid - display ADD LIQUIDITY button\n            return (\n                <LoadingButton\n                    color='primary'\n                    variant='contained'\n                    fullWidth={true}\n                    disabled={\n                        (connectedAddress &&\n                            isTokenApproved(token1, token1Amount) &&\n                            isTokenApproved(token2, token2Amount)) ||\n                        addLiquidityInProgress\n                            ? false\n                            : true\n                    }\n                    loading={addLiquidityInProgress}\n                    loadingPosition='start'\n                    startIcon={<MonetizationOnIcon />}\n                    onClick={handleAddLiquidity}>\n                    {addLiquidityInProgress ? 'ADDING LIQUIDITY' : 'ADD LIQUIDITY'}\n                </LoadingButton>\n            )\n        }\n\n        if (\n            connectedAddress &&\n            token1 &&\n            token2 &&\n            token1Amount > 0 &&\n            token2Amount > 0 &&\n            (token1SufficientBalance !== WALLET_SUFFICIENT_BALANCE.TRUE ||\n                token2SufficientBalance !== WALLET_SUFFICIENT_BALANCE.TRUE)\n        ) {\n            // Amount exceed wallet balance\n            return (\n                <LoadingButton\n                    color='primary'\n                    variant='contained'\n                    fullWidth={true}\n                    disabled={true}\n                    loading={\n                        token1SufficientBalance === WALLET_SUFFICIENT_BALANCE.UNKNOWN ||\n                        token2SufficientBalance === WALLET_SUFFICIENT_BALANCE.UNKNOWN\n                    }\n                    loadingPosition='start'\n                    startIcon={<AccountBalanceWalletIcon />}>\n                    {token1SufficientBalance === WALLET_SUFFICIENT_BALANCE.FALSE ||\n                    token2SufficientBalance === WALLET_SUFFICIENT_BALANCE.FALSE\n                        ? 'AMOUNT EXCEEDS WALLET BALANCE'\n                        : 'CHECKING WALLET BALANCE'}\n                </LoadingButton>\n            )\n        }\n\n        if (token1 && token2 && activePoolId === 0) {\n            // No pool for token pair selected\n            return (\n                <Button\n                    color='primary'\n                    variant='contained'\n                    fullWidth={true}\n                    disabled={true}>\n                    NOT A VALID Pool\n                </Button>\n            )\n        }\n\n        if (connectedAddress) {\n            // Wallet is connected\n            let instruction = ''\n            if (!token1 && !token2) instruction = 'SELECT TOKENS'\n            if ((!token1 && token2) || (token1 && !token2)) instruction = 'SELECT TOKEN'\n            if (token1 && token2 && (!token1Amount || !token2Amount))\n                instruction = 'ENTER AMOUNT'\n\n            if (instruction !== '')\n                return (\n                    <Button\n                        color='secondary'\n                        variant='contained'\n                        fullWidth={true}\n                        disabled={true}>\n                        {instruction}\n                    </Button>\n                )\n        }\n\n        return <div></div>\n    }\n\n    const priceAndShare = () => {\n        let pool = pools.get(activePoolId)\n\n        if (!token1Amount || !token2Amount || !activePoolId || !pool) return <div></div>\n\n        let symbol1 = tokens.get(token1).symbol\n        let symbol2 = tokens.get(token2).symbol\n        console.log(\n            '-----POOL SHARE: ',\n            token1Amount,\n            token2Amount,\n            decimal_int_to_float(pool.token1, pool.token1Amount) +\n                BigNumber(token1Amount),\n            decimal_int_to_float(pool.token2, pool.token2Amount)\n        )\n\n        let priceForToken1 = getPoolPriceForTokenA(activePoolId, token2, token1)\n        let priceForToken2 = getPoolPriceForTokenA(activePoolId, token1, token2)\n\n        // Normalize reserves amounts and get expected share in the pool\n        let pool_share =\n            pool.token1 === token1\n                ? BigNumber(token1Amount).div(\n                      BigNumber(token1Amount).plus(\n                          BigNumber(decimal_int_to_float(pool.token1, pool.token1Amount))\n                      )\n                  )\n                : BigNumber(token1Amount).div(\n                      BigNumber(token1Amount).plus(\n                          BigNumber(decimal_int_to_float(pool.token2, pool.token2Amount))\n                      )\n                  )\n\n        return (\n            <>\n                <Grid>\n                    <Card sx={{ mb: 2, mt: 2, boxShadow: 2 }}>\n                        <CardContent>\n                            <Typography\n                                sx={{ fontSize: 16, fontWeight: '500', mb: 0 }}\n                                gutterBottom>\n                                Pool Prices and Share\n                            </Typography>\n                        </CardContent>\n\n                        <Card sx={{ mb: 0, mt: 0 }}>\n                            <Grid item container alignItems='center' spacing={2}>\n                                <Grid item xs={4}>\n                                    <Typography\n                                        sx={{\n                                            textAlign: 'center',\n                                            lineHeight: 2,\n                                            mt: 1,\n                                            fontWeight: 'bold'\n                                        }}>\n                                        {numFormat(priceForToken1)}\n                                    </Typography>\n                                    <Typography\n                                        sx={{ textAlign: 'center', fontSize: 12, mb: 1 }}>\n                                        {symbol1} for {symbol2}\n                                    </Typography>\n                                </Grid>\n                                <Grid item xs={4}>\n                                    <Typography\n                                        sx={{\n                                            textAlign: 'center',\n                                            lineHeight: 2,\n                                            mt: 1,\n                                            fontWeight: 'bold'\n                                        }}>\n                                        {numFormat(priceForToken2)}\n                                    </Typography>\n                                    <Typography\n                                        sx={{ textAlign: 'center', fontSize: 12, mb: 1 }}>\n                                        {symbol2} for {symbol1}\n                                    </Typography>\n                                </Grid>\n                                <Grid item xs={4}>\n                                    <Typography\n                                        sx={{\n                                            textAlign: 'center',\n                                            lineHeight: 2,\n                                            mt: 1,\n                                            fontWeight: 'bold'\n                                        }}>\n                                        {numFormat(pool_share, true)}%\n                                    </Typography>\n                                    <Typography\n                                        sx={{ textAlign: 'center', fontSize: 12, mb: 1 }}>\n                                        Share of Pool\n                                    </Typography>\n                                </Grid>\n                            </Grid>\n                        </Card>\n                    </Card>\n                </Grid>\n            </>\n        )\n    }\n\n    const menuItems = (otherSelectedToken) => {\n        let r = []\n        tokens.forEach((value, address) => {\n            if (otherSelectedToken !== address) {\n                r.push(\n                    <MenuItem key={address} value={address}>\n                        <Grid container direction='row'>\n                            <Grid sx={{ mr: 1, mb: -1 }}>\n                                <img src={value.icon} alt='' width='24' height='24' />\n                            </Grid>\n                            <Grid>\n                                <Typography>{value.symbol || value.address}</Typography>\n                            </Grid>\n                        </Grid>\n                    </MenuItem>\n                )\n            }\n        })\n        return r\n    }\n\n    return (\n        <div>\n            <Box sx={{ p: 2, border: '0px solid', mt: 1, mb: 4, boxShadow: 2 }}>\n                <Grid container sx={{ mb: 4 }}>\n                    <BoxHeader name='Add Liquidity' />\n                </Grid>\n\n                <Grid container spacing={2}>\n                    <Grid item xs={6}>\n                        <FormControl fullWidth>\n                            <InputLabel id='token1-label'>Token 1:</InputLabel>\n                            <Select\n                                labelId='token1-label'\n                                id='token1-select'\n                                value={token1}\n                                label='Token 1'\n                                onChange={handleToken1Select}>\n                                {menuItems(token2)}\n                            </Select>\n                        </FormControl>\n                        <Balance\n                            token={token1}\n                            amount={getWalletTokenAmount(token1)}\n                            showMaxButton={true}\n                            setMaxAmountHandler={handleTokenAmountChange}\n                        />\n                    </Grid>\n                    <Grid item xs={6}>\n                        <FormControl fullWidth>\n                            <TextField\n                                helperText='Amount to provide'\n                                id='token1-amount'\n                                inputProps={{\n                                    variant: 'outlined',\n                                    placeholder: '0.00',\n                                    type: 'string',\n                                    autoComplete: 'off',\n                                    'aria-labelledby': 'input-amount1'\n                                }}\n                                value={token1Amount ? token1Amount : ''}\n                                onChange={(e) =>\n                                    handleTokenAmountChange(token1, e.target.value)\n                                }\n                                error={\n                                    isSufficientBalanceInWallet(token1, token1Amount) ===\n                                    WALLET_SUFFICIENT_BALANCE.FALSE\n                                        ? true\n                                        : false\n                                }\n                                disabled={token1 === '' ? true : false}\n                            />\n                        </FormControl>\n                    </Grid>\n                </Grid>\n\n                <Grid container spacing={2} sx={{ mt: 2 }}>\n                    <Grid item xs={6}>\n                        <FormControl fullWidth>\n                            <InputLabel id='token2-label'>Token 2:</InputLabel>\n                            <Select\n                                labelId='token2-label'\n                                id='token2-select'\n                                value={token2}\n                                label='Token 2'\n                                onChange={handleToken2Select}>\n                                {menuItems(token1)}\n                            </Select>\n                        </FormControl>\n                        <Balance\n                            token={token2}\n                            amount={getWalletTokenAmount(token2)}\n                            showMaxButton={true}\n                            setMaxAmountHandler={handleTokenAmountChange}\n                        />\n                    </Grid>\n                    <Grid item xs={6}>\n                        <FormControl fullWidth>\n                            <TextField\n                                helperText='Amount to provide'\n                                id='token2-amount'\n                                inputProps={{\n                                    variant: 'outlined',\n                                    placeholder: '0.00',\n                                    type: 'string',\n                                    autoComplete: 'off',\n                                    'aria-labelledby': 'input-amount2'\n                                }}\n                                value={token2Amount ? token2Amount : ''}\n                                onChange={(e) =>\n                                    handleTokenAmountChange(token2, e.target.value)\n                                }\n                                error={\n                                    isSufficientBalanceInWallet(token2, token2Amount) ===\n                                    WALLET_SUFFICIENT_BALANCE.FALSE\n                                        ? true\n                                        : false\n                                }\n                                disabled={token2 === '' ? true : false}\n                            />\n                        </FormControl>\n                    </Grid>\n                </Grid>\n\n                {priceAndShare()}\n\n                <Card sx={{ minWidth: 275, mb: 2, mt: 3, boxShadow: 2 }}>\n                    <ConnectWallet secondary='true' />\n                    <Approve\n                        token={token1}\n                        tokenAmount={token1Amount}\n                        activePoolId={activePoolId}\n                        tokenInRange={\n                            isSufficientBalanceInWallet(token1, token1Amount) ===\n                            WALLET_SUFFICIENT_BALANCE.TRUE\n                        }\n                    />\n                    <Approve\n                        token={token2}\n                        tokenAmount={token2Amount}\n                        activePoolId={activePoolId}\n                        tokenInRange={\n                            isSufficientBalanceInWallet(token2, token2Amount) ===\n                            WALLET_SUFFICIENT_BALANCE.TRUE\n                        }\n                    />\n                    {addLiquidityButton()}\n                </Card>\n            </Box>\n\n            {/* User's position boxes */}\n            <Positions />\n        </div>\n    )\n}\n\nexport default Provide\n","import React from 'react'\n\nimport {\n    Chart as ChartJS,\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    Tooltip,\n    Legend\n} from 'chart.js'\nimport { Line } from 'react-chartjs-2'\nimport { Typography, Card, Grid } from '@mui/material'\n\nChartJS.register(\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    Tooltip,\n    Legend\n)\n\nfunction Charts() {\n    const labels = [\n        '2021-12-14',\n        '2021-12-13',\n        '2021-12-12',\n        '2021-12-11',\n        '2021-12-10',\n        '2021-12-09',\n        '2021-12-08',\n        '2021-12-07',\n        '2021-12-06',\n        '2021-12-05'\n    ]\n    const datasets = [\n        {\n            id: 1,\n            label: '',\n            data: [\n                9.486967291294242, 9.913585044383598, 6.1093149832212585,\n                8.888170412454828, 9.644500380279675, 5.592256920179448,\n                1.6120884439497363, 1.6694652914713426, 9.780713359093626,\n                6.9842512776941055\n            ]\n        }\n    ]\n    /*    return ( <div>\n        123\n        <Line datasetIdKey='id'\n            data={{d1}}></Line>\n    </div>)*/\n\n    return (\n        <div>\n            <Card sx={{ mb: 0, mt: 0 }}>\n                <Typography>Overview</Typography>\n                <Grid item container alignItems='center' spacing={2}>\n                    <Grid item xs={6}>\n                        <Line\n                            datasetIdKey='id'\n                            data={{ labels: labels, datasets: datasets }}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <Line\n                            datasetIdKey='id'\n                            data={{ labels: labels, datasets: datasets }}\n                        />\n                    </Grid>\n                </Grid>\n            </Card>\n        </div>\n    )\n}\n\nexport default Charts\n","import React, { useState } from 'react'\nimport Swap from './Swap'\nimport Provide from './Provide'\nimport Charts from './Charts'\nimport { Tab, Tabs, Box } from '@mui/material'\n\nconst Main = () => {\n    const [selectedTab, setSelectedTab] = useState(0)\n\n    const handleChange = (event, newValue) => {\n        setSelectedTab(newValue)\n    }\n\n    return (\n        <Box>\n            <Tabs\n                sx={{ mt: 3, mb: 2 }}\n                value={selectedTab}\n                onChange={handleChange}\n                centered>\n                <Tab className='swap-tab' label='Swap' sx={{ fontSize: 18 }} />\n                <Tab className='provide-tab' label='Pools' sx={{ fontSize: 18 }} />\n                <Tab className='chart-tab' label='Charts' sx={{ fontSize: 18 }} />\n            </Tabs>\n            {selectedTab === 0 && <Swap />}\n            {selectedTab === 1 && <Provide />}\n            {selectedTab === 2 && <Charts />}\n        </Box>\n    )\n}\n\nexport default Main\n","import React from 'react'\nimport { Button } from '@mui/material'\n\nimport { human_readable_hash } from '../services/amm'\n\nfunction PendingTransaction(props) {\n    const handleClick = () => {\n        window.open('https://goerli.voyager.online/tx/' + props.hash, '_blank')\n    }\n\n    return (\n        <div>\n            <Button sx={{ mr: 2 }} variant='contained' onClick={handleClick}>\n                Tx {human_readable_hash(props.hash)} {props.transactionStatus}\n            </Button>\n        </div>\n    )\n}\n\nexport default PendingTransaction\n","import React from 'react'\n\nimport { useRecoilState } from 'recoil'\nimport { useInterval } from 'usehooks-ts'\n\nimport { pendingTxsState } from '../atoms'\nimport PendingTransaction from './PendingTransaction.js'\nimport {\n    getTransactionUpdate,\n    updateAllTokensDynamicData,\n    updatePoolsAndTokens,\n    addToastMsg\n} from '../services/amm'\n\nfunction PendingTransactions() {\n    const [txs] = useRecoilState(pendingTxsState)\n\n    const updateTransactionsStatus = async () => {\n        txs.forEach(async (tx) => {\n            if (!tx.dismiss) {\n                let status = await getTransactionUpdate(tx.hash)\n                if (status !== null) {\n                    // should get here only if there is an update\n                    if (status.includes('RECEIVED')) {\n                        addToastMsg('Transaction Sent', 'success')\n                    }\n                    if (status.includes('REJECTED')) {\n                        addToastMsg('Transaction Rejected', 'error')\n                    }\n                    if (status.includes('PENDING')) {\n                        addToastMsg('Transaction Pending', 'success')\n                        updatePoolsAndTokens(false)\n                        updateAllTokensDynamicData()\n                    }\n                    if (status.includes('ACCEPTED')) {\n                        addToastMsg('Transaction Accepted', 'success')\n                    }\n                }\n            }\n        })\n    }\n    useInterval(updateTransactionsStatus, 10000)\n\n    const pendingTransactions = () => {\n        let r = []\n        txs.forEach((tx) => {\n            if (!tx.dismiss) {\n                r.push(\n                    <PendingTransaction\n                        key={tx.hash}\n                        hash={tx.hash}\n                        transactionStatus={tx.status}>\n                        {' '}\n                    </PendingTransaction>\n                )\n            }\n        })\n        return r\n    }\n\n    return <>{pendingTransactions()}</>\n}\n\nexport default PendingTransactions\n","import React from 'react'\n\nimport { Snackbar, Alert } from '@mui/material'\n\nfunction Toast(props) {\n    const [open, setOpen] = React.useState(props.open)\n\n    const handleClose = (event, reason) => {\n        if (reason === 'clickaway') {\n            return\n        }\n        setOpen(false)\n    }\n\n    return (\n        <Snackbar\n            className='toast'\n            open={open}\n            autoHideDuration={6000}\n            onClose={handleClose}>\n            <Alert onClose={handleClose} severity={props.type} sx={{ width: '100%' }}>\n                {props.msg}\n            </Alert>\n        </Snackbar>\n    )\n}\n\nexport default Toast\n","import React from 'react'\n\nimport { useRecoilState } from 'recoil'\n\nimport { toastsState } from '../atoms'\nimport Toast from './Toast.js'\n\nfunction Toasts() {\n    const [toasts] = useRecoilState(toastsState)\n\n    const activeToasts = () => {\n        let allActiveToasts = []\n        toasts.forEach((t) => {\n            if (!t.dismiss) {\n                allActiveToasts.push(\n                    <Toast\n                        key={t.hash}\n                        open={t.dismiss ? false : true}\n                        msg={t.msg}\n                        type={t.type}></Toast>\n                )\n            }\n        })\n        return allActiveToasts\n    }\n\n    return <div>{activeToasts()}</div>\n}\n\nexport default Toasts\n","import React from 'react'\n\nimport {\n    Chart as ChartJS,\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    Tooltip,\n    Legend\n} from 'chart.js'\nimport { Line } from 'react-chartjs-2'\nimport { Typography, Card, Grid } from '@mui/material'\n\nChartJS.register(\n    CategoryScale,\n    LinearScale,\n    PointElement,\n    LineElement,\n    Title,\n    Tooltip,\n    Legend\n)\n\nfunction Info() {\n    const options = (title) => {\n        return {\n            responsive: true,\n            plugins: {\n                legend: {\n                    position: 'top'\n                },\n                title: {\n                    display: true,\n                    text: title\n                }\n            }\n        }\n    }\n\n    const labels = [\n        '2021-12-14',\n        '2021-12-13',\n        '2021-12-12',\n        '2021-12-11',\n        '2021-12-10',\n        '2021-12-09',\n        '2021-12-08',\n        '2021-12-07',\n        '2021-12-06',\n        '2021-12-05'\n    ]\n    const datasets = [\n        {\n            id: 1,\n            label: '',\n            data: [\n                9.486967291294242, 9.913585044383598, 6.1093149832212585,\n                8.888170412454828, 9.644500380279675, 5.592256920179448,\n                1.6120884439497363, 1.6694652914713426, 9.780713359093626,\n                6.9842512776941055\n            ]\n        }\n    ]\n    /*    return ( <div>\n        123\n        <Line datasetIdKey='id'\n            data={{d1}}></Line>\n    </div>)*/\n\n    return (\n        <div>\n            <Card sx={{ mb: 0, mt: 0 }}>\n                <Typography>Overview</Typography>\n                <Grid item container alignItems='center' spacing={2}>\n                    <Grid item xs={6}>\n                        <Line\n                            options={options('TVL')}\n                            datasetIdKey='id'\n                            data={{ labels: labels, datasets: datasets }}\n                        />\n                    </Grid>\n\n                    <Grid item xs={6}>\n                        <Line\n                            options={options('Volume')}\n                            datasetIdKey='id'\n                            data={{ labels: labels, datasets: datasets }}\n                        />\n                    </Grid>\n                </Grid>\n            </Card>\n        </div>\n    )\n}\n\nexport default Info\n","import {\n    Box,\n    Card,\n    AppBar,\n    Toolbar,\n    Grid,\n    FormControl,\n    Button,\n    TextField,\n    Typography\n} from '@mui/material'\nimport React, { useEffect, useState } from 'react'\nimport { useRecoilState } from 'recoil'\nimport {\n    tokensState,\n    walletAddressState,\n    walletAmountsSelector,\n    lastTxDoneSelector\n} from '../atoms'\nimport { ERC20_mint, float_to_decimal_int } from '../services/amm'\n\nfunction Minter() {\n    const [mintAmount, setMintAmount] = useState('')\n    const [mintedTokens, setMintedTokens] = useState(new Map())\n    const [waitingToMint, setWaitingToMint] = useState([])\n\n    const [tokens] = useRecoilState(tokensState)\n    const [connectedAddress] = useRecoilState(walletAddressState)\n    const [walletAmounts] = useRecoilState(walletAmountsSelector)\n    const [lastTxDone] = useRecoilState(lastTxDoneSelector)\n\n    useEffect(() => {\n        console.log('minter tokens effect')\n        tokens.forEach((value, address) => {\n            console.log(address)\n            if (!mintedTokens.get(address)) {\n                setMintedTokens((prev) => {\n                    let n = new Map(prev)\n                    n.set(address, 0)\n                    return n\n                })\n            }\n        })\n    }, [tokens, mintedTokens])\n\n    const mintedState = { 0: '...', 1: 'MINTING', 2: 'MINTED' }\n\n    const waitingToMintList = () => {\n        let r = []\n        console.log(waitingToMint)\n        for (const x of waitingToMint) {\n            r.push(<div>token {x}</div>)\n        }\n        return r\n    }\n\n    const mintedTokensList = () => {\n        console.log('mintedTokensList!')\n        let r = []\n        mintedTokens.forEach((minted, address) => {\n            let token = tokens.get(address)\n            console.log('walletAmounts=', walletAmounts)\n            let walletAmount = walletAmounts.get(address)\n\n            if (token) {\n                r.push(\n                    <Card key={address} sx={{ mt: 1 }}>\n                        <Grid container direction='row'>\n                            <Grid sx={{ mr: 1, mb: -1 }}>\n                                <img src={token.icon} alt='' width='24' height='24' />\n                            </Grid>\n                            <Grid>\n                                <Typography>{token.name || token.address}</Typography>\n                            </Grid>\n                            <Grid sx={{ ml: 2 }}>\n                                <Typography> in wallet: {walletAmount}</Typography>\n                            </Grid>\n                            <Grid\n                                container\n                                direction='row'\n                                justifyContent='flex-end'\n                                sx={{ mr: 1, mt: -3 }}>\n                                {mintedState[minted]}\n                            </Grid>\n                        </Grid>\n                    </Card>\n                )\n            }\n        })\n\n        console.log(r)\n        return r\n    }\n    const handleMintAmountChange = (value) => {\n        setMintAmount(value)\n    }\n\n    const mintNextToken = () => {\n        console.log('waiting:', waitingToMint)\n        let x = [...waitingToMint]\n        let address = x.shift()\n        console.log('address: ', address)\n        ERC20_mint(address, float_to_decimal_int(address, mintAmount))\n        setWaitingToMint(x)\n    }\n    useEffect(() => {\n        console.log(\n            'lastTxDone changed, val=',\n            lastTxDone,\n            ' waitingToMint=',\n            waitingToMint\n        )\n        if (lastTxDone && waitingToMint.length > 0) {\n            mintNextToken()\n        }\n    }, [lastTxDone])\n\n    const handleMint = async () => {\n        console.log('will mint...')\n        console.log(mintedTokens.entries())\n        for (const entry of mintedTokens.entries()) {\n            console.log(entry)\n            let address = entry[0]\n            let minted = entry[1]\n            console.log('handleMint address=', address, ' minted=', minted)\n            let token = tokens.get(address)\n\n            if (minted === 0 && token) {\n                setWaitingToMint((curr) => {\n                    return [...curr, address]\n                })\n                /*\n                let tx = await ERC20_mint(\n                    address,\n                    float_to_decimal_int(address, mintAmount)\n                )*/\n\n                setMintedTokens((prev) => {\n                    let n = new Map(prev)\n                    n.set(address, 1)\n                    return n\n                })\n            }\n        }\n\n        if (lastTxDone) mintNextToken()\n    }\n\n    return (\n        <Box>\n            <Grid container sx={{ mt: 2, mb: 2 }}>\n                <Box sx={{ flexGrow: 1 }}>\n                    <AppBar position='static'>\n                        <Toolbar>\n                            <Typography>Mint (testnet)</Typography>\n                        </Toolbar>\n                    </AppBar>\n                </Box>\n            </Grid>\n            <Grid container spacing={2} sx={{}}>\n                <Grid item xs={12}>\n                    <FormControl fullWidth>\n                        <TextField\n                            helperText='Amount to mint'\n                            id='mint-amount'\n                            inputProps={{\n                                variant: 'outlined',\n                                placeholder: '0.00',\n                                type: 'number',\n                                autoComplete: 'off'\n                            }}\n                            value={mintAmount}\n                            onChange={(e) => handleMintAmountChange(e.target.value)}\n                        />\n                    </FormControl>\n                </Grid>\n                <Grid item xs={12}>\n                    <Button\n                        color='inherit'\n                        variant='outlined'\n                        fullWidth={true}\n                        disabled={connectedAddress && mintAmount > 0 ? false : true}\n                        onClick={handleMint}>\n                        {connectedAddress\n                            ? mintAmount > 0\n                                ? 'MINT'\n                                : 'PLEASE SET MINT AMOUNT'\n                            : 'PLEASE CONNECT WALLET'}\n                    </Button>\n                </Grid>\n                <Grid item xs={12}>\n                    {mintedTokensList()}\n                </Grid>\n                waiting to mint:\n                <Grid item xs={12}>\n                    {waitingToMintList()}\n                </Grid>\n            </Grid>\n        </Box>\n    )\n}\n\nexport default Minter\n","import React, { useEffect } from 'react'\nimport { AppBar, Toolbar, Typography, Container } from '@mui/material'\n\nimport { RecoilRoot } from 'recoil'\n\nimport RecoilNexus from 'recoil-nexus'\nimport { updatePoolsAndTokens } from './services/amm'\nimport { updatePoolsAndTokensStatic } from './services/static_data'\nimport Main from './components/Main'\nimport ConnectWallet from './components/ConnectWallet'\nimport PendingTransactions from './components/PendingTransactions'\nimport Toasts from './components/Toasts'\nimport Info from './components/Info'\nimport { useInterval } from 'usehooks-ts'\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom'\nimport Minter from './components/Minter'\nimport ReactGA from 'react-ga'\n\nimport { GAinit, GApage, GAbutton } from './services/ga.js'\n\nimport { getSourceMapRange } from 'typescript'\n\nfunction App() {\n    useEffect(() => {\n        GAinit()\n        GApage('/')\n    }, [])\n\n    // run once, on page load\n    useEffect(() => {\n        updatePoolsAndTokensStatic()\n        console.log('Finished updating static data')\n        updatePoolsAndTokens(true)\n    }, [])\n\n    const updateAMMIntervalCallback = async () => {\n        updatePoolsAndTokens(false)\n    }\n\n    // Timer to update all Pools and Tokens user data (allowance, amount)\n    useInterval(updateAMMIntervalCallback, 15000)\n\n    return (\n        <Router>\n            <RecoilRoot>\n                <RecoilNexus />\n                <div className='App'>\n                    <AppBar position='sticky' /*style={{ background: '#2F2F5A' }}*/>\n                        <Toolbar>\n                            <Typography\n                                variant='h4'\n                                color='inherit'\n                                component='div'\n                                sx={{ flexGrow: 1 }}>\n                                mySwap\n                            </Typography>\n                            <PendingTransactions />\n                            <ConnectWallet />\n                        </Toolbar>\n                    </AppBar>\n\n                    <Switch>\n                        <Route exact path='/'>\n                            <Container maxWidth='sm'>\n                                <Main />\n                            </Container>\n                        </Route>\n                        <Route path='/charts'>\n                            <Info />\n                        </Route>\n                        <Route path='/mint'>\n                            <Container maxWidth='sm'>\n                                <Minter />\n                            </Container>\n                        </Route>\n                    </Switch>\n                    <Toasts />\n                </div>\n            </RecoilRoot>\n        </Router>\n    )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n// import reportWebVitals from './reportWebVitals'\n\nimport CssBaseline from '@mui/material/CssBaseline'\n\nReactDOM.render(\n    <React.StrictMode>\n        <CssBaseline>\n            <App />\n        </CssBaseline>\n    </React.StrictMode>,\n    document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals()\n"],"sourceRoot":""}