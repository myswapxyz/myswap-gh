(this.webpackJsonpamm_app=this.webpackJsonpamm_app||[]).push([[0],{166:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=166},167:function(e,t){},198:function(e,t,n){},225:function(e,t){},233:function(e,t){},234:function(e,t){},266:function(e,t){},281:function(e,t){},282:function(e,t){},283:function(e,t){},284:function(e,t){},285:function(e,t){},286:function(e,t){},290:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(55),o=n.n(c),i=(n(198),n(10)),s=n.n(i),u=n(22),l=n(363),b=n(365),j=n(367),d=n(379),O=n(18),f=n(23),h=n(4),x=n(19),m=n(9),p=n(38),g=n(29),v=n(362),k=n(366),w=n(178),y=n(350),S=n(368),N=n(357),E=n(358),A=n(169),B=n.n(A),C=n(1),_="0.50";var I=function(e){var t=Object(r.useState)(_),n=Object(h.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(null),i=Object(h.a)(o,2),s=i[0],u=i[1],d=function(){"Swap"===e.name&&Object(f.c)(z,a),"Add Liquidity"===e.name&&Object(f.c)(F,a),"Remove Liquidity"===e.name&&Object(f.c)(R,a),console.log("Slippage set to: ",a),u(null)};return Object(C.jsx)(v.a,{sx:{flexGrow:1},children:Object(C.jsx)(l.a,{position:"static",children:Object(C.jsxs)(b.a,{children:[Object(C.jsx)(k.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:function(e){u(e.currentTarget)},sx:{mr:2,position:"absolute",right:"0%"},children:Object(C.jsx)(B.a,{})}),Object(C.jsx)(j.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:e.name}),Object(C.jsx)("div",{children:Object(C.jsxs)(w.a,{id:"menuAppBar",sx:{boxShadow:1},anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{width:250}},open:Boolean(s),onClose:d,children:[Object(C.jsx)(y.a,{sx:{fontSize:14,fontWeight:"bold"},children:"Transaction Settings"}),Object(C.jsxs)(y.a,{children:["Set Slippage",Object(C.jsx)(S.a,{sx:{ml:3,mb:0},value:a,size:"small",onChange:function(e){c(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&d()},inputProps:{step:.01,min:0,max:100,type:"number","aria-labelledby":"input-slider"}})]}),Object(C.jsx)(N.a,{item:!0,container:!0,justifyContent:"center",children:Object(C.jsx)(E.a,{variant:"contained",size:"small",sx:{textWeight:"bold",mt:1},onClick:d,children:"OK"})})]})})]})})})},T=Object(O.b)({key:"walletAddressState",default:""}),W=(Object(O.b)({key:"isWalletConnectedState",default:0}),Object(O.b)({key:"poolsState",default:new Map})),P=Object(O.b)({key:"tokensState",default:new Map}),D=Object(O.b)({key:"tokensUserDataState",default:new Map}),M=Object(O.b)({key:"pendingTxsState",default:new Array}),L=Object(O.b)({key:"toastsState",default:new Array}),z=Object(O.b)({key:"swapSlippage",default:_}),F=Object(O.b)({key:"addLiquiditySlippage",default:_}),R=Object(O.b)({key:"withdrawLiquiditySlippage",default:_}),U=Object(O.d)({key:"transactionsStatusSelector",get:function(e){return function(t){var n=(0,t.get)(M);if(n)return n.filter((function(t){return t.type===e}))}}}),q=Object(O.c)({key:"walletAmountsSelector",get:function(e){var t=e.get,n=new Map;return t(D).forEach((function(e,r){if(void 0!==e.userBalance){var a=t(P).get(r);a&&a.decimals&&n.set(r,e.userBalance)}})),n}}),G=(Object(O.c)({key:"walletAllowanceSelector",get:function(e){var t=e.get,n=new Map;return t(D).forEach((function(e,r){if(void 0!==e.userApproved){var a=t(P).get(r);a&&a.decimals&&n.set(r,e.userApproved)}})),n}}),Object(O.c)({key:"pendingTxSelector",get:function(e){var t=e.get,n=new Map;return t(M).forEach((function(e){n.set(e.hash,e.status)})),n}}),Object(O.c)({key:"lastTxDoneSelector",get:function(e){var t=e.get,n=!0;return t(M).forEach((function(e){n=!1,("RECEIVED"===e.status||e.status.includes("ACCEPTED"))&&(n=!0)})),n}})),H=Object(O.c)({key:"safeToSendTxSelector",get:function(e){var t=e.get,n=t(M).length;if(0===n)return!0;var r=t(M)[n-1];return!(!r.status.includes("REJECTED")&&!r.status.includes("ACCEPTED"))}}),K=p.stark.getSelectorFromName("swap"),V=p.stark.getSelectorFromName("add_liquidity"),J=p.stark.getSelectorFromName("withdraw_liquidity"),Y=p.stark.getSelectorFromName("get_lp_balance"),Z="0x008fb0ec84a7025839faafbf9eeee6b6e9957d50bd418a334d00740fbb9f6170",Q=Object(m.BigNumber)(Z).toString(10),X=p.stark.getSelectorFromName("get_total_number_of_pools"),$=p.stark.getSelectorFromName("get_pool"),ee=p.stark.getSelectorFromName("get_total_shares"),te=p.stark.getSelectorFromName("approve"),ne=p.stark.getSelectorFromName("mint"),re=p.stark.getSelectorFromName("name"),ae=p.stark.getSelectorFromName("symbol"),ce=p.stark.getSelectorFromName("balanceOf"),oe=p.stark.getSelectorFromName("allowance"),ie=p.stark.getSelectorFromName("decimals"),se=0,ue=1,le=2,be=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===e||""===e)return"";if(t){var n=Object(m.BigNumber)(e).shiftedBy(2).sd(4,m.BigNumber.ROUND_DOWN).toPrecision(4);return Object(m.BigNumber)(n).lt(.01)?"<0.01":n}if(Object(m.BigNumber)(e).lt(1)){var r=Object(m.BigNumber)(e).sd(6).toFixed(18,m.BigNumber.ROUND_DOWN);return Object(m.BigNumber)(r).toString(10)}return Object(m.BigNumber)(e).toFixed(2)},je=function(e){var t=null;if(e){var n=Object(f.b)(D).get(e);n&&(t=n.userApproved,console.log("tokenAllowanceForAMM tud.userApproved = ",n.userApproved))}return t},de=function(e,t){try{var n=je(e);if(n&&Object(m.BigNumber)(n).gte(Object(m.BigNumber)(Pe(e,t))))return!0}catch(r){}return!1},Oe=function(e,t,n){e&&e.forEach((function(e){console.log("checkAndUpdateComponentTransactions: ",e.status,e.hash),t.hasOwnProperty(e.hash)&&["REJECTED","PENDING","ACCEPTED"].some((function(t){return e.status.includes(t)}))&&(n(!1),delete t[e.hash])}))},fe=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1",a=Object(f.b)(W),c=a.get(e),o=Object(m.BigNumber)(1);return c&&(c.token1===t?(console.log("here",c.token2Amount),o=Object(m.BigNumber)(De(n,c.token2Amount)).times(Object(m.BigNumber)(r)).div(Object(m.BigNumber)(De(t,c.token1Amount)))):o=Object(m.BigNumber)(De(n,c.token1Amount)).times(Object(m.BigNumber)(r)).div(Object(m.BigNumber)(De(t,c.token2Amount)))),console.log("Ratio",o.toString(10)),o.toString(10)},he=function(e){var t=pe(),n=Object(f.b)(D).get(e);return t&&e&&n&&void 0!==n.userBalance?De(e,n.userBalance):""},xe=function(e,t){var n=pe(),r=Object(f.b)(D).get(e);if(!n)return le;if(!e)return le;if(!t)return ue;if(!r)return le;if(void 0===r.userBalance)return le;var a=De(e,r.userBalance);return Object(m.BigNumber)(t).isPositive()&&Object(m.BigNumber)(t).lte(Object(m.BigNumber)(a))?ue:se},me=function(e,t){var n={msg:e,type:t,dismiss:!1,hash:m.BigNumber.random(10).times(1e10).toString(16)};Object(f.c)(L,(function(e){return[].concat(Object(x.a)(e),[n])}))},pe=function(){return Object(f.b)(T)},ge=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,c,o,i,u,l,b,j,d,O,h,x,m,p,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("updatePoolsAndTokens"),n=Object(g.getStarknet)(),e.next=5,n.provider.callContract({contract_address:Z,entry_point_selector:X,calldata:[]});case 5:r=e.sent,a=Number(r.result[0]),c=Object(f.b)(W),o=Object(f.b)(P),i=new Map,u=new Map(o),l=1;case 12:if(!(l<=a)){e.next=30;break}if(!((b=c.get(l))&&b.refresh>Date.now()-6e4)){e.next=17;break}return i.set(l,b),e.abrupt("continue",27);case 17:return e.next=19,n.provider.callContract({contract_address:Z,entry_point_selector:$,calldata:[l.toString()]});case 19:return j=e.sent,e.next=22,n.provider.callContract({contract_address:Z,entry_point_selector:ee,calldata:[l.toString()]});case 22:d=e.sent,console.log(j),O={id:l,name:_e(j.result[0]),token1:j.result[1],token1Amount:Be(j.result[2],j.result[3]),token2:j.result[4],token2Amount:Be(j.result[5],j.result[6]),fee:Number(j.result[7])/1e5,cfmm:Number(j.result[8]),shares:Be(d.result[0],d.result[1]),refresh:Date.now()},i.set(l,O),t&&(u.get(O.token1)||(h=u.size,console.log("new token1 n=",h),x={address:O.token1,id:h,name:"",symbol:"",icon:"",decimals:0},u.set(O.token1,x)),u.get(O.token2)||(m=u.size,console.log("new token2 n=",m),p={address:O.token2,id:m,name:"",symbol:"",icon:"",decimals:0},u.set(O.token2,p)));case 27:l++,e.next=12;break;case 30:if(!t){e.next=37;break}return v=[],u.forEach((function(e,t){var r=n.provider.callContract({contract_address:t,entry_point_selector:re,calldata:[]}).then((function(t){var n=_e(t.result[0]);console.log("name=",n),e.name=n}));v.push(r);var a=n.provider.callContract({contract_address:t,entry_point_selector:ae,calldata:[]}).then((function(t){var n=_e(t.result[0]);console.log("symbol=",n),e.symbol=n}));v.push(a);var c=n.provider.callContract({contract_address:t,entry_point_selector:ie,calldata:[]}).then((function(t){var n=Number(t.result[0]);e.decimals=n}));v.push(c)})),e.next=35,Promise.allSettled(v);case 35:Object(f.c)(P,u),console.log("tokens=",u);case 37:Object(f.c)(W,i);case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(f.b)(P).forEach((function(e,t){console.log("updateAllTokensDynamicData: token=",t),we(t)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("updatePoolDynamicData"),pe()){e.next=5;break}return e.abrupt("return",null);case 5:if(n=Object(f.b)(W),r=Object(f.b)(P),!1!==Object(g.getStarknet)().isConnected){e.next=10;break}throw Error("starknet wallet not connected");case 10:if(a=n.get(t)){e.next=13;break}throw Error("unknown pool "+t);case 13:if(c=r.get(a.token1),o=r.get(a.token2),c){e.next=17;break}throw Error("missing token "+a.token1);case 17:if(o){e.next=19;break}throw Error("missing token "+a.token2);case 19:we(a.token1),we(a.token2);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r,a,c,o,i,u,l,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(n=Object(g.getStarknet)(),r=[],a=pe()){e.next=8;break}return e.abrupt("return",null);case 8:if(c=Object(f.b)(D),!(o=c.get(t))){e.next=16;break}if(i=Date.now()-6e4,!(o.refresh>i)){e.next=14;break}return e.abrupt("return",null);case 14:e.next=17;break;case 16:Object(f.c)(D,(function(e){var n=new Map(e);if(!n.get(t)){var r={address:t,refresh:Date.now(),ammBalance:void 0,userBalance:void 0,userApproved:void 0};n.set(t,r)}return n}));case 17:return u=n.provider.callContract({contract_address:t,entry_point_selector:ce,calldata:[Q]}).then((function(e){var n=Be(e.result[0],e.result[1]);Object(f.c)(D,(function(e){var r=new Map(e),a=r.get(t);return a&&(a.ammBalance=n,r.set(a.address,a)),r}))})),r.push(u),l=n.provider.callContract({contract_address:t,entry_point_selector:ce,calldata:[Ce(a)]}).then((function(e){var n=Be(e.result[0],e.result[1]);Object(f.c)(D,(function(e){var r=new Map(e),a=r.get(t);return a&&(a.userBalance=n,r.set(a.address,a)),r}))})),r.push(l),b=n.provider.callContract({contract_address:t,entry_point_selector:oe,calldata:[Ce(a),Ce(Z)]}).then((function(e){var n=Be(e.result[0],e.result[1]);Object(f.c)(D,(function(e){var r=new Map(e),a=r.get(t);return a&&(a.userApproved=n,r.set(a.address,a)),r}))})),r.push(b),e.next=25,Promise.allSettled(r);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ye(e,t){var n={hash:e,type:t,status:"new",dismiss:!1};Object(f.c)(M,(function(e){return[].concat(Object(x.a)(e),[n])}))}var Se=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("approve"),r=Object(g.getStarknet)(),pe()){e.next=5;break}return e.abrupt("return",null);case 5:if(!1!==r.isConnected){e.next=7;break}throw Error("starknet wallet not connected");case 7:if(Re()){e.next=9;break}return e.abrupt("return",null);case 9:return e.next=11,r.signer.invokeFunction(t,te,[Ce(Z),Ce(n),Ce(0)]);case 11:return ye((a=e.sent).transaction_hash,"approve"),e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(g.getStarknet)(),a=pe()){e.next=4;break}return e.abrupt("return",null);case 4:if(!1!==r.isConnected){e.next=6;break}throw Error("starknet wallet not connected");case 6:if(Re()){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,r.signer.invokeFunction(t,ne,[Ce(a),Ce(n),Ce(0)]);case 10:return ye((c=e.sent).transaction_hash,"mint"),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r,a){var c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("swap"),c=Object(g.getStarknet)(),pe()){e.next=5;break}return e.abrupt("return",null);case 5:if(!1!==c.isConnected){e.next=7;break}throw Error("starknet wallet not connected");case 7:if(Re()){e.next=9;break}return e.abrupt("return",null);case 9:return e.next=11,c.signer.invokeFunction(Z,K,[Ce(t),Ce(n),Ce(r),Ce(0),Ce(a),Ce(0)]);case 11:return ye((o=e.sent).transaction_hash,"swap"),e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(u.a)(s.a.mark((function e(t,n){var r,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(g.getStarknet)(),n){e.next=3;break}return e.abrupt("return",null);case 3:if(!1!==r.isConnected){e.next=5;break}throw Error("starknet wallet not connected");case 5:return e.next=7,r.provider.callContract({contract_address:Z,entry_point_selector:Y,calldata:[Ce(t),Ce(n)]});case 7:return a=e.sent,c=Be(a.result[0],a.result[1]),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(e,t){return Object(m.BigNumber)(e).plus(Object(m.BigNumber)(t).times(Object(m.BigNumber)(2).pow(128))).toString(10)},Ce=function(e){return Object(m.BigNumber)(e).toString(10)};function _e(e){for(var t=e.substr(2).toString(),n="",r=0;r<t.length;r+=2)n+=String.fromCharCode(parseInt(t.substr(r,2),16));return n}function Ie(e){return e.length<=8?e:e.substr(0,5)+"..."+e.substr(-3)}var Te=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.getStarknet)().provider.getTransactionStatus(t);case 2:if(n=e.sent,!(r=Object(f.b)(M))||!r.find((function(e){return e.hash===t&&e.status!==n.tx_status}))){e.next=8;break}return console.log("getTransactionUpdate: ",n.tx_status,t),Object(f.c)(M,(function(e){var r=new Array;return e.forEach((function(e){if(console.log("Inside forEach: ",e.hash,e.status),e.hash===t){var a=Object.assign({},e);a.status=n.tx_status,"ACCEPTED_ON_L2"!==a.status&&"ACCEPTED_ON_L1"!==a.status||(a.dismiss=!0),r.push(a)}else r.push(e)})),r})),e.abrupt("return",n.tx_status);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var We=function(e,t){var n=Object(f.b)(W),r=Object(f.b)(P);if(!r.get(e)||!r.get(t))throw Error("Unknown tokens");for(var a=function(e,t){return Object(m.BigNumber)(e)<Object(m.BigNumber)(t)?[e,t]:[t,e]}(e,t),c=Object(h.a)(a,2),o=c[0],i=c[1],s=1;s<=n.size;s++){var u=n.get(s);if(!u)throw Error("missing pool "+s);if(u.token1===o&&u.token2===i)return s}return 0};function Pe(e,t){var n=Object(f.b)(P),r=n.get(e);return void 0===r?(me("float_to_decimal_int: Undefined pool for token "+e+", tokens size="+n.size+" amount="+t,"warning"),"0"):Object(m.BigNumber)(t).shiftedBy(r.decimals).toFixed(0,m.BigNumber.ROUND_DOWN)}function De(e,t){var n=Object(f.b)(P),r=n.get(e);return void 0===r?(me("decimal_int_to_float: Undefined pool for token "+e+", tokens size="+n.size+" amount="+t,"warning"),"0"):Object(m.BigNumber)(t).shiftedBy(-r.decimals).toString(10)}var Me=function(e,t,n,r){var a=We(e,t);if(0!==a&&void 0!==n&&null!==n){if(""===n)return"";var c=Pe(e,n),o=Object(f.b)(W).get(a);if(void 0!==o){var i="0",s="0";if(o.token1===e?(i=o.token1Amount,s=o.token2Amount):(i=o.token2Amount,s=o.token1Amount),Object(m.BigNumber)(i).lte(0)||Object(m.BigNumber)(s).lte(0))throw Error("token reserve cannot be 0");return De(t,1===r?Object(m.BigNumber)(s).times(Object(m.BigNumber)(c)).div(Object(m.BigNumber)(i).plus(Object(m.BigNumber)(c))).toFixed(0,m.BigNumber.ROUND_DOWN):Object(m.BigNumber)(s).times(Object(m.BigNumber)(c)).div(Object(m.BigNumber)(i).minus(Object(m.BigNumber)(c))).toFixed(0,m.BigNumber.ROUND_DOWN))}me("Undefined pool id="+a,"warning")}},Le=function(e,t,n){var r=We(e,t);if(0!==r&&void 0!==n&&null!==n){if(""===n)return"";var a=Pe(e,n);if(void 0!==Object(f.b)(W).get(r)){var c=fe(r,e,t,a);return console.log("Other Token Add Liquidity: ",c,a),De(t,c)}me("Undefined pool id="+r,"warning")}},ze=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r,a,c,o){var i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("AMM_add_liquidity: ",r,Ce(r)),i=Object(g.getStarknet)(),u=pe(),!1!==i.isConnected&&u){e.next=5;break}return e.abrupt("return",null);case 5:if(Re()){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,i.signer.invokeFunction(Z,V,[Ce(t),Ce(n),Ce(0),Ce(r),Ce(0),Ce(a),Ce(c),Ce(0),Ce(o),Ce(0)]);case 9:return l=e.sent,e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a,c,o){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(u.a)(s.a.mark((function e(t,n,r,a){var c,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("withdraw_liquidity"),c=Object(g.getStarknet)(),o=pe(),!1!==c.isConnected&&o){e.next=5;break}return e.abrupt("return",null);case 5:if(console.log("Calling Starknet: withdraw_liquidity with ",t,n,r,a),Re()){e.next=8;break}return e.abrupt("return",null);case 8:return e.next=10,c.signer.invokeFunction(Z,J,[Ce(t),Ce(n),Ce(0),Ce(r),Ce(0),Ce(a),Ce(0)]);case 10:return ye((i=e.sent).transaction_hash,"withdraw_liquidity"),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Re=function(){return!!Object(f.b)(H)||(me("Previous Transaction still being processed by your wallet, try again later","error"),!1)},Ue="https://my-json-server.typicode.com/mottyl/static_data",qe=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ue,"/amminfo"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,console.log("AMM info data:",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r,a,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ue,"/pools"));case 2:return t=e.sent,e.next=5,t.json();case 5:for(n=e.sent,r=new Map,a=1;a<=n.numberOfPools;a++)c=n[a],o={id:a,name:c.poolName,token1:c.tokenAAddress,token1Amount:Be(c.tokenAReserves[0],c.tokenAReserves[1]),token2:c.tokenBAddress,token2Amount:Be(c.tokenBReserves[0],c.tokenBReserves[1]),fee:Number(c.feePercentage)/1e5,cfmm:Number(c.cfmm),shares:Be(c.shares[0],c.shares[1]),refresh:Date.now()},console.log("Pool = ",o),r.set(a,o);Object(f.c)(W,r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r,a,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ue,"/tokens"));case 2:return t=e.sent,e.next=5,t.json();case 5:for(n=e.sent,r=new Map,a=0;a<n.numberOfTokens;a++)c=n[a],o={address:c.tokenAddress,id:a,name:c.tokenName,symbol:c.tokenSymbol,icon:c.tokenIcon,decimals:c.tokenDecimals},r.set(c.tokenAddress,o),console.log("Token = ",o);Object(f.c)(P,r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t(),n(),r();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=n(3),He=n(20),Ke=n(369),Ve=n(370),Je=n(371),Ye=n(353),Ze=n(349),Qe=n(354),Xe=n(346),$e=n(172),et=n.n($e),tt=n(173),nt=n.n(tt),rt=n(75),at=n.n(rt),ct=n(67),ot=n(170),it=n.n(ot),st=BigInt(Math.pow(2,127)-1).toString();var ut=function(e){var t=Object(O.f)(P),n=Object(h.a)(t,1)[0],a=Object(O.f)(T),c=Object(h.a)(a,1)[0],o=Object(r.useState)(!1),i=Object(h.a)(o,2),l=i[0],b=i[1],j=Object(O.f)(U("approve")),d=Object(h.a)(j,1)[0],f=Object(r.useState)({}),x=Object(h.a)(f,2),m=x[0],p=x[1];Object(r.useEffect)((function(){Oe(d,m,b)}),[d,m]);var g=e.token,v=e.tokenAmount,k=e.activePoolId,w=e.tokenInRange,y=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),t=st||Pe(g,v),e.prev=2,e.next=5,Se(g,t);case 5:if(n=e.sent){e.next=8;break}throw Error("Cannot perform transaction");case 8:p((function(e){return Object(He.a)(Object(He.a)({},e),{},Object(Ge.a)({},n.transaction_hash,"new"))})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),me("Approve user abort","error"),b(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}();if(c&&g&&v>0&&k>0&&w&&!de(g,v)){var S=n.get(g);if(S)return Object(C.jsx)(Xe.a,{color:"inherit",variant:"outlined",fullWidth:!0,loading:!(!l&&null!==je(g)&&void 0!==je(g)),loadingPosition:"start",startIcon:Object(C.jsx)(it.a,{}),onClick:y,children:null===je(g)||void 0===je(g)?"CHECKING "+S.symbol+" ALLOWANCE":"APPROVE "+S.symbol})}return Object(C.jsx)("div",{})};var lt=function(e){var t=e.token,n=e.showMaxButton,r=e.setMaxAmountHandler,a=e.amount;return void 0===a||""===a?Object(C.jsx)("div",{}):Object(C.jsx)("div",{children:Object(C.jsxs)(N.a,{container:!0,children:[Object(C.jsx)(j.a,{fontSize:13,sx:{ml:2,mt:.5},children:"Balance: "+be(a)}),n&&Object(C.jsx)(E.a,{size:"small",sx:{ml:-1.5,mt:-.2},onClick:function(){return r(t,a)},children:"max"})]})})},bt=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.getStarknet)({showModal:!0}).enable();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),jt=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g.getStarknet)().enable();case 3:return t=e.sent,n=Object(h.a)(t,1),r=n[0],e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),dt=function(){try{return Object(g.getStarknet)().provider.baseUrl.includes("alpha-mainnet.starknet.io")?"mainnet-alpha":"goerli-alpha"}catch(e){return"goerli-alpha"}},Ot=function(){return"mainnet-alpha"===dt()?"https://voyager.online":"https://goerli.voyager.online"},ft=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(g.getStarknet)().on("accountsChanged",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ht=n(88),xt=function(e){ht.a.pageview(e)},mt=function(e){!function(e,t,n){ht.a.event({category:e,action:t,label:n})}("button","click",e)},pt=n(171),gt=n.n(pt);var vt=function(e){var t=Object(r.useState)(0),n=Object(h.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(""),i=Object(h.a)(o,2),l=i[0],b=i[1],j=Object(r.useState)(""),d=Object(h.a)(j,2),f=d[0],x=d[1],m=Object(r.useState)(!1),p=Object(h.a)(m,2),g=p[0],v=p[1],k=Object(O.f)(T),w=Object(h.a)(k,2),y=w[0],S=w[1],N=Object(O.f)(W),A=Object(h.a)(N,1)[0],B=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mt("connect_wallet"),c(1),e.prev=2,e.next=5,bt();case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(2),me("Wallet not found","error"),c(0),e.abrupt("return");case 12:return e.t1=S,e.next=15,jt();case 15:e.t2=e.sent,(0,e.t1)(e.t2),c(2),me("Wallet connected","success");case 19:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}();if(Object(r.useEffect)((function(){if(!e.secondary){var t=function(){var t=Object(u.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.secondary){t.next=2;break}return t.abrupt("return");case 2:return console.log("handleWalletChange: ",n),t.t0=S,t.next=6,jt();case 6:t.t1=t.sent,(0,t.t0)(t.t1),b(Ot()),x(dt()),ve(),me("Wallet network/account change","success");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();console.log("address has changed, ",y),y&&(c(2),ve(),b(Ot()),x(dt()),e.secondary||g||(ft(t),v(!0)))}}),[y,e.secondary,g,S]),Object(r.useEffect)((function(){e.secondary}),[A,e.secondary]),e.secondary)return""!==y||2===a?Object(C.jsx)("div",{}):1===a?Object(C.jsx)("div",{children:Object(C.jsx)(E.a,{color:"inherit",fullWidth:!0,variant:"outlined",disabled:!0,children:"Connecting..."})}):Object(C.jsx)("div",{children:Object(C.jsxs)(E.a,{className:"connect-wallet",color:"inherit",fullWidth:!0,variant:"contained",onClick:B,children:[Object(C.jsx)(at.a,{fontSize:"medium",sx:{mr:1}}),"CONNECT WALLET"]})});var _=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("opening wallet"),window.open(l+"/contract/"+y,"_blank");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return 2===a?(console.log("Wallet is connected!",y),Object(C.jsx)("div",{children:Object(C.jsxs)(E.a,{color:"inherit",variant:"outlined",onClick:_,children:[Object(C.jsx)(gt.a,{sx:{mr:1},style:{fill:"lightgreen",fontSize:10}})," ",f," ",Ie(y)," "]})})):1===a?(console.log("Wallet is being connected!",y),Object(C.jsx)("div",{children:Object(C.jsx)(E.a,{color:"inherit",variant:"outlined",disabled:!0,children:"Connecting..."})})):Object(C.jsx)("div",{children:Object(C.jsx)(E.a,{color:"inherit",variant:"outlined",onClick:B,children:"Connect Wallet"})})};Number.MAX_SAFE_INTEGER;var kt,wt=function(){var e=Object(r.useState)(0),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(h.a)(c,2),i=o[0],l=o[1],b=Object(r.useState)(""),d=Object(h.a)(b,2),x=d[0],p=d[1],g=Object(r.useState)(""),w=Object(h.a)(g,2),S=w[0],A=w[1],B=Object(r.useState)(""),_=Object(h.a)(B,2),M=_[0],L=_[1],F=Object(r.useState)(0),R=Object(h.a)(F,2),q=R[0],G=R[1],H=Object(r.useState)(!1),K=Object(h.a)(H,2),V=K[0],J=K[1],Y=Object(O.f)(P),Z=Object(h.a)(Y,1)[0],Q=Object(O.f)(D),X=Object(h.a)(Q,1)[0],$=Object(O.f)(W),ee=Object(h.a)($,1)[0],te=Object(O.f)(T),ne=Object(h.a)(te,1)[0],re=Object(O.f)(U("swap")),ae=Object(h.a)(re,1)[0],ce=Object(r.useState)({}),oe=Object(h.a)(ce,2),ie=oe[0],je=oe[1];Object(r.useEffect)((function(){xt("swap")}),[]),Object(r.useEffect)((function(){Oe(ae,ie,J)}),[ae,ie]),Object(r.useEffect)((function(){}),[X,ee]);var pe=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n>0?ke(n):(i&&we(i),S&&we(S));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(ct.a)(pe,15e3);var ge=function(e,t){var n=/^(([0-9]+[.]?[0-9]*)|([.][0-9]+))$/;e!==i||""!==t&&!n.test(t)||(p(t),G(1)),e!==S||""!==t&&!n.test(t)||(L(t),G(2))};Object(r.useEffect)((function(){if(i&&S){var e=We(i,S);if(a(e),q<=1)if(e>0){var t=Me(i,S,x,1);console.log("calcOtherTokenAmount: (token1 leading) ",t),void 0!==t&&t!==M&&L(t)}else L(0);else if(e>0){var n=Me(S,i,M,2);console.log("calcOtherTokenAmount: (token2 leading) ",n),void 0!==n&&n<0?n=0:void 0!==n&&n!==x&&p(n)}else p(0)}else q<=1?L(""):p("")}),[i,S,x,M,q]);var ve=function(e){var t=[];return Z.forEach((function(n,r){e!==r&&t.push(Object(C.jsx)(y.a,{value:r,children:Object(C.jsxs)(N.a,{container:!0,direction:"row",children:[Object(C.jsx)(N.a,{sx:{mr:1,mb:-1},children:Object(C.jsx)("img",{src:n.icon,alt:"",width:"24",height:"24"})}),Object(C.jsx)(N.a,{children:Object(C.jsx)(j.a,{children:n.symbol||n.address})})]})},r))})),t},ye=function(){var e=parseFloat(Object(f.b)(z))/100;return Object(m.BigNumber)(M).times(Object(m.BigNumber)(1).minus(Object(m.BigNumber)(e)))},Se=function(){var e=Object(u.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),t=ye(),e.prev=2,e.next=5,Ee(n,i,Pe(i,x),Pe(S,t));case 5:if(r=e.sent){e.next=8;break}throw Error("Cannot perform transaction");case 8:je((function(e){return Object(He.a)(Object(He.a)({},e),{},Object(Ge.a)({},r.transaction_hash,"new"))})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),me("Swap Request: User Aborted","error"),J(!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),Ne=Object(r.useState)(0),Ae=Object(h.a)(Ne,2),Be=Ae[0],Ce=Ae[1],_e=Object(O.f)(z),Ie=Object(h.a)(_e,1)[0];return Object(C.jsx)(v.a,{sx:{p:2,border:"0px solid",mt:1,mb:4,boxShadow:2},children:Object(C.jsxs)("div",{children:[Object(C.jsx)(N.a,{container:!0,sx:{mb:2},children:Object(C.jsx)(I,{name:"Swap"})}),Object(C.jsx)(Ke.a,{sx:{p:2,boxShadow:2,mb:-4},children:Object(C.jsxs)(N.a,{container:!0,spacing:2,sx:{},children:[Object(C.jsxs)(N.a,{item:!0,xs:6,children:[Object(C.jsxs)(Je.a,{fullWidth:!0,children:[Object(C.jsx)(Ye.a,{id:"token1-label",children:"Token 1:"}),Object(C.jsx)(Ze.a,{labelId:"token1-label",id:"token1-select",value:i,label:"Token 1",onChange:function(e){var t=e.target.value;l(t),we(t),mt("swap-token1")},children:ve(S)})]}),Object(C.jsx)(lt,{token:i,amount:he(i),showMaxButton:!0,setMaxAmountHandler:ge})]}),Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Je.a,{fullWidth:!0,children:Object(C.jsx)(Qe.a,{helperText:"Amount to swap",id:"token1-amount",inputProps:{variant:"outlined",placeholder:"0.00",type:"string",autoComplete:"off","aria-labelledby":"input-amount"},value:x||"",onChange:function(e){return ge(i,e.target.value)},error:xe(i,x)===se,disabled:""===i})})})]})}),Object(C.jsx)(N.a,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",children:Object(C.jsx)(k.a,{size:"large",disabled:!i&&!S,onClick:function(){mt("swap-switchtokens");var e=i,t=x;l(S),A(e),p(M),L(t),G(1===q?2:1)},children:Object(C.jsx)(nt.a,{style:{fontSize:40}})})}),Object(C.jsx)(Ke.a,{sx:{p:2,mt:-3,boxShadow:2},children:Object(C.jsxs)(N.a,{container:!0,spacing:2,children:[Object(C.jsxs)(N.a,{item:!0,xs:6,children:[Object(C.jsxs)(Je.a,{fullWidth:!0,children:[Object(C.jsx)(Ye.a,{id:"token2-label",children:"Token 2:"}),Object(C.jsx)(Ze.a,{labelId:"token2-label",id:"token2-select",value:S,label:"Token 2",onChange:function(e){var t=e.target.value;A(t),we(t),mt("swap-token2")},children:ve(i)})]}),Object(C.jsx)(lt,{token:S,amount:he(S),showMaxButton:!1})]}),Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Je.a,{fullWidth:!0,children:Object(C.jsx)(Qe.a,{helperText:"Estimated amount received",id:"token2-amount",inputProps:{variant:"outlined",placeholder:"0.00",type:"string",autoComplete:"off","aria-labelledby":"input-amount"},value:M||"",onChange:function(e){return ge(S,e.target.value)},disabled:""===S})})})]})}),function(){if(i&&S&&x&&!Object(m.BigNumber)(x).isZero()&&M&&!Object(m.BigNumber)(M).isZero()){var e=fe(n,i,S);console.log("CurrentPrice: ",e);var t=ye(),r=Z.get(i).symbol,a=Z.get(S).symbol,c=parseFloat(Ie),o=Object(m.BigNumber)(M).div(Object(m.BigNumber)(x)),s=Object(m.BigNumber)(x).div(Object(m.BigNumber)(M)),u=Object(m.BigNumber)(1).minus(Object(m.BigNumber)(o).div(Object(m.BigNumber)(e))),l=u.gt(.05)?"tomato":u.gt(.03)?"orange":"inherit",b=Object(C.jsxs)(C.Fragment,{children:["1 ",r," = ",be(o)," ",a]}),d=Object(C.jsxs)(C.Fragment,{children:["1 ",a," = ",be(s)," ",r]});return Object(C.jsxs)(N.a,{children:[Object(C.jsx)(Ke.a,{sx:{mb:.5,mt:2},children:Object(C.jsx)(Ve.a,{onClick:function(){return Ce(!Be)},children:Object(C.jsx)(j.a,{fontSize:13,fontWeight:"medium",sx:{ml:1,mr:1},children:Be?d:b})})}),Object(C.jsxs)(Ke.a,{style:{backgroundColor:l},sx:{mb:2},children:[Object(C.jsxs)(j.a,{fontSize:13,fontWeight:"medium",sx:{ml:1,mr:1},children:["Minimum amount received (slippage=",c.toFixed(2),"%): ",be(t)]}),Object(C.jsxs)(j.a,{fontSize:13,fontWeight:"medium",sx:{ml:1,mr:1},children:["Price impact: ",be(u,!0),"%"]})]})]})}return Object(C.jsx)("div",{})}(),Object(C.jsxs)(Ke.a,{sx:{minWidth:275,mb:2,mt:3,boxShadow:2},children:[Object(C.jsx)(vt,{secondary:"true"}),Object(C.jsx)(ut,{token:i,tokenAmount:x,activePoolId:n,tokenInRange:xe(i,x)===ue}),function(){mt("swap");var e=xe(i,x),t=function(e,t,n){if(!t||e<=0)return!1;var r=Object(f.b)(W).get(e);if(!r)throw Error("missing pool "+e);var a=Pe(t,n);return r.token1===t?Object(m.BigNumber)(a).gt(Object(m.BigNumber)(r.token1Amount)):Object(m.BigNumber)(a).gt(Object(m.BigNumber)(r.token2Amount))}(n,S,M);if(S&&x>0&&0!==n&&e===ue&&!t)return Object(C.jsx)(Xe.a,{color:"primary",variant:"contained",fullWidth:!0,disabled:!(ne&&de(i,x)||V),loading:V,loadingPosition:"start",startIcon:Object(C.jsx)(et.a,{}),onClick:Se,children:V?"SWAPPING":"SWAP"});if(ne&&x>0&&e!==ue&&!t)return Object(C.jsx)(Xe.a,{color:"primary",variant:"contained",fullWidth:!0,disabled:!0,loading:e===le,loadingPosition:"start",startIcon:Object(C.jsx)(at.a,{}),children:e===se?"AMOUNT EXCEEDS WALLET BALANCE":"CHECKING WALLET BALANCE"});if(i&&S&&0===n)return Object(C.jsx)(E.a,{color:"primary",variant:"contained",fullWidth:!0,disabled:!0,children:"NOT A VALID Pool"});if(i&&S&&n&&M&&t)return Object(C.jsx)(E.a,{color:"primary",variant:"contained",fullWidth:!0,disabled:!0,children:"INSUFFICIENT LIQUIDITY IN POOL"});if(ne){var r="";if(i||S||(r="SELECT TOKENS"),(!i&&S||i&&!S)&&(r="SELECT TOKEN"),!i||!S||x&&M||(r="ENTER AMOUNT"),""!==r)return Object(C.jsx)(E.a,{color:"secondary",variant:"contained",fullWidth:!0,disabled:!0,children:r})}return Object(C.jsx)("div",{})}()]})]})})},yt=n(376),St=n(175),Nt=n.n(St),Et=n(5),At=n(364),Bt=n(342),Ct=n(377),_t=n(48),It=n(360),Tt=n(361),Wt=n(373),Pt=n(351),Dt=n(374),Mt=n(375),Lt=n(174),zt=n.n(Lt),Ft=Object(Et.a)(At.a)((function(e){var t=e.theme;return Object(He.a)(Object(He.a)({},t.typography.body2),{},{padding:t.spacing(0),textAlign:"left",color:t.palette.text.secondary})})),Rt=Object(Et.a)(S.a)(kt||(kt=Object(_t.a)(["\n    width: 42px;\n"])));function Ut(e){var t=Object(r.useState)(!1),n=Object(h.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(25),i=Object(h.a)(o,2),l=i[0],b=i[1],d=Object(r.useState)(""),x=Object(h.a)(d,2),p=x[0],g=x[1],k=Object(r.useState)(""),w=Object(h.a)(k,2),y=w[0],S=w[1],A=Object(r.useState)(0),B=Object(h.a)(A,2),_=B[0],T=B[1],W=Object(O.f)(U("withdraw_liquidity")),P=Object(h.a)(W,1)[0],D=Object(r.useState)({}),M=Object(h.a)(D,2),L=M[0],z=M[1];Object(r.useEffect)((function(){Oe(P,L,T)}),[P,L]);Object(r.useEffect)((function(){Object(m.BigNumber)(p).isZero()&&S("0"),Object(m.BigNumber)(y).isZero()&&g("0"),g(be(Object(m.BigNumber)(e.token1Amount).times(l).shiftedBy(-2))),S(be(Object(m.BigNumber)(e.token2Amount).times(l).shiftedBy(-2))),T(0)}),[a,p,y,l,e.token1Amount,e.token2Amount]);var F=function(){T(0),c(!1)},q=function(t){b(t),function(t){g(be(Object(m.BigNumber)(e.token1Amount).times(t).shiftedBy(-2))),S(be(Object(m.BigNumber)(e.token2Amount).times(t).shiftedBy(-2)))}(t),console.log("Remove Liquidity, updateState: ",p,y,e.token1Amount,e.token2Amount)},G=function(){var t=Object(u.a)(s.a.mark((function t(){var n,r,a,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Withdraw percent: ",l),n=parseFloat(Object(f.b)(R))/100,r=Object(m.BigNumber)(e.balance).times(Object(m.BigNumber)(l)).shiftedBy(-2).toFixed(2,m.BigNumber.ROUND_DOWN),a=Object(m.BigNumber)(p).times(Object(m.BigNumber)(1).minus(Object(m.BigNumber)(n).shiftedBy(-2))).toString(10,m.BigNumber.ROUND_DOWN),c=Object(m.BigNumber)(y).times(Object(m.BigNumber)(1).minus(Object(m.BigNumber)(n).shiftedBy(-2))).toString(10,m.BigNumber.ROUND_DOWN),T(1),console.log("handleWithdraw: ",r,a,c),t.prev=7,t.next=10,Fe(e.poolId,r,Pe(e.token1,a),Pe(e.token2,c));case 10:if(o=t.sent){t.next=13;break}throw Error("Cannot perform transaction");case 13:z((function(e){return Object(He.a)(Object(He.a)({},e),{},Object(Ge.a)({},o.transaction_hash,"new"))})),t.next=20;break;case 16:t.prev=16,t.t0=t.catch(7),me("Remove Liquidity: User Aborted","error"),T(0);case 20:F();case 21:case"end":return t.stop()}}),t,null,[[7,16]])})));return function(){return t.apply(this,arguments)}}();return Object(C.jsxs)("div",{children:[Object(C.jsx)(E.a,{variant:"contained",sx:{textWeight:"bold"},onClick:function(){c(!0)},children:"WITHDRAW"}),Object(C.jsx)(It.a,{open:a,onClose:F,children:Object(C.jsxs)(v.a,{sx:{p:2,border:"0px solid",boxShadow:2},children:[Object(C.jsx)(N.a,{container:!0,sx:{mb:2},children:Object(C.jsx)(I,{name:"Remove Liquidity"})}),Object(C.jsxs)(Tt.a,{children:[Object(C.jsxs)(Ke.a,{sx:{p:2,border:"0px solid",boxShadow:2,mb:2},children:[Object(C.jsx)(Wt.a,{children:"Choose amount of liquidity shares to remove"}),Object(C.jsx)(v.a,{sx:{width:500,mt:3,ml:2},children:Object(C.jsxs)(N.a,{container:!0,spacing:2,alignItems:"center",children:[Object(C.jsx)(N.a,{item:!0,xs:!0,sx:{mt:2,ml:2,mr:2},children:Object(C.jsx)(Pt.a,{"aria-label":"Custom marks",defaultValue:25,valueLabelDisplay:"auto",marks:[{value:0,label:"0%"},{value:25,label:"25%"},{value:50,label:"50%"},{value:75,label:"75%"},{value:100,label:"100%"}],value:"number"===typeof l?l:0,onChange:function(e,t){q(t)},"aria-labelledby":"input-slider"})}),Object(C.jsx)(N.a,{item:!0,sx:{ml:2,mr:4},children:Object(C.jsx)(Rt,{value:l,size:"small",onChange:function(e){var t=""===e.target.value?"":Number(e.target.value);q(t),console.log("handle input change")},onBlur:function(){l<0?b(0):l>100&&b(100)},inputProps:{step:1,min:0,max:100,type:"number","aria-labelledby":"input-slider"}})})]})})]}),Object(C.jsxs)(Ke.a,{sx:{p:2,border:"0px solid",boxShadow:2,mb:0},children:[Object(C.jsx)(Dt.a,{title:"Amount Received",disableTypography:!0,sx:{fontSize:18,mt:0}}),Object(C.jsxs)(N.a,{item:!0,container:!0,alignItems:"center",spacing:2,sx:{width:400,ml:2},children:[Object(C.jsxs)(N.a,{item:!0,xs:6,children:[Object(C.jsxs)(Bt.a,{direction:"row",spacing:0,alignItems:"center",children:[Object(C.jsx)(Ft,{sx:{boxShadow:0,mr:1},style:{backgroundColor:"transparent"},children:Object(C.jsx)("img",{src:e.token1Icon,alt:"",width:"32",height:"32"})}),Object(C.jsx)(Ft,{sx:{boxShadow:0},children:Object(C.jsxs)(j.a,{sx:{fontSize:18},children:[e.token1Symbol,":"]})})]}),Object(C.jsxs)(Bt.a,{direction:"row",spacing:0,alignItems:"center",children:[Object(C.jsx)(Ft,{sx:{boxShadow:0,mr:1},style:{backgroundColor:"transparent"},children:Object(C.jsx)("img",{src:e.token2Icon,alt:"",width:"32",height:"32"})}),Object(C.jsx)(Ft,{sx:{boxShadow:0},children:Object(C.jsxs)(j.a,{sx:{fontSize:18},children:[e.token2Symbol,":"]})})]})]}),Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsxs)(Bt.a,{children:[Object(C.jsx)(Ft,{sx:{boxShadow:0},children:Object(C.jsx)(j.a,{sx:{fontSize:18},children:be(p)})}),Object(C.jsx)(Ft,{sx:{boxShadow:0},children:Object(C.jsx)(j.a,{sx:{fontSize:18},children:be(y)})})]})})]})]})]}),Object(C.jsxs)(Mt.a,{children:[Object(C.jsx)(E.a,{variant:"contained",style:{backgroundColor:"gray"},onClick:F,children:"Cancel"}),Object(C.jsx)(Xe.a,{color:"primary",variant:"contained",disabled:!("0"!==p&&"0"!==y&&!_),loading:1===_,loadingPosition:"start",startIcon:Object(C.jsx)(zt.a,{}),onClick:G,children:_?"REMOVING":"REMOVE"})]})]})})]})}var qt=Object(Et.a)(At.a)((function(e){var t=e.theme;return Object(He.a)(Object(He.a)({},t.typography.body2),{},{padding:t.spacing(0),textAlign:"left",color:t.palette.text.secondary})}));var Gt=function(e){var t=Object(O.f)(P),n=Object(h.a)(t,1)[0],r=Object(O.f)(W),a=Object(h.a)(r,1)[0],c=a.get(e.poolId);if(!c||!c.shares)return Object(C.jsx)("div",{});var o=function(){var t=a.get(e.poolId).token1;return n.get(t)},i=function(){return o(e.poolId).symbol},s=function(){return o(e.poolId).icon},u=function(){var t=a.get(e.poolId);return t.shares?Object(m.BigNumber)(e.balance).div(Object(m.BigNumber)(t.shares)):"0"},l=function(){return De(c.token1,function(){var t=a.get(e.poolId),n=u();return Object(m.BigNumber)(n).times(t.token1Amount)}())},b=function(){var t=a.get(e.poolId).token2;return n.get(t)},d=function(){return b(e.poolId).symbol},f=function(){return b(e.poolId).icon},x=function(){return De(c.token1,function(){var t=a.get(e.poolId),n=u();return Object(m.BigNumber)(n).times(t.token2Amount)}())};return Object(C.jsxs)(Ke.a,{sx:{p:2,border:"0px solid",boxShadow:2,mb:5},children:[Object(C.jsx)(j.a,{sx:{fontSize:18,fontWeight:"500"},children:"Your Position"}),Object(C.jsx)(yt.a,{children:Object(C.jsxs)(N.a,{item:!0,container:!0,direction:"row",alignItems:"center",children:[Object(C.jsxs)(N.a,{item:!0,xs:6,children:[Object(C.jsxs)(Bt.a,{direction:"row",spacing:0,alignItems:"center",children:[Object(C.jsx)(qt,{sx:{boxShadow:0,mr:0},style:{backgroundColor:"transparent"},children:Object(C.jsx)("img",{src:s(),alt:"",width:"32",height:"32"})}),Object(C.jsx)(qt,{sx:{boxShadow:0,ml:-1,mr:1},style:{backgroundColor:"transparent"},children:Object(C.jsx)("img",{src:f(),alt:"",width:"32",height:"32"})}),Object(C.jsx)(qt,{sx:{boxShadow:0},children:Object(C.jsxs)(j.a,{sx:{fontSize:24,fontWeight:"normal"},color:"text.primary",gutterBottom:!0,children:[i()," / ",d(),":"]})})]}),Object(C.jsx)(j.a,{sx:{fontSize:16,fontWeight:"normal"},color:"text.primary",children:"Your Pool Share:"}),Object(C.jsxs)(j.a,{sx:{fontSize:16,fontWeight:"normal"},color:"text.primary",children:["Pooled ",i(),":"]}),Object(C.jsxs)(j.a,{sx:{fontSize:16,fontWeight:"normal"},color:"text.primary",children:["Pooled ",d(),":"]})]}),Object(C.jsxs)(N.a,{item:!0,xs:6,textAlign:"right",children:[Object(C.jsx)(j.a,{sx:{fontSize:24,fontWeight:"normal"},color:"text.primary",gutterBottom:!0,children:e.balance}),Object(C.jsxs)(j.a,{sx:{fontSize:16,fontWeight:"bold"},color:"text.primary",children:[be(u(),!0),"%"]}),Object(C.jsx)(j.a,{sx:{fontSize:16,fontWeight:"bold"},color:"text.primary",children:be(l())}),Object(C.jsx)(j.a,{sx:{fontSize:16,fontWeight:"bold"},color:"text.primary",children:be(x())})]})]})}),Object(C.jsx)(Ct.a,{children:Object(C.jsx)(N.a,{item:!0,container:!0,justifyContent:"center",children:Object(C.jsx)(Ut,{poolId:e.poolId,balance:e.balance,token1Symbol:i(),token2Symbol:d(),token1Icon:s(),token2Icon:f(),token1:o().address,token2:b().address,token1Amount:l(),token2Amount:x()})})})]})};var Ht=function(){var e=Object(O.f)(W),t=Object(h.a)(e,1)[0],n=Object(O.f)(T),a=Object(h.a)(n,1)[0],c=Object(r.useState)((function(){return new Map})),o=Object(h.a)(c,2),i=o[0],l=o[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t,a);case 2:(n=e.sent)&&l((function(e){var r=new Map(e);return r.set(t,n),r}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a&&t.forEach((function(t){!function(t){e.apply(this,arguments)}(t.id)}))}),[a,t]),Object(C.jsx)("div",{children:function(){var e=[];return i.forEach((function(t,n){Object(m.BigNumber)(t).isZero()||(e.push(Object(C.jsx)(Gt,{poolId:n,balance:t},n)),ke(n))})),e}()})};var Kt=function(){var e=Object(O.f)(P),t=Object(h.a)(e,1)[0],n=Object(O.f)(W),a=Object(h.a)(n,1)[0],c=Object(r.useState)(""),o=Object(h.a)(c,2),i=o[0],l=o[1],b=Object(r.useState)(""),d=Object(h.a)(b,2),x=d[0],p=d[1],g=Object(r.useState)(""),k=Object(h.a)(g,2),w=k[0],S=k[1],A=Object(r.useState)(""),B=Object(h.a)(A,2),_=B[0],M=B[1],L=Object(r.useState)(0),z=Object(h.a)(L,2),R=z[0],q=z[1],G=Object(O.f)(T),H=Object(h.a)(G,1)[0],K=Object(r.useState)(!1),V=Object(h.a)(K,2),J=V[0],Y=V[1],Z=Object(r.useState)(0),Q=Object(h.a)(Z,2),X=Q[0],$=Q[1],ee=Object(O.f)(U("add_liquidity")),te=Object(h.a)(ee,1)[0],ne=Object(r.useState)({}),re=Object(h.a)(ne,2),ae=re[0],ce=re[1],oe=Object(O.f)(D),ie=Object(h.a)(oe,1)[0];Object(r.useEffect)((function(){}),[ie,a]),Object(r.useEffect)((function(){xt("pools")}),[]),Object(r.useEffect)((function(){Oe(te,ae,Y)}),[te,ae]),Object(r.useEffect)((function(){if(i&&w){var e=We(i,w);if(q(e),X<=1)if(e>0){var t=Le(i,w,x);void 0!==t&&M(t)}else M(0);else if(e>0){var n=Le(w,i,_);void 0!==n&&p(n)}else p(0)}}),[i,w,x,_,X]);var je=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R>0?ke(R):(i&&we(i),w&&we(w));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(ct.a)(je,15e3);var pe=function(e,t){var n=/^(([0-9]+[.]?[0-9]*)|([.][0-9]+))$/;e!==i||""!==t&&!n.test(t)||(p(t),$(1)),e!==w||""!==t&&!n.test(t)||(M(t),$(2))},ge=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),t=parseFloat(Object(f.b)(F))/100,n=Object(m.BigNumber)(x).times(Object(m.BigNumber)(1).minus(Object(m.BigNumber)(t))).toString(10),r=Object(m.BigNumber)(_).times(Object(m.BigNumber)(1).minus(Object(m.BigNumber)(t))).toString(10),console.log("Add Liquidity slippage: ",t),console.log("Add Liquidity minAmountOut: ",n,Pe(i,n)),e.prev=6,e.next=9,ze(i,Pe(i,x),Pe(i,n),w,Pe(w,_),Pe(w,r));case 9:if(a=e.sent){e.next=12;break}throw Error("Cannot perform transaction");case 12:ce((function(e){return Object(He.a)(Object(He.a)({},e),{},Object(Ge.a)({},a.transaction_hash,"new"))})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(6),me("User abort","error"),Y(!1);case 19:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(){return e.apply(this,arguments)}}(),ve=function(e){var n=[];return t.forEach((function(t,r){e!==r&&n.push(Object(C.jsx)(y.a,{value:r,children:Object(C.jsxs)(N.a,{container:!0,direction:"row",children:[Object(C.jsx)(N.a,{sx:{mr:1,mb:-1},children:Object(C.jsx)("img",{src:t.icon,alt:"",width:"24",height:"24"})}),Object(C.jsx)(N.a,{children:Object(C.jsx)(j.a,{children:t.symbol||t.address})})]})},r))})),n};return Object(C.jsxs)("div",{children:[Object(C.jsxs)(v.a,{sx:{p:2,border:"0px solid",mt:1,mb:4,boxShadow:2},children:[Object(C.jsx)(N.a,{container:!0,sx:{mb:4},children:Object(C.jsx)(I,{name:"Add Liquidity"})}),Object(C.jsxs)(N.a,{container:!0,spacing:2,children:[Object(C.jsxs)(N.a,{item:!0,xs:6,children:[Object(C.jsxs)(Je.a,{fullWidth:!0,children:[Object(C.jsx)(Ye.a,{id:"token1-label",children:"Token 1:"}),Object(C.jsx)(Ze.a,{labelId:"token1-label",id:"token1-select",value:i,label:"Token 1",onChange:function(e){var t=e.target.value;l(t),we(t),mt("pool-token1")},children:ve(w)})]}),Object(C.jsx)(lt,{token:i,amount:he(i),showMaxButton:!0,setMaxAmountHandler:pe})]}),Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Je.a,{fullWidth:!0,children:Object(C.jsx)(Qe.a,{helperText:"Amount to provide",id:"token1-amount",inputProps:{variant:"outlined",placeholder:"0.00",type:"string",autoComplete:"off","aria-labelledby":"input-amount1"},value:x||"",onChange:function(e){return pe(i,e.target.value)},error:xe(i,x)===se,disabled:""===i})})})]}),Object(C.jsxs)(N.a,{container:!0,spacing:2,sx:{mt:2},children:[Object(C.jsxs)(N.a,{item:!0,xs:6,children:[Object(C.jsxs)(Je.a,{fullWidth:!0,children:[Object(C.jsx)(Ye.a,{id:"token2-label",children:"Token 2:"}),Object(C.jsx)(Ze.a,{labelId:"token2-label",id:"token2-select",value:w,label:"Token 2",onChange:function(e){var t=e.target.value;S(t),we(t),mt("pool-token2")},children:ve(i)})]}),Object(C.jsx)(lt,{token:w,amount:he(w),showMaxButton:!0,setMaxAmountHandler:pe})]}),Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Je.a,{fullWidth:!0,children:Object(C.jsx)(Qe.a,{helperText:"Amount to provide",id:"token2-amount",inputProps:{variant:"outlined",placeholder:"0.00",type:"string",autoComplete:"off","aria-labelledby":"input-amount2"},value:_||"",onChange:function(e){return pe(w,e.target.value)},error:xe(w,_)===se,disabled:""===w})})})]}),function(){var e=a.get(R);if(!x||!_||!R||!e)return Object(C.jsx)("div",{});var n=t.get(i).symbol,r=t.get(w).symbol;console.log("-----POOL SHARE: ",x,_,De(e.token1,e.token1Amount)+Object(m.BigNumber)(x),De(e.token2,e.token2Amount));var c=fe(R,w,i),o=fe(R,i,w),s=e.token1===i?Object(m.BigNumber)(x).div(Object(m.BigNumber)(x).plus(Object(m.BigNumber)(De(e.token1,e.token1Amount)))):Object(m.BigNumber)(x).div(Object(m.BigNumber)(x).plus(Object(m.BigNumber)(De(e.token2,e.token2Amount))));return Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(N.a,{children:Object(C.jsxs)(Ke.a,{sx:{mb:2,mt:2,boxShadow:2},children:[Object(C.jsx)(yt.a,{children:Object(C.jsx)(j.a,{sx:{fontSize:16,fontWeight:"500",mb:0},gutterBottom:!0,children:"Pool Prices and Share"})}),Object(C.jsx)(Ke.a,{sx:{mb:0,mt:0},children:Object(C.jsxs)(N.a,{item:!0,container:!0,alignItems:"center",spacing:2,children:[Object(C.jsxs)(N.a,{item:!0,xs:4,children:[Object(C.jsx)(j.a,{sx:{textAlign:"center",lineHeight:2,mt:1,fontWeight:"bold"},children:be(c)}),Object(C.jsxs)(j.a,{sx:{textAlign:"center",fontSize:12,mb:1},children:[n," for ",r]})]}),Object(C.jsxs)(N.a,{item:!0,xs:4,children:[Object(C.jsx)(j.a,{sx:{textAlign:"center",lineHeight:2,mt:1,fontWeight:"bold"},children:be(o)}),Object(C.jsxs)(j.a,{sx:{textAlign:"center",fontSize:12,mb:1},children:[r," for ",n]})]}),Object(C.jsxs)(N.a,{item:!0,xs:4,children:[Object(C.jsxs)(j.a,{sx:{textAlign:"center",lineHeight:2,mt:1,fontWeight:"bold"},children:[be(s,!0),"%"]}),Object(C.jsx)(j.a,{sx:{textAlign:"center",fontSize:12,mb:1},children:"Share of Pool"})]})]})})]})})})}(),Object(C.jsxs)(Ke.a,{sx:{minWidth:275,mb:2,mt:3,boxShadow:2},children:[Object(C.jsx)(vt,{secondary:"true"}),Object(C.jsx)(ut,{token:i,tokenAmount:x,activePoolId:R,tokenInRange:xe(i,x)===ue}),Object(C.jsx)(ut,{token:w,tokenAmount:_,activePoolId:R,tokenInRange:xe(w,_)===ue}),function(){mt("add-liquidity");var e=xe(i,x),t=xe(w,_);if(i&&w&&x>0&&_>0&&e===ue&&t===ue&&0!==R)return Object(C.jsx)(Xe.a,{color:"primary",variant:"contained",fullWidth:!0,disabled:!(H&&de(i,x)&&de(w,_)||J),loading:J,loadingPosition:"start",startIcon:Object(C.jsx)(Nt.a,{}),onClick:ge,children:J?"ADDING LIQUIDITY":"ADD LIQUIDITY"});if(H&&i&&w&&x>0&&_>0&&(e!==ue||t!==ue))return Object(C.jsx)(Xe.a,{color:"primary",variant:"contained",fullWidth:!0,disabled:!0,loading:e===le||t===le,loadingPosition:"start",startIcon:Object(C.jsx)(at.a,{}),children:e===se||t===se?"AMOUNT EXCEEDS WALLET BALANCE":"CHECKING WALLET BALANCE"});if(i&&w&&0===R)return Object(C.jsx)(E.a,{color:"primary",variant:"contained",fullWidth:!0,disabled:!0,children:"NOT A VALID Pool"});if(H){var n="";if(i||w||(n="SELECT TOKENS"),(!i&&w||i&&!w)&&(n="SELECT TOKEN"),!i||!w||x&&_||(n="ENTER AMOUNT"),""!==n)return Object(C.jsx)(E.a,{color:"secondary",variant:"contained",fullWidth:!0,disabled:!0,children:n})}return Object(C.jsx)("div",{})}()]})]}),Object(C.jsx)(Ht,{})]})},Vt=n(26),Jt=n(78);Vt.d.register(Vt.c,Vt.i,Vt.k,Vt.h,Vt.o,Vt.p,Vt.f);var Yt=function(){var e=["2021-12-14","2021-12-13","2021-12-12","2021-12-11","2021-12-10","2021-12-09","2021-12-08","2021-12-07","2021-12-06","2021-12-05"],t=[{id:1,label:"",data:[9.486967291294242,9.913585044383598,6.1093149832212585,8.888170412454828,9.644500380279675,5.592256920179448,1.6120884439497363,1.6694652914713426,9.780713359093626,6.9842512776941055]}];return Object(C.jsx)("div",{children:Object(C.jsxs)(Ke.a,{sx:{mb:0,mt:0},children:[Object(C.jsx)(j.a,{children:"Overview"}),Object(C.jsxs)(N.a,{item:!0,container:!0,alignItems:"center",spacing:2,children:[Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Jt.a,{datasetIdKey:"id",data:{labels:e,datasets:t}})}),Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Jt.a,{datasetIdKey:"id",data:{labels:e,datasets:t}})})]})]})})},Zt=n(345),Qt=n(378),Xt=function(){var e=Object(r.useState)(0),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(C.jsxs)(v.a,{children:[Object(C.jsxs)(Zt.a,{sx:{mt:3,mb:2},value:n,onChange:function(e,t){a(t)},centered:!0,children:[Object(C.jsx)(Qt.a,{className:"swap-tab",label:"Swap",sx:{fontSize:18}}),Object(C.jsx)(Qt.a,{className:"provide-tab",label:"Pools",sx:{fontSize:18}}),Object(C.jsx)(Qt.a,{className:"chart-tab",label:"Charts",sx:{fontSize:18}})]}),0===n&&Object(C.jsx)(wt,{}),1===n&&Object(C.jsx)(Kt,{}),2===n&&Object(C.jsx)(Yt,{})]})};var $t=function(e){return Object(C.jsx)("div",{children:Object(C.jsxs)(E.a,{sx:{mr:2},variant:"contained",onClick:function(){window.open("https://goerli.voyager.online/tx/"+e.hash,"_blank")},children:["Tx ",Ie(e.hash)," ",e.transactionStatus]})})};var en=function(){var e=Object(O.f)(M),t=Object(h.a)(e,1)[0],n=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dismiss){e.next=5;break}return e.next=3,Te(t.hash);case 3:null!==(n=e.sent)&&(n.includes("RECEIVED")&&me("Transaction Sent","success"),n.includes("REJECTED")&&me("Transaction Rejected","error"),n.includes("PENDING")&&(me("Transaction Pending","success"),ge(!1),ve()),n.includes("ACCEPTED")&&me("Transaction Accepted","success"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ct.a)(n,1e4),Object(C.jsx)(C.Fragment,{children:function(){var e=[];return t.forEach((function(t){t.dismiss||e.push(Object(C.jsx)($t,{hash:t.hash,transactionStatus:t.status,children:" "},t.hash))})),e}()})},tn=n(352),nn=n(347);var rn=function(e){var t=a.a.useState(e.open),n=Object(h.a)(t,2),r=n[0],c=n[1],o=function(e,t){"clickaway"!==t&&c(!1)};return Object(C.jsx)(tn.a,{className:"toast",open:r,autoHideDuration:6e3,onClose:o,children:Object(C.jsx)(nn.a,{onClose:o,severity:e.type,sx:{width:"100%"},children:e.msg})})};var an=function(){var e=Object(O.f)(L),t=Object(h.a)(e,1)[0];return Object(C.jsx)("div",{children:function(){var e=[];return t.forEach((function(t){t.dismiss||e.push(Object(C.jsx)(rn,{open:!t.dismiss,msg:t.msg,type:t.type},t.hash))})),e}()})};Vt.d.register(Vt.c,Vt.i,Vt.k,Vt.h,Vt.o,Vt.p,Vt.f);var cn=function(){var e=function(e){return{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:e}}}},t=["2021-12-14","2021-12-13","2021-12-12","2021-12-11","2021-12-10","2021-12-09","2021-12-08","2021-12-07","2021-12-06","2021-12-05"],n=[{id:1,label:"",data:[9.486967291294242,9.913585044383598,6.1093149832212585,8.888170412454828,9.644500380279675,5.592256920179448,1.6120884439497363,1.6694652914713426,9.780713359093626,6.9842512776941055]}];return Object(C.jsx)("div",{children:Object(C.jsxs)(Ke.a,{sx:{mb:0,mt:0},children:[Object(C.jsx)(j.a,{children:"Overview"}),Object(C.jsxs)(N.a,{item:!0,container:!0,alignItems:"center",spacing:2,children:[Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Jt.a,{options:e("TVL"),datasetIdKey:"id",data:{labels:t,datasets:n}})}),Object(C.jsx)(N.a,{item:!0,xs:6,children:Object(C.jsx)(Jt.a,{options:e("Volume"),datasetIdKey:"id",data:{labels:t,datasets:n}})})]})]})})},on=n(179),sn=n(31),un=n(14);var ln=function(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(new Map),o=Object(h.a)(c,2),i=o[0],d=o[1],f=Object(r.useState)([]),m=Object(h.a)(f,2),p=m[0],g=m[1],k=Object(O.f)(P),w=Object(h.a)(k,1)[0],y=Object(O.f)(T),S=Object(h.a)(y,1)[0],A=Object(O.f)(q),B=Object(h.a)(A,1)[0],_=Object(O.f)(G),I=Object(h.a)(_,1)[0];Object(r.useEffect)((function(){console.log("minter tokens effect"),w.forEach((function(e,t){console.log(t),i.get(t)||d((function(e){var n=new Map(e);return n.set(t,0),n}))}))}),[w,i]);var W={0:"...",1:"MINTING",2:"MINTED"},D=function(){console.log("waiting:",p);var e=Object(x.a)(p),t=e.shift();console.log("address: ",t),Ne(t,Pe(t,n)),g(e)};Object(r.useEffect)((function(){console.log("lastTxDone changed, val=",I," waitingToMint=",p),I&&p.length>0&&D()}),[I]);var M=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("will mint..."),console.log(i.entries()),t=Object(un.a)(i.entries());try{for(r=function(){var e=n.value;console.log(e);var t=e[0],r=e[1];console.log("handleMint address=",t," minted=",r);var a=w.get(t);0===r&&a&&(g((function(e){return[].concat(Object(x.a)(e),[t])})),d((function(e){var n=new Map(e);return n.set(t,1),n})))},t.s();!(n=t.n()).done;)r()}catch(a){t.e(a)}finally{t.f()}I&&D();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(C.jsxs)(v.a,{children:[Object(C.jsx)(N.a,{container:!0,sx:{mt:2,mb:2},children:Object(C.jsx)(v.a,{sx:{flexGrow:1},children:Object(C.jsx)(l.a,{position:"static",children:Object(C.jsx)(b.a,{children:Object(C.jsx)(j.a,{children:"Mint (testnet)"})})})})}),Object(C.jsxs)(N.a,{container:!0,spacing:2,sx:{},children:[Object(C.jsx)(N.a,{item:!0,xs:12,children:Object(C.jsx)(Je.a,{fullWidth:!0,children:Object(C.jsx)(Qe.a,{helperText:"Amount to mint",id:"mint-amount",inputProps:{variant:"outlined",placeholder:"0.00",type:"number",autoComplete:"off"},value:n,onChange:function(e){return t=e.target.value,void a(t);var t}})})}),Object(C.jsx)(N.a,{item:!0,xs:12,children:Object(C.jsx)(E.a,{color:"inherit",variant:"outlined",fullWidth:!0,disabled:!(S&&n>0),onClick:M,children:S?n>0?"MINT":"PLEASE SET MINT AMOUNT":"PLEASE CONNECT WALLET"})}),Object(C.jsx)(N.a,{item:!0,xs:12,children:function(){console.log("mintedTokensList!");var e=[];return i.forEach((function(t,n){var r=w.get(n);console.log("walletAmounts=",B);var a=B.get(n);r&&e.push(Object(C.jsx)(Ke.a,{sx:{mt:1},children:Object(C.jsxs)(N.a,{container:!0,direction:"row",children:[Object(C.jsx)(N.a,{sx:{mr:1,mb:-1},children:Object(C.jsx)("img",{src:r.icon,alt:"",width:"24",height:"24"})}),Object(C.jsx)(N.a,{children:Object(C.jsx)(j.a,{children:r.name||r.address})}),Object(C.jsx)(N.a,{sx:{ml:2},children:Object(C.jsxs)(j.a,{children:[" in wallet: ",a]})}),Object(C.jsx)(N.a,{container:!0,direction:"row",justifyContent:"flex-end",sx:{mr:1,mt:-3},children:W[t]})]})},n))})),console.log(e),e}()}),"waiting to mint:",Object(C.jsx)(N.a,{item:!0,xs:12,children:function(){var e=[];console.log(p);var t,n=Object(un.a)(p);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.push(Object(C.jsxs)("div",{children:["token ",r]}))}}catch(a){n.e(a)}finally{n.f()}return e}()})]})]})};n(280);var bn=function(){Object(r.useEffect)((function(){ht.a.initialize("UA-215866683-1"),xt("/")}),[]),Object(r.useEffect)((function(){qe(),console.log("Finished updating static data"),ge(!0)}),[]);var e=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ge(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ct.a)(e,15e3),Object(C.jsx)(on.a,{children:Object(C.jsxs)(O.a,{children:[Object(C.jsx)(f.a,{}),Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(l.a,{position:"sticky",children:Object(C.jsxs)(b.a,{children:[Object(C.jsx)(j.a,{variant:"h4",color:"inherit",component:"div",sx:{flexGrow:1},children:"mySwap"}),Object(C.jsx)(en,{}),Object(C.jsx)(vt,{})]})}),Object(C.jsxs)(sn.c,{children:[Object(C.jsx)(sn.a,{exact:!0,path:"/",children:Object(C.jsx)(d.a,{maxWidth:"sm",children:Object(C.jsx)(Xt,{})})}),Object(C.jsx)(sn.a,{path:"/charts",children:Object(C.jsx)(cn,{})}),Object(C.jsx)(sn.a,{path:"/mint",children:Object(C.jsx)(d.a,{maxWidth:"sm",children:Object(C.jsx)(ln,{})})})]}),Object(C.jsx)(an,{})]})]})})},jn=n(343);o.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(jn.a,{children:Object(C.jsx)(bn,{})})}),document.getElementById("root"))}},[[290,1,2]]]);
//# sourceMappingURL=main.fc03e67f.chunk.js.map